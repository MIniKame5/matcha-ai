<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸµ ã¾ã£ã¡ã‚ƒAIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (Qwen2.5-0.5Bæ¥ç¶š)</title>
    <!-- Tailwind CSSã‚’èª­ã¿è¾¼ã‚“ã§ã€ç¾ã—ã„UIã‚’ä½œã‚‹ã‚ˆï¼ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ã¾ã£ã¡ã‚ƒç‹å›½ã®ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼ */
        :root {
            --matcha-green: #9CCC65; /* ãƒ©ã‚¤ãƒ ã‚°ãƒªãƒ¼ãƒ³ */
            --matcha-dark: #689F38; /* ã‚ªãƒªãƒ¼ãƒ–ã‚°ãƒªãƒ¼ãƒ³ */
            --matcha-bg: #F9FFF7;   /* ã»ã¼ç™½ã®èƒŒæ™¯ */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--matcha-bg);
        }
        .matcha-card {
            box-shadow: 0 10px 30px rgba(104, 159, 56, 0.3);
            border: 1px solid var(--matcha-green);
        }
        .matcha-btn {
            background-color: var(--matcha-dark);
            transition: transform 0.1s;
        }
        .matcha-btn:hover {
            background-color: #7CB342;
            transform: translateY(-1px);
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <!-- ãƒ¡ã‚¤ãƒ³ã®AIãƒãƒ£ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ -->
    <div class="matcha-card bg-white w-full max-w-2xl p-8 rounded-2xl">
        <h1 class="text-3xl font-extrabold text-center mb-6" style="color: var(--matcha-dark);">
            ã¾ã£ã¡ã‚ƒAI ğŸµ
        </h1>
        <!-- èª¬æ˜ã¯å‰Šé™¤ã•ã‚Œã¾ã—ãŸ -->
        
        <!-- è³ªå•å…¥åŠ›ã‚¨ãƒªã‚¢ -->
        <div class="mb-6">
            <label for="input_field_id" class="block text-sm font-medium mb-2" style="color: var(--matcha-dark);">è³ªå•ã‚’å…¥åŠ›ã—ã¦ã­ï¼</label>
            <textarea id="input_field_id" rows="4" 
                      class="w-full p-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-opacity-50" 
                      style="border-color: var(--matcha-green); outline: none;" 
                      placeholder=""></textarea> <!-- ä¾‹ã‚’å‰Šé™¤ã—ã¾ã—ãŸ -->
        </div>

        <!-- å¿œç­”ãƒœã‚¿ãƒ³ -->
        <button id="submit_button" onclick="sendQuestionToAI()" 
                class="matcha-btn text-white w-full py-3 rounded-xl font-bold text-lg hover:shadow-lg">
            ã¾ã£ã¡ã‚ƒAIã«é€ä¿¡
        </button>

        <!-- å¿œç­”è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
        <div class="mt-8">
            <h2 class="text-xl font-bold mb-3" style="color: var(--matcha-dark);">AIã‹ã‚‰ã®å¿œç­”ï¼š</h2>
            <div id="output_area_id" 
                 class="bg-gray-100 p-4 rounded-lg min-h-[100px] whitespace-pre-wrap text-gray-800">
                ã“ã“ã«Qwen2.5-0.5Bã‹ã‚‰ã®å¿œç­”ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆ...
            </div>
            <p id="loading_message" class="text-center text-orange-500 font-semibold mt-4 hidden">
                ğŸ¢ AIãŒè€ƒãˆã¦ã‚‹ã‚ˆï¼å°‘ã—å¾…ã£ã¦ã­...
            </p>
        </div>

    </div>

    <script>
        // AIã‚µãƒ¼ãƒãƒ¼ã®ã‚¢ãƒ‰ãƒ¬ã‚¹
        const AI_SERVER_URL = 'http://localhost:8001/generate'; 
        
        // IDã‚’ä¿®æ­£æ¸ˆã¿ï¼HTMLã¨JavaScriptãŒã“ã‚Œã§é€£æºã™ã‚‹ã‚ˆï¼
        const inputField = document.getElementById('input_field_id');
        const outputArea = document.getElementById('output_area_id');
        const loadingMessage = document.getElementById('loading_message');
        const submitButton = document.getElementById('submit_button');

        // AIã‚µãƒ¼ãƒãƒ¼ã«è³ªå•ã‚’é€ä¿¡ã™ã‚‹é–¢æ•° (ã‚¹ãƒ†ãƒƒãƒ—8ã§æ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè£…ï¼)
        async function sendQuestionToAI() {
            const prompt = inputField.value.trim();
            if (!prompt) {
                alert('è³ªå•ã‚’å…¥åŠ›ã—ã¦ã­ï¼');
                return;
            }
            
            // UIã‚’ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­ã«åˆ‡ã‚Šæ›¿ãˆã‚‹
            outputArea.innerText = '';
            loadingMessage.classList.remove('hidden');
            submitButton.disabled = true;

            const requestData = {
                prompt: prompt,
                max_tokens: 500,
                temperature: 0.7 
            };

            try {
                // fetchã§å›ã®AIã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šï¼
                const response = await fetch(AI_SERVER_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(requestData)
                });

                if (!response.ok) {
                    throw new Error(`HTTPã‚¨ãƒ©ãƒ¼ï¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ${response.status}`);
                }

                const data = await response.json();
                
                // AIã‹ã‚‰ã®å¿œç­”ã‚’ç”»é¢ã«è¡¨ç¤ºï¼
                const aiResponseText = data.response;
                outputArea.innerText = aiResponseText; 

            } catch (error) {
                // é€šä¿¡å¤±æ•—ï¼ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ã­ï¼
                console.error('APIé€šä¿¡ã‚¨ãƒ©ãƒ¼:', error);
                outputArea.innerText = 'ã”ã‚ã‚“ï¼AIã‚µãƒ¼ãƒãƒ¼ã¨é€šä¿¡ã§ããªã‹ã£ãŸã‚ˆ...ğŸ˜­ ã‚µãƒ¼ãƒãƒ¼ï¼ˆAnaconda Promptã®ç”»é¢ï¼‰ãŒå‹•ã„ã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ã­ï¼';
            } finally {
                // UIã‚’å…ƒã«æˆ»ã™
                loadingMessage.classList.add('hidden');
                submitButton.disabled = false;
            }
        }
    </script>
</body>
</html>
