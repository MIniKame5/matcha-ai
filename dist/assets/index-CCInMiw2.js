(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(l){if(l.ep)return;l.ep=!0;const c=i(l);fetch(l.href,c)}})();function cv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Sd={exports:{}},dl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var by;function lI(){if(by)return dl;by=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(a,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var g in l)g!=="key"&&(c[g]=l[g])}else c=l;return l=c.ref,{$$typeof:r,type:a,key:d,ref:l!==void 0?l:null,props:c}}return dl.Fragment=t,dl.jsx=i,dl.jsxs=i,dl}var wy;function uI(){return wy||(wy=1,Sd.exports=lI()),Sd.exports}var tt=uI(),Id={exports:{}},Et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ny;function cI(){if(Ny)return Et;Ny=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),V=Symbol.iterator;function F(D){return D===null||typeof D!="object"?null:(D=V&&D[V]||D["@@iterator"],typeof D=="function"?D:null)}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,J={};function ut(D,K,nt){this.props=D,this.context=K,this.refs=J,this.updater=nt||Z}ut.prototype.isReactComponent={},ut.prototype.setState=function(D,K){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,K,"setState")},ut.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function ht(){}ht.prototype=ut.prototype;function lt(D,K,nt){this.props=D,this.context=K,this.refs=J,this.updater=nt||Z}var Rt=lt.prototype=new ht;Rt.constructor=lt,$(Rt,ut.prototype),Rt.isPureReactComponent=!0;var Wt=Array.isArray;function Ct(){}var b={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function w(D,K,nt){var rt=nt.ref;return{$$typeof:r,type:D,key:K,ref:rt!==void 0?rt:null,props:nt}}function M(D,K){return w(D.type,K,D.props)}function N(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function U(D){var K={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(nt){return K[nt]})}var R=/\/+/g;function ne(D,K){return typeof D=="object"&&D!==null&&D.key!=null?U(""+D.key):K.toString(36)}function Ce(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(Ct,Ct):(D.status="pending",D.then(function(K){D.status==="pending"&&(D.status="fulfilled",D.value=K)},function(K){D.status==="pending"&&(D.status="rejected",D.reason=K)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function G(D,K,nt,rt,_t){var St=typeof D;(St==="undefined"||St==="boolean")&&(D=null);var Ut=!1;if(D===null)Ut=!0;else switch(St){case"bigint":case"string":case"number":Ut=!0;break;case"object":switch(D.$$typeof){case r:case t:Ut=!0;break;case A:return Ut=D._init,G(Ut(D._payload),K,nt,rt,_t)}}if(Ut)return _t=_t(D),Ut=rt===""?"."+ne(D,0):rt,Wt(_t)?(nt="",Ut!=null&&(nt=Ut.replace(R,"$&/")+"/"),G(_t,K,nt,"",function(ns){return ns})):_t!=null&&(N(_t)&&(_t=M(_t,nt+(_t.key==null||D&&D.key===_t.key?"":(""+_t.key).replace(R,"$&/")+"/")+Ut)),K.push(_t)),1;Ut=0;var be=rt===""?".":rt+":";if(Wt(D))for(var ie=0;ie<D.length;ie++)rt=D[ie],St=be+ne(rt,ie),Ut+=G(rt,K,nt,St,_t);else if(ie=F(D),typeof ie=="function")for(D=ie.call(D),ie=0;!(rt=D.next()).done;)rt=rt.value,St=be+ne(rt,ie++),Ut+=G(rt,K,nt,St,_t);else if(St==="object"){if(typeof D.then=="function")return G(Ce(D),K,nt,rt,_t);throw K=String(D),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Ut}function et(D,K,nt){if(D==null)return D;var rt=[],_t=0;return G(D,rt,"","",function(St){return K.call(nt,St,_t++)}),rt}function ft(D){if(D._status===-1){var K=D._result;K=K(),K.then(function(nt){(D._status===0||D._status===-1)&&(D._status=1,D._result=nt)},function(nt){(D._status===0||D._status===-1)&&(D._status=2,D._result=nt)}),D._status===-1&&(D._status=0,D._result=K)}if(D._status===1)return D._result.default;throw D._result}var xt=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},Gt={map:et,forEach:function(D,K,nt){et(D,function(){K.apply(this,arguments)},nt)},count:function(D){var K=0;return et(D,function(){K++}),K},toArray:function(D){return et(D,function(K){return K})||[]},only:function(D){if(!N(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Et.Activity=S,Et.Children=Gt,Et.Component=ut,Et.Fragment=i,Et.Profiler=l,Et.PureComponent=lt,Et.StrictMode=a,Et.Suspense=_,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=b,Et.__COMPILER_RUNTIME={__proto__:null,c:function(D){return b.H.useMemoCache(D)}},Et.cache=function(D){return function(){return D.apply(null,arguments)}},Et.cacheSignal=function(){return null},Et.cloneElement=function(D,K,nt){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var rt=$({},D.props),_t=D.key;if(K!=null)for(St in K.key!==void 0&&(_t=""+K.key),K)!I.call(K,St)||St==="key"||St==="__self"||St==="__source"||St==="ref"&&K.ref===void 0||(rt[St]=K[St]);var St=arguments.length-2;if(St===1)rt.children=nt;else if(1<St){for(var Ut=Array(St),be=0;be<St;be++)Ut[be]=arguments[be+2];rt.children=Ut}return w(D.type,_t,rt)},Et.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},Et.createElement=function(D,K,nt){var rt,_t={},St=null;if(K!=null)for(rt in K.key!==void 0&&(St=""+K.key),K)I.call(K,rt)&&rt!=="key"&&rt!=="__self"&&rt!=="__source"&&(_t[rt]=K[rt]);var Ut=arguments.length-2;if(Ut===1)_t.children=nt;else if(1<Ut){for(var be=Array(Ut),ie=0;ie<Ut;ie++)be[ie]=arguments[ie+2];_t.children=be}if(D&&D.defaultProps)for(rt in Ut=D.defaultProps,Ut)_t[rt]===void 0&&(_t[rt]=Ut[rt]);return w(D,St,_t)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(D){return{$$typeof:g,render:D}},Et.isValidElement=N,Et.lazy=function(D){return{$$typeof:A,_payload:{_status:-1,_result:D},_init:ft}},Et.memo=function(D,K){return{$$typeof:y,type:D,compare:K===void 0?null:K}},Et.startTransition=function(D){var K=b.T,nt={};b.T=nt;try{var rt=D(),_t=b.S;_t!==null&&_t(nt,rt),typeof rt=="object"&&rt!==null&&typeof rt.then=="function"&&rt.then(Ct,xt)}catch(St){xt(St)}finally{K!==null&&nt.types!==null&&(K.types=nt.types),b.T=K}},Et.unstable_useCacheRefresh=function(){return b.H.useCacheRefresh()},Et.use=function(D){return b.H.use(D)},Et.useActionState=function(D,K,nt){return b.H.useActionState(D,K,nt)},Et.useCallback=function(D,K){return b.H.useCallback(D,K)},Et.useContext=function(D){return b.H.useContext(D)},Et.useDebugValue=function(){},Et.useDeferredValue=function(D,K){return b.H.useDeferredValue(D,K)},Et.useEffect=function(D,K){return b.H.useEffect(D,K)},Et.useEffectEvent=function(D){return b.H.useEffectEvent(D)},Et.useId=function(){return b.H.useId()},Et.useImperativeHandle=function(D,K,nt){return b.H.useImperativeHandle(D,K,nt)},Et.useInsertionEffect=function(D,K){return b.H.useInsertionEffect(D,K)},Et.useLayoutEffect=function(D,K){return b.H.useLayoutEffect(D,K)},Et.useMemo=function(D,K){return b.H.useMemo(D,K)},Et.useOptimistic=function(D,K){return b.H.useOptimistic(D,K)},Et.useReducer=function(D,K,nt){return b.H.useReducer(D,K,nt)},Et.useRef=function(D){return b.H.useRef(D)},Et.useState=function(D){return b.H.useState(D)},Et.useSyncExternalStore=function(D,K,nt){return b.H.useSyncExternalStore(D,K,nt)},Et.useTransition=function(){return b.H.useTransition()},Et.version="19.2.0",Et}var Oy;function gm(){return Oy||(Oy=1,Id.exports=cI()),Id.exports}var Pe=gm();const hI=cv(Pe);var Rd={exports:{}},ml={},Cd={exports:{}},bd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy;function fI(){return Dy||(Dy=1,(function(r){function t(G,et){var ft=G.length;G.push(et);t:for(;0<ft;){var xt=ft-1>>>1,Gt=G[xt];if(0<l(Gt,et))G[xt]=et,G[ft]=Gt,ft=xt;else break t}}function i(G){return G.length===0?null:G[0]}function a(G){if(G.length===0)return null;var et=G[0],ft=G.pop();if(ft!==et){G[0]=ft;t:for(var xt=0,Gt=G.length,D=Gt>>>1;xt<D;){var K=2*(xt+1)-1,nt=G[K],rt=K+1,_t=G[rt];if(0>l(nt,ft))rt<Gt&&0>l(_t,nt)?(G[xt]=_t,G[rt]=ft,xt=rt):(G[xt]=nt,G[K]=ft,xt=K);else if(rt<Gt&&0>l(_t,ft))G[xt]=_t,G[rt]=ft,xt=rt;else break t}}return et}function l(G,et){var ft=G.sortIndex-et.sortIndex;return ft!==0?ft:G.id-et.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();r.unstable_now=function(){return d.now()-g}}var _=[],y=[],A=1,S=null,V=3,F=!1,Z=!1,$=!1,J=!1,ut=typeof setTimeout=="function"?setTimeout:null,ht=typeof clearTimeout=="function"?clearTimeout:null,lt=typeof setImmediate<"u"?setImmediate:null;function Rt(G){for(var et=i(y);et!==null;){if(et.callback===null)a(y);else if(et.startTime<=G)a(y),et.sortIndex=et.expirationTime,t(_,et);else break;et=i(y)}}function Wt(G){if($=!1,Rt(G),!Z)if(i(_)!==null)Z=!0,Ct||(Ct=!0,U());else{var et=i(y);et!==null&&Ce(Wt,et.startTime-G)}}var Ct=!1,b=-1,I=5,w=-1;function M(){return J?!0:!(r.unstable_now()-w<I)}function N(){if(J=!1,Ct){var G=r.unstable_now();w=G;var et=!0;try{t:{Z=!1,$&&($=!1,ht(b),b=-1),F=!0;var ft=V;try{e:{for(Rt(G),S=i(_);S!==null&&!(S.expirationTime>G&&M());){var xt=S.callback;if(typeof xt=="function"){S.callback=null,V=S.priorityLevel;var Gt=xt(S.expirationTime<=G);if(G=r.unstable_now(),typeof Gt=="function"){S.callback=Gt,Rt(G),et=!0;break e}S===i(_)&&a(_),Rt(G)}else a(_);S=i(_)}if(S!==null)et=!0;else{var D=i(y);D!==null&&Ce(Wt,D.startTime-G),et=!1}}break t}finally{S=null,V=ft,F=!1}et=void 0}}finally{et?U():Ct=!1}}}var U;if(typeof lt=="function")U=function(){lt(N)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,ne=R.port2;R.port1.onmessage=N,U=function(){ne.postMessage(null)}}else U=function(){ut(N,0)};function Ce(G,et){b=ut(function(){G(r.unstable_now())},et)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return V},r.unstable_next=function(G){switch(V){case 1:case 2:case 3:var et=3;break;default:et=V}var ft=V;V=et;try{return G()}finally{V=ft}},r.unstable_requestPaint=function(){J=!0},r.unstable_runWithPriority=function(G,et){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ft=V;V=G;try{return et()}finally{V=ft}},r.unstable_scheduleCallback=function(G,et,ft){var xt=r.unstable_now();switch(typeof ft=="object"&&ft!==null?(ft=ft.delay,ft=typeof ft=="number"&&0<ft?xt+ft:xt):ft=xt,G){case 1:var Gt=-1;break;case 2:Gt=250;break;case 5:Gt=1073741823;break;case 4:Gt=1e4;break;default:Gt=5e3}return Gt=ft+Gt,G={id:A++,callback:et,priorityLevel:G,startTime:ft,expirationTime:Gt,sortIndex:-1},ft>xt?(G.sortIndex=ft,t(y,G),i(_)===null&&G===i(y)&&($?(ht(b),b=-1):$=!0,Ce(Wt,ft-xt))):(G.sortIndex=Gt,t(_,G),Z||F||(Z=!0,Ct||(Ct=!0,U()))),G},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(G){var et=V;return function(){var ft=V;V=et;try{return G.apply(this,arguments)}finally{V=ft}}}})(bd)),bd}var My;function dI(){return My||(My=1,Cd.exports=fI()),Cd.exports}var wd={exports:{}},Ke={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vy;function mI(){if(Vy)return Ke;Vy=1;var r=gm();function t(_){var y="https://react.dev/errors/"+_;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)y+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+_+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(_,y,A){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:S==null?null:""+S,children:_,containerInfo:y,implementation:A}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(_,y){if(_==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ke.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Ke.createPortal=function(_,y){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return c(_,y,null,A)},Ke.flushSync=function(_){var y=d.T,A=a.p;try{if(d.T=null,a.p=2,_)return _()}finally{d.T=y,a.p=A,a.d.f()}},Ke.preconnect=function(_,y){typeof _=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,a.d.C(_,y))},Ke.prefetchDNS=function(_){typeof _=="string"&&a.d.D(_)},Ke.preinit=function(_,y){if(typeof _=="string"&&y&&typeof y.as=="string"){var A=y.as,S=g(A,y.crossOrigin),V=typeof y.integrity=="string"?y.integrity:void 0,F=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;A==="style"?a.d.S(_,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:S,integrity:V,fetchPriority:F}):A==="script"&&a.d.X(_,{crossOrigin:S,integrity:V,fetchPriority:F,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ke.preinitModule=function(_,y){if(typeof _=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var A=g(y.as,y.crossOrigin);a.d.M(_,{crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&a.d.M(_)},Ke.preload=function(_,y){if(typeof _=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var A=y.as,S=g(A,y.crossOrigin);a.d.L(_,A,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ke.preloadModule=function(_,y){if(typeof _=="string")if(y){var A=g(y.as,y.crossOrigin);a.d.m(_,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else a.d.m(_)},Ke.requestFormReset=function(_){a.d.r(_)},Ke.unstable_batchedUpdates=function(_,y){return _(y)},Ke.useFormState=function(_,y,A){return d.H.useFormState(_,y,A)},Ke.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ke.version="19.2.0",Ke}var Ly;function gI(){if(Ly)return wd.exports;Ly=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),wd.exports=mI(),wd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uy;function pI(){if(Uy)return ml;Uy=1;var r=dI(),t=gm(),i=gI();function a(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function _(e){if(c(e)!==e)throw Error(a(188))}function y(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(a(188));return n!==e?null:e}for(var s=e,o=n;;){var h=s.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){s=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===s)return _(h),e;if(f===o)return _(h),n;f=f.sibling}throw Error(a(188))}if(s.return!==o.return)s=h,o=f;else{for(var p=!1,T=h.child;T;){if(T===s){p=!0,s=h,o=f;break}if(T===o){p=!0,o=h,s=f;break}T=T.sibling}if(!p){for(T=f.child;T;){if(T===s){p=!0,s=f,o=h;break}if(T===o){p=!0,o=f,s=h;break}T=T.sibling}if(!p)throw Error(a(189))}}if(s.alternate!==o)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?e:n}function A(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=A(e),n!==null)return n;e=e.sibling}return null}var S=Object.assign,V=Symbol.for("react.element"),F=Symbol.for("react.transitional.element"),Z=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),ut=Symbol.for("react.profiler"),ht=Symbol.for("react.consumer"),lt=Symbol.for("react.context"),Rt=Symbol.for("react.forward_ref"),Wt=Symbol.for("react.suspense"),Ct=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function U(e){return e===null||typeof e!="object"?null:(e=N&&e[N]||e["@@iterator"],typeof e=="function"?e:null)}var R=Symbol.for("react.client.reference");function ne(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===R?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $:return"Fragment";case ut:return"Profiler";case J:return"StrictMode";case Wt:return"Suspense";case Ct:return"SuspenseList";case w:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Z:return"Portal";case lt:return e.displayName||"Context";case ht:return(e._context.displayName||"Context")+".Consumer";case Rt:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case b:return n=e.displayName||null,n!==null?n:ne(e.type)||"Memo";case I:n=e._payload,e=e._init;try{return ne(e(n))}catch{}}return null}var Ce=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ft={pending:!1,data:null,method:null,action:null},xt=[],Gt=-1;function D(e){return{current:e}}function K(e){0>Gt||(e.current=xt[Gt],xt[Gt]=null,Gt--)}function nt(e,n){Gt++,xt[Gt]=e.current,e.current=n}var rt=D(null),_t=D(null),St=D(null),Ut=D(null);function be(e,n){switch(nt(St,n),nt(_t,e),nt(rt,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?J_(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=J_(n),e=Z_(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}K(rt),nt(rt,e)}function ie(){K(rt),K(_t),K(St)}function ns(e){e.memoizedState!==null&&nt(Ut,e);var n=rt.current,s=Z_(n,e.type);n!==s&&(nt(_t,e),nt(rt,s))}function Ks(e){_t.current===e&&(K(rt),K(_t)),Ut.current===e&&(K(Ut),ul._currentValue=ft)}var Qs,Xs;function Zn(e){if(Qs===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Qs=n&&n[1]||"",Xs=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qs+e+Xs}var lo=!1;function is(e,n){if(!e||lo)return"";lo=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(H){var z=H}Reflect.construct(e,[],Y)}else{try{Y.call()}catch(H){z=H}e.call(Y.prototype)}}else{try{throw Error()}catch(H){z=H}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(H){if(H&&z&&typeof H.stack=="string")return[H.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),p=f[0],T=f[1];if(p&&T){var C=p.split(`
`),k=T.split(`
`);for(h=o=0;o<C.length&&!C[o].includes("DetermineComponentFrameRoot");)o++;for(;h<k.length&&!k[h].includes("DetermineComponentFrameRoot");)h++;if(o===C.length||h===k.length)for(o=C.length-1,h=k.length-1;1<=o&&0<=h&&C[o]!==k[h];)h--;for(;1<=o&&0<=h;o--,h--)if(C[o]!==k[h]){if(o!==1||h!==1)do if(o--,h--,0>h||C[o]!==k[h]){var j=`
`+C[o].replace(" at new "," at ");return e.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",e.displayName)),j}while(1<=o&&0<=h);break}}}finally{lo=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Zn(s):""}function uo(e,n){switch(e.tag){case 26:case 27:case 5:return Zn(e.type);case 16:return Zn("Lazy");case 13:return e.child!==n&&n!==null?Zn("Suspense Fallback"):Zn("Suspense");case 19:return Zn("SuspenseList");case 0:case 15:return is(e.type,!1);case 11:return is(e.type.render,!1);case 1:return is(e.type,!0);case 31:return Zn("Activity");default:return""}}function co(e){try{var n="",s=null;do n+=uo(e,s),s=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var ge=Object.prototype.hasOwnProperty,we=r.unstable_scheduleCallback,rr=r.unstable_cancelCallback,Ih=r.unstable_shouldYield,Zl=r.unstable_requestPaint,We=r.unstable_now,rs=r.unstable_getCurrentPriorityLevel,ho=r.unstable_ImmediatePriority,fo=r.unstable_UserBlockingPriority,sr=r.unstable_NormalPriority,Rh=r.unstable_LowPriority,Wl=r.unstable_IdlePriority,$l=r.log,tu=r.unstable_setDisableYieldValue,Pn=null,ke=null;function Tn(e){if(typeof $l=="function"&&tu(e),ke&&typeof ke.setStrictMode=="function")try{ke.setStrictMode(Pn,e)}catch{}}var ce=Math.clz32?Math.clz32:nu,eu=Math.log,Js=Math.LN2;function nu(e){return e>>>=0,e===0?32:31-(eu(e)/Js|0)|0}var Wn=256,ss=262144,pe=4194304;function $n(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ti(e,n,s){var o=e.pendingLanes;if(o===0)return 0;var h=0,f=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var T=o&134217727;return T!==0?(o=T&~f,o!==0?h=$n(o):(p&=T,p!==0?h=$n(p):s||(s=T&~e,s!==0&&(h=$n(s))))):(T=o&~f,T!==0?h=$n(T):p!==0?h=$n(p):s||(s=o&~e,s!==0&&(h=$n(s)))),h===0?0:n!==0&&n!==h&&(n&f)===0&&(f=h&-h,s=n&-n,f>=s||f===32&&(s&4194048)!==0)?n:h}function xn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Ch(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iu(){var e=pe;return pe<<=1,(pe&62914560)===0&&(pe=4194304),e}function ei(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function as(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function bh(e,n,s,o,h,f){var p=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var T=e.entanglements,C=e.expirationTimes,k=e.hiddenUpdates;for(s=p&~s;0<s;){var j=31-ce(s),Y=1<<j;T[j]=0,C[j]=-1;var z=k[j];if(z!==null)for(k[j]=null,j=0;j<z.length;j++){var H=z[j];H!==null&&(H.lane&=-536870913)}s&=~Y}o!==0&&os(e,o,0),f!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=f&~(p&~n))}function os(e,n,s){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-ce(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|s&261930}function mo(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var o=31-ce(s),h=1<<o;h&n|e[o]&n&&(e[o]|=n),s&=~h}}function go(e,n){var s=n&-n;return s=(s&42)!==0?1:ls(s),(s&(e.suspendedLanes|n))!==0?0:s}function ls(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ni(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ru(){var e=et.p;return e!==0?e:(e=window.event,e===void 0?32:Ty(e.type))}function kn(e,n){var s=et.p;try{return et.p=e,n()}finally{et.p=s}}var zn=Math.random().toString(36).slice(2),_e="__reactFiber$"+zn,Me="__reactProps$"+zn,ni="__reactContainer$"+zn,Zs="__reactEvents$"+zn,wh="__reactListeners$"+zn,su="__reactHandles$"+zn,au="__reactResources$"+zn,ii="__reactMarker$"+zn;function Ws(e){delete e[_e],delete e[Me],delete e[Zs],delete e[wh],delete e[su]}function ri(e){var n=e[_e];if(n)return n;for(var s=e.parentNode;s;){if(n=s[ni]||s[_e]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=ry(e);e!==null;){if(s=e[_e])return s;e=ry(e)}return n}e=s,s=e.parentNode}return null}function vn(e){if(e=e[_e]||e[ni]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function cn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(a(33))}function si(e){var n=e[au];return n||(n=e[au]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function ye(e){e[ii]=!0}var po=new Set,_o={};function ai(e,n){oi(e,n),oi(e+"Capture",n)}function oi(e,n){for(_o[e]=n,e=0;e<n.length;e++)po.add(n[e])}var yo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Eo={},To={};function ou(e){return ge.call(To,e)?!0:ge.call(Eo,e)?!1:yo.test(e)?To[e]=!0:(Eo[e]=!0,!1)}function $s(e,n,s){if(ou(n))if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+s)}}function hn(e,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+s)}}function Ee(e,n,s,o){if(o===null)e.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(n,s,""+o)}}function Ve(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ar(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function vo(e,n,s){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,f=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(p){s=""+p,f.call(this,p)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return s},setValue:function(p){s=""+p},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Ft(e){if(!e._valueTracker){var n=ar(e)?"checked":"value";e._valueTracker=vo(e,n,""+e[n])}}function us(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),o="";return e&&(o=ar(e)?e.checked?"true":"false":e.value),e=o,e!==s?(n.setValue(e),!0):!1}function li(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var cs=/[\n"\\]/g;function en(e){return e.replace(cs,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function ta(e,n,s,o,h,f,p,T){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),n!=null?p==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Ve(n)):e.value!==""+Ve(n)&&(e.value=""+Ve(n)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),n!=null?Ao(e,p,Ve(n)):s!=null?Ao(e,p,Ve(s)):o!=null&&e.removeAttribute("value"),h==null&&f!=null&&(e.defaultChecked=!!f),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+Ve(T):e.removeAttribute("name")}function lu(e,n,s,o,h,f,p,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||s!=null){if(!(f!=="submit"&&f!=="reset"||n!=null)){Ft(e);return}s=s!=null?""+Ve(s):"",n=n!=null?""+Ve(n):s,T||n===e.value||(e.value=n),e.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=T?e.checked:!!o,e.defaultChecked=!!o,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p),Ft(e)}function Ao(e,n,s){n==="number"&&li(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function or(e,n,s,o){if(e=e.options,n){n={};for(var h=0;h<s.length;h++)n["$"+s[h]]=!0;for(s=0;s<e.length;s++)h=n.hasOwnProperty("$"+e[s].value),e[s].selected!==h&&(e[s].selected=h),h&&o&&(e[s].defaultSelected=!0)}else{for(s=""+Ve(s),n=null,h=0;h<e.length;h++){if(e[h].value===s){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function uu(e,n,s){if(n!=null&&(n=""+Ve(n),n!==e.value&&(e.value=n),s==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=s!=null?""+Ve(s):""}function lr(e,n,s,o){if(n==null){if(o!=null){if(s!=null)throw Error(a(92));if(Ce(o)){if(1<o.length)throw Error(a(93));o=o[0]}s=o}s==null&&(s=""),n=s}s=Ve(n),e.defaultValue=s,o=e.textContent,o===s&&o!==""&&o!==null&&(e.value=o),Ft(e)}function nn(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var cu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function So(e,n,s){var o=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,s):typeof s!="number"||s===0||cu.has(n)?n==="float"?e.cssFloat=s:e[n]=(""+s).trim():e[n]=s+"px"}function Io(e,n,s){if(n!=null&&typeof n!="object")throw Error(a(62));if(e=e.style,s!=null){for(var o in s)!s.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&s[h]!==o&&So(e,h,o)}else for(var f in n)n.hasOwnProperty(f)&&So(e,f,n[f])}function ea(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ur=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function na(e){return ur.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Bn(){}var Ro=null;function An(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cr=null,ui=null;function hs(e){var n=vn(e);if(n&&(e=n.stateNode)){var s=e[Me]||null;t:switch(e=n.stateNode,n.type){case"input":if(ta(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+en(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var o=s[n];if(o!==e&&o.form===e.form){var h=o[Me]||null;if(!h)throw Error(a(90));ta(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<s.length;n++)o=s[n],o.form===e.form&&us(o)}break t;case"textarea":uu(e,s.value,s.defaultValue);break t;case"select":n=s.value,n!=null&&or(e,!!s.multiple,n,!1)}}}var ia=!1;function hr(e,n,s){if(ia)return e(n,s);ia=!0;try{var o=e(n);return o}finally{if(ia=!1,(cr!==null||ui!==null)&&(rc(),cr&&(n=cr,e=ui,ui=cr=null,hs(n),e)))for(n=0;n<e.length;n++)hs(e[n])}}function Hn(e,n){var s=e.stateNode;if(s===null)return null;var o=s[Me]||null;if(o===null)return null;s=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(a(231,n,typeof s));return s}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fs=!1;if(Sn)try{var Kt={};Object.defineProperty(Kt,"passive",{get:function(){fs=!0}}),window.addEventListener("test",Kt,Kt),window.removeEventListener("test",Kt,Kt)}catch{fs=!1}var ci=null,Co=null,ds=null;function bo(){if(ds)return ds;var e,n=Co,s=n.length,o,h="value"in ci?ci.value:ci.textContent,f=h.length;for(e=0;e<s&&n[e]===h[e];e++);var p=s-e;for(o=1;o<=p&&n[s-o]===h[f-o];o++);return ds=h.slice(e,1<o?1-o:void 0)}function ms(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Oi(){return!0}function jn(){return!1}function ze(e){function n(s,o,h,f,p){this._reactName=s,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=p,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(s=e[T],this[T]=s?s(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Oi:jn,this.isPropagationStopped=jn,this}return S(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),n}var Di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hi=ze(Di),fr=S({},Di,{view:0,detail:0}),wo=ze(fr),dr,ra,fi,sa=S({},fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fi&&(fi&&e.type==="mousemove"?(dr=e.screenX-fi.screenX,ra=e.screenY-fi.screenY):ra=dr=0,fi=e),dr)},movementY:function(e){return"movementY"in e?e.movementY:ra}}),No=ze(sa),gs=S({},sa,{dataTransfer:0}),fu=ze(gs),du=S({},fr,{relatedTarget:0}),ps=ze(du),Oo=S({},Di,{animationName:0,elapsedTime:0,pseudoElement:0}),mu=ze(Oo),aa=S({},Di,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gu=ze(aa),pu=S({},Di,{data:0}),di=ze(pu),_u={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tu(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Eu[e])?!!n[e]:!1}function mr(){return Tu}var $e=S({},fr,{key:function(e){if(e.key){var n=_u[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ms(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mr,charCode:function(e){return e.type==="keypress"?ms(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ms(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),vu=ze($e),Au=S({},sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mi=ze(Au),u=S({},fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mr}),m=ze(u),E=S({},Di,{propertyName:0,elapsedTime:0,pseudoElement:0}),v=ze(E),P=S({},sa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),B=ze(P),W=S({},Di,{newState:0,oldState:0}),vt=ze(W),he=[9,13,27,32],Bt=Sn&&"CompositionEvent"in window,re=null;Sn&&"documentMode"in document&&(re=document.documentMode);var In=Sn&&"TextEvent"in window&&!re,mi=Sn&&(!Bt||re&&8<re&&11>=re),Gn=" ",Fn=!1;function _s(e,n){switch(e){case"keyup":return he.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oa(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var la=!1;function MS(e,n){switch(e){case"compositionend":return oa(n);case"keypress":return n.which!==32?null:(Fn=!0,Gn);case"textInput":return e=n.data,e===Gn&&Fn?null:e;default:return null}}function VS(e,n){if(la)return e==="compositionend"||!Bt&&_s(e,n)?(e=bo(),ds=Co=ci=null,la=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return mi&&n.locale!=="ko"?null:n.data;default:return null}}var LS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function og(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!LS[e.type]:n==="textarea"}function lg(e,n,s,o){cr?ui?ui.push(o):ui=[o]:cr=o,n=hc(n,"onChange"),0<n.length&&(s=new hi("onChange","change",null,s,o),e.push({event:s,listeners:n}))}var Do=null,Mo=null;function US(e){F_(e,0)}function Su(e){var n=cn(e);if(us(n))return e}function ug(e,n){if(e==="change")return n}var cg=!1;if(Sn){var Nh;if(Sn){var Oh="oninput"in document;if(!Oh){var hg=document.createElement("div");hg.setAttribute("oninput","return;"),Oh=typeof hg.oninput=="function"}Nh=Oh}else Nh=!1;cg=Nh&&(!document.documentMode||9<document.documentMode)}function fg(){Do&&(Do.detachEvent("onpropertychange",dg),Mo=Do=null)}function dg(e){if(e.propertyName==="value"&&Su(Mo)){var n=[];lg(n,Mo,e,An(e)),hr(US,n)}}function PS(e,n,s){e==="focusin"?(fg(),Do=n,Mo=s,Do.attachEvent("onpropertychange",dg)):e==="focusout"&&fg()}function xS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Su(Mo)}function kS(e,n){if(e==="click")return Su(n)}function zS(e,n){if(e==="input"||e==="change")return Su(n)}function BS(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var fn=typeof Object.is=="function"?Object.is:BS;function Vo(e,n){if(fn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),o=Object.keys(n);if(s.length!==o.length)return!1;for(o=0;o<s.length;o++){var h=s[o];if(!ge.call(n,h)||!fn(e[h],n[h]))return!1}return!0}function mg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gg(e,n){var s=mg(e);e=0;for(var o;s;){if(s.nodeType===3){if(o=e+s.textContent.length,e<=n&&o>=n)return{node:s,offset:n-e};e=o}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=mg(s)}}function pg(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?pg(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function _g(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=li(e.document);n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=li(e.document)}return n}function Dh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var HS=Sn&&"documentMode"in document&&11>=document.documentMode,ua=null,Mh=null,Lo=null,Vh=!1;function yg(e,n,s){var o=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Vh||ua==null||ua!==li(o)||(o=ua,"selectionStart"in o&&Dh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Lo&&Vo(Lo,o)||(Lo=o,o=hc(Mh,"onSelect"),0<o.length&&(n=new hi("onSelect","select",null,n,s),e.push({event:n,listeners:o}),n.target=ua)))}function ys(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var ca={animationend:ys("Animation","AnimationEnd"),animationiteration:ys("Animation","AnimationIteration"),animationstart:ys("Animation","AnimationStart"),transitionrun:ys("Transition","TransitionRun"),transitionstart:ys("Transition","TransitionStart"),transitioncancel:ys("Transition","TransitionCancel"),transitionend:ys("Transition","TransitionEnd")},Lh={},Eg={};Sn&&(Eg=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function Es(e){if(Lh[e])return Lh[e];if(!ca[e])return e;var n=ca[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in Eg)return Lh[e]=n[s];return e}var Tg=Es("animationend"),vg=Es("animationiteration"),Ag=Es("animationstart"),jS=Es("transitionrun"),GS=Es("transitionstart"),FS=Es("transitioncancel"),Sg=Es("transitionend"),Ig=new Map,Uh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uh.push("scrollEnd");function qn(e,n){Ig.set(e,n),ai(n,[e])}var Iu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Rn=[],ha=0,Ph=0;function Ru(){for(var e=ha,n=Ph=ha=0;n<e;){var s=Rn[n];Rn[n++]=null;var o=Rn[n];Rn[n++]=null;var h=Rn[n];Rn[n++]=null;var f=Rn[n];if(Rn[n++]=null,o!==null&&h!==null){var p=o.pending;p===null?h.next=h:(h.next=p.next,p.next=h),o.pending=h}f!==0&&Rg(s,h,f)}}function Cu(e,n,s,o){Rn[ha++]=e,Rn[ha++]=n,Rn[ha++]=s,Rn[ha++]=o,Ph|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function xh(e,n,s,o){return Cu(e,n,s,o),bu(e)}function Ts(e,n){return Cu(e,null,null,n),bu(e)}function Rg(e,n,s){e.lanes|=s;var o=e.alternate;o!==null&&(o.lanes|=s);for(var h=!1,f=e.return;f!==null;)f.childLanes|=s,o=f.alternate,o!==null&&(o.childLanes|=s),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(h=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,h&&n!==null&&(h=31-ce(s),e=f.hiddenUpdates,o=e[h],o===null?e[h]=[n]:o.push(n),n.lane=s|536870912),f):null}function bu(e){if(50<nl)throw nl=0,Kf=null,Error(a(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var fa={};function qS(e,n,s,o){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(e,n,s,o){return new qS(e,n,s,o)}function kh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vi(e,n){var s=e.alternate;return s===null?(s=dn(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Cg(e,n){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,n=s.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function wu(e,n,s,o,h,f){var p=0;if(o=e,typeof e=="function")kh(e)&&(p=1);else if(typeof e=="string")p=J0(e,s,rt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case w:return e=dn(31,s,n,h),e.elementType=w,e.lanes=f,e;case $:return vs(s.children,h,f,n);case J:p=8,h|=24;break;case ut:return e=dn(12,s,n,h|2),e.elementType=ut,e.lanes=f,e;case Wt:return e=dn(13,s,n,h),e.elementType=Wt,e.lanes=f,e;case Ct:return e=dn(19,s,n,h),e.elementType=Ct,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lt:p=10;break t;case ht:p=9;break t;case Rt:p=11;break t;case b:p=14;break t;case I:p=16,o=null;break t}p=29,s=Error(a(130,e===null?"null":typeof e,"")),o=null}return n=dn(p,s,n,h),n.elementType=e,n.type=o,n.lanes=f,n}function vs(e,n,s,o){return e=dn(7,e,o,n),e.lanes=s,e}function zh(e,n,s){return e=dn(6,e,null,n),e.lanes=s,e}function bg(e){var n=dn(18,null,null,0);return n.stateNode=e,n}function Bh(e,n,s){return n=dn(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var wg=new WeakMap;function Cn(e,n){if(typeof e=="object"&&e!==null){var s=wg.get(e);return s!==void 0?s:(n={value:e,source:n,stack:co(n)},wg.set(e,n),n)}return{value:e,source:n,stack:co(n)}}var da=[],ma=0,Nu=null,Uo=0,bn=[],wn=0,gr=null,gi=1,pi="";function Li(e,n){da[ma++]=Uo,da[ma++]=Nu,Nu=e,Uo=n}function Ng(e,n,s){bn[wn++]=gi,bn[wn++]=pi,bn[wn++]=gr,gr=e;var o=gi;e=pi;var h=32-ce(o)-1;o&=~(1<<h),s+=1;var f=32-ce(n)+h;if(30<f){var p=h-h%5;f=(o&(1<<p)-1).toString(32),o>>=p,h-=p,gi=1<<32-ce(n)+h|s<<h|o,pi=f+e}else gi=1<<f|s<<h|o,pi=e}function Hh(e){e.return!==null&&(Li(e,1),Ng(e,1,0))}function jh(e){for(;e===Nu;)Nu=da[--ma],da[ma]=null,Uo=da[--ma],da[ma]=null;for(;e===gr;)gr=bn[--wn],bn[wn]=null,pi=bn[--wn],bn[wn]=null,gi=bn[--wn],bn[wn]=null}function Og(e,n){bn[wn++]=gi,bn[wn++]=pi,bn[wn++]=gr,gi=n.id,pi=n.overflow,gr=e}var Be=null,$t=null,Lt=!1,pr=null,Nn=!1,Gh=Error(a(519));function _r(e){var n=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Po(Cn(n,e)),Gh}function Dg(e){var n=e.stateNode,s=e.type,o=e.memoizedProps;switch(n[_e]=e,n[Me]=o,s){case"dialog":wt("cancel",n),wt("close",n);break;case"iframe":case"object":case"embed":wt("load",n);break;case"video":case"audio":for(s=0;s<rl.length;s++)wt(rl[s],n);break;case"source":wt("error",n);break;case"img":case"image":case"link":wt("error",n),wt("load",n);break;case"details":wt("toggle",n);break;case"input":wt("invalid",n),lu(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":wt("invalid",n);break;case"textarea":wt("invalid",n),lr(n,o.value,o.defaultValue,o.children)}s=o.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||o.suppressHydrationWarning===!0||Q_(n.textContent,s)?(o.popover!=null&&(wt("beforetoggle",n),wt("toggle",n)),o.onScroll!=null&&wt("scroll",n),o.onScrollEnd!=null&&wt("scrollend",n),o.onClick!=null&&(n.onclick=Bn),n=!0):n=!1,n||_r(e,!0)}function Mg(e){for(Be=e.return;Be;)switch(Be.tag){case 5:case 31:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:Be=Be.return}}function ga(e){if(e!==Be)return!1;if(!Lt)return Mg(e),Lt=!0,!1;var n=e.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||ld(e.type,e.memoizedProps)),s=!s),s&&$t&&_r(e),Mg(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));$t=iy(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));$t=iy(e)}else n===27?(n=$t,Dr(e.type)?(e=dd,dd=null,$t=e):$t=n):$t=Be?Dn(e.stateNode.nextSibling):null;return!0}function As(){$t=Be=null,Lt=!1}function Fh(){var e=pr;return e!==null&&(on===null?on=e:on.push.apply(on,e),pr=null),e}function Po(e){pr===null?pr=[e]:pr.push(e)}var qh=D(null),Ss=null,Ui=null;function yr(e,n,s){nt(qh,n._currentValue),n._currentValue=s}function Pi(e){e._currentValue=qh.current,K(qh)}function Yh(e,n,s){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===s)break;e=e.return}}function Kh(e,n,s,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var f=h.dependencies;if(f!==null){var p=h.child;f=f.firstContext;t:for(;f!==null;){var T=f;f=h;for(var C=0;C<n.length;C++)if(T.context===n[C]){f.lanes|=s,T=f.alternate,T!==null&&(T.lanes|=s),Yh(f.return,s,e),o||(p=null);break t}f=T.next}}else if(h.tag===18){if(p=h.return,p===null)throw Error(a(341));p.lanes|=s,f=p.alternate,f!==null&&(f.lanes|=s),Yh(p,s,e),p=null}else p=h.child;if(p!==null)p.return=h;else for(p=h;p!==null;){if(p===e){p=null;break}if(h=p.sibling,h!==null){h.return=p.return,p=h;break}p=p.return}h=p}}function pa(e,n,s,o){e=null;for(var h=n,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var p=h.alternate;if(p===null)throw Error(a(387));if(p=p.memoizedProps,p!==null){var T=h.type;fn(h.pendingProps.value,p.value)||(e!==null?e.push(T):e=[T])}}else if(h===Ut.current){if(p=h.alternate,p===null)throw Error(a(387));p.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(ul):e=[ul])}h=h.return}e!==null&&Kh(n,e,s,o),n.flags|=262144}function Ou(e){for(e=e.firstContext;e!==null;){if(!fn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Is(e){Ss=e,Ui=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function He(e){return Vg(Ss,e)}function Du(e,n){return Ss===null&&Is(e),Vg(e,n)}function Vg(e,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},Ui===null){if(e===null)throw Error(a(308));Ui=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Ui=Ui.next=n;return s}var YS=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(s,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(s){return s()})}},KS=r.unstable_scheduleCallback,QS=r.unstable_NormalPriority,Te={$$typeof:lt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qh(){return{controller:new YS,data:new Map,refCount:0}}function xo(e){e.refCount--,e.refCount===0&&KS(QS,function(){e.controller.abort()})}var ko=null,Xh=0,_a=0,ya=null;function XS(e,n){if(ko===null){var s=ko=[];Xh=0,_a=$f(),ya={status:"pending",value:void 0,then:function(o){s.push(o)}}}return Xh++,n.then(Lg,Lg),n}function Lg(){if(--Xh===0&&ko!==null){ya!==null&&(ya.status="fulfilled");var e=ko;ko=null,_a=0,ya=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function JS(e,n){var s=[],o={status:"pending",value:null,reason:null,then:function(h){s.push(h)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<s.length;h++)(0,s[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<s.length;h++)(0,s[h])(void 0)}),o}var Ug=G.S;G.S=function(e,n){y_=We(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&XS(e,n),Ug!==null&&Ug(e,n)};var Rs=D(null);function Jh(){var e=Rs.current;return e!==null?e:Zt.pooledCache}function Mu(e,n){n===null?nt(Rs,Rs.current):nt(Rs,n.pool)}function Pg(){var e=Jh();return e===null?null:{parent:Te._currentValue,pool:e}}var Ea=Error(a(460)),Zh=Error(a(474)),Vu=Error(a(542)),Lu={then:function(){}};function xg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function kg(e,n,s){switch(s=e[s],s===void 0?e.push(n):s!==n&&(n.then(Bn,Bn),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Bg(e),e;default:if(typeof n.status=="string")n.then(Bn,Bn);else{if(e=Zt,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Bg(e),e}throw bs=n,Ea}}function Cs(e){try{var n=e._init;return n(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(bs=s,Ea):s}}var bs=null;function zg(){if(bs===null)throw Error(a(459));var e=bs;return bs=null,e}function Bg(e){if(e===Ea||e===Vu)throw Error(a(483))}var Ta=null,zo=0;function Uu(e){var n=zo;return zo+=1,Ta===null&&(Ta=[]),kg(Ta,e,n)}function Bo(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Pu(e,n){throw n.$$typeof===V?Error(a(525)):(e=Object.prototype.toString.call(n),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Hg(e){function n(L,O){if(e){var x=L.deletions;x===null?(L.deletions=[O],L.flags|=16):x.push(O)}}function s(L,O){if(!e)return null;for(;O!==null;)n(L,O),O=O.sibling;return null}function o(L){for(var O=new Map;L!==null;)L.key!==null?O.set(L.key,L):O.set(L.index,L),L=L.sibling;return O}function h(L,O){return L=Vi(L,O),L.index=0,L.sibling=null,L}function f(L,O,x){return L.index=x,e?(x=L.alternate,x!==null?(x=x.index,x<O?(L.flags|=67108866,O):x):(L.flags|=67108866,O)):(L.flags|=1048576,O)}function p(L){return e&&L.alternate===null&&(L.flags|=67108866),L}function T(L,O,x,q){return O===null||O.tag!==6?(O=zh(x,L.mode,q),O.return=L,O):(O=h(O,x),O.return=L,O)}function C(L,O,x,q){var ct=x.type;return ct===$?j(L,O,x.props.children,q,x.key):O!==null&&(O.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===I&&Cs(ct)===O.type)?(O=h(O,x.props),Bo(O,x),O.return=L,O):(O=wu(x.type,x.key,x.props,null,L.mode,q),Bo(O,x),O.return=L,O)}function k(L,O,x,q){return O===null||O.tag!==4||O.stateNode.containerInfo!==x.containerInfo||O.stateNode.implementation!==x.implementation?(O=Bh(x,L.mode,q),O.return=L,O):(O=h(O,x.children||[]),O.return=L,O)}function j(L,O,x,q,ct){return O===null||O.tag!==7?(O=vs(x,L.mode,q,ct),O.return=L,O):(O=h(O,x),O.return=L,O)}function Y(L,O,x){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=zh(""+O,L.mode,x),O.return=L,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case F:return x=wu(O.type,O.key,O.props,null,L.mode,x),Bo(x,O),x.return=L,x;case Z:return O=Bh(O,L.mode,x),O.return=L,O;case I:return O=Cs(O),Y(L,O,x)}if(Ce(O)||U(O))return O=vs(O,L.mode,x,null),O.return=L,O;if(typeof O.then=="function")return Y(L,Uu(O),x);if(O.$$typeof===lt)return Y(L,Du(L,O),x);Pu(L,O)}return null}function z(L,O,x,q){var ct=O!==null?O.key:null;if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return ct!==null?null:T(L,O,""+x,q);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case F:return x.key===ct?C(L,O,x,q):null;case Z:return x.key===ct?k(L,O,x,q):null;case I:return x=Cs(x),z(L,O,x,q)}if(Ce(x)||U(x))return ct!==null?null:j(L,O,x,q,null);if(typeof x.then=="function")return z(L,O,Uu(x),q);if(x.$$typeof===lt)return z(L,O,Du(L,x),q);Pu(L,x)}return null}function H(L,O,x,q,ct){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return L=L.get(x)||null,T(O,L,""+q,ct);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case F:return L=L.get(q.key===null?x:q.key)||null,C(O,L,q,ct);case Z:return L=L.get(q.key===null?x:q.key)||null,k(O,L,q,ct);case I:return q=Cs(q),H(L,O,x,q,ct)}if(Ce(q)||U(q))return L=L.get(x)||null,j(O,L,q,ct,null);if(typeof q.then=="function")return H(L,O,x,Uu(q),ct);if(q.$$typeof===lt)return H(L,O,x,Du(O,q),ct);Pu(O,q)}return null}function st(L,O,x,q){for(var ct=null,kt=null,at=O,It=O=0,Ot=null;at!==null&&It<x.length;It++){at.index>It?(Ot=at,at=null):Ot=at.sibling;var zt=z(L,at,x[It],q);if(zt===null){at===null&&(at=Ot);break}e&&at&&zt.alternate===null&&n(L,at),O=f(zt,O,It),kt===null?ct=zt:kt.sibling=zt,kt=zt,at=Ot}if(It===x.length)return s(L,at),Lt&&Li(L,It),ct;if(at===null){for(;It<x.length;It++)at=Y(L,x[It],q),at!==null&&(O=f(at,O,It),kt===null?ct=at:kt.sibling=at,kt=at);return Lt&&Li(L,It),ct}for(at=o(at);It<x.length;It++)Ot=H(at,L,It,x[It],q),Ot!==null&&(e&&Ot.alternate!==null&&at.delete(Ot.key===null?It:Ot.key),O=f(Ot,O,It),kt===null?ct=Ot:kt.sibling=Ot,kt=Ot);return e&&at.forEach(function(Pr){return n(L,Pr)}),Lt&&Li(L,It),ct}function mt(L,O,x,q){if(x==null)throw Error(a(151));for(var ct=null,kt=null,at=O,It=O=0,Ot=null,zt=x.next();at!==null&&!zt.done;It++,zt=x.next()){at.index>It?(Ot=at,at=null):Ot=at.sibling;var Pr=z(L,at,zt.value,q);if(Pr===null){at===null&&(at=Ot);break}e&&at&&Pr.alternate===null&&n(L,at),O=f(Pr,O,It),kt===null?ct=Pr:kt.sibling=Pr,kt=Pr,at=Ot}if(zt.done)return s(L,at),Lt&&Li(L,It),ct;if(at===null){for(;!zt.done;It++,zt=x.next())zt=Y(L,zt.value,q),zt!==null&&(O=f(zt,O,It),kt===null?ct=zt:kt.sibling=zt,kt=zt);return Lt&&Li(L,It),ct}for(at=o(at);!zt.done;It++,zt=x.next())zt=H(at,L,It,zt.value,q),zt!==null&&(e&&zt.alternate!==null&&at.delete(zt.key===null?It:zt.key),O=f(zt,O,It),kt===null?ct=zt:kt.sibling=zt,kt=zt);return e&&at.forEach(function(oI){return n(L,oI)}),Lt&&Li(L,It),ct}function Jt(L,O,x,q){if(typeof x=="object"&&x!==null&&x.type===$&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case F:t:{for(var ct=x.key;O!==null;){if(O.key===ct){if(ct=x.type,ct===$){if(O.tag===7){s(L,O.sibling),q=h(O,x.props.children),q.return=L,L=q;break t}}else if(O.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===I&&Cs(ct)===O.type){s(L,O.sibling),q=h(O,x.props),Bo(q,x),q.return=L,L=q;break t}s(L,O);break}else n(L,O);O=O.sibling}x.type===$?(q=vs(x.props.children,L.mode,q,x.key),q.return=L,L=q):(q=wu(x.type,x.key,x.props,null,L.mode,q),Bo(q,x),q.return=L,L=q)}return p(L);case Z:t:{for(ct=x.key;O!==null;){if(O.key===ct)if(O.tag===4&&O.stateNode.containerInfo===x.containerInfo&&O.stateNode.implementation===x.implementation){s(L,O.sibling),q=h(O,x.children||[]),q.return=L,L=q;break t}else{s(L,O);break}else n(L,O);O=O.sibling}q=Bh(x,L.mode,q),q.return=L,L=q}return p(L);case I:return x=Cs(x),Jt(L,O,x,q)}if(Ce(x))return st(L,O,x,q);if(U(x)){if(ct=U(x),typeof ct!="function")throw Error(a(150));return x=ct.call(x),mt(L,O,x,q)}if(typeof x.then=="function")return Jt(L,O,Uu(x),q);if(x.$$typeof===lt)return Jt(L,O,Du(L,x),q);Pu(L,x)}return typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint"?(x=""+x,O!==null&&O.tag===6?(s(L,O.sibling),q=h(O,x),q.return=L,L=q):(s(L,O),q=zh(x,L.mode,q),q.return=L,L=q),p(L)):s(L,O)}return function(L,O,x,q){try{zo=0;var ct=Jt(L,O,x,q);return Ta=null,ct}catch(at){if(at===Ea||at===Vu)throw at;var kt=dn(29,at,null,L.mode);return kt.lanes=q,kt.return=L,kt}finally{}}}var ws=Hg(!0),jg=Hg(!1),Er=!1;function Wh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $h(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Tr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function vr(e,n,s){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Ht&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=bu(e),Rg(e,null,s),n}return Cu(e,o,n,s),bu(e)}function Ho(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,s|=o,n.lanes=s,mo(e,s)}}function tf(e,n){var s=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,s===o)){var h=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var p={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};f===null?h=f=p:f=f.next=p,s=s.next}while(s!==null);f===null?h=f=n:f=f.next=n}else h=f=n;s={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}var ef=!1;function jo(){if(ef){var e=ya;if(e!==null)throw e}}function Go(e,n,s,o){ef=!1;var h=e.updateQueue;Er=!1;var f=h.firstBaseUpdate,p=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var C=T,k=C.next;C.next=null,p===null?f=k:p.next=k,p=C;var j=e.alternate;j!==null&&(j=j.updateQueue,T=j.lastBaseUpdate,T!==p&&(T===null?j.firstBaseUpdate=k:T.next=k,j.lastBaseUpdate=C))}if(f!==null){var Y=h.baseState;p=0,j=k=C=null,T=f;do{var z=T.lane&-536870913,H=z!==T.lane;if(H?(Nt&z)===z:(o&z)===z){z!==0&&z===_a&&(ef=!0),j!==null&&(j=j.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var st=e,mt=T;z=n;var Jt=s;switch(mt.tag){case 1:if(st=mt.payload,typeof st=="function"){Y=st.call(Jt,Y,z);break t}Y=st;break t;case 3:st.flags=st.flags&-65537|128;case 0:if(st=mt.payload,z=typeof st=="function"?st.call(Jt,Y,z):st,z==null)break t;Y=S({},Y,z);break t;case 2:Er=!0}}z=T.callback,z!==null&&(e.flags|=64,H&&(e.flags|=8192),H=h.callbacks,H===null?h.callbacks=[z]:H.push(z))}else H={lane:z,tag:T.tag,payload:T.payload,callback:T.callback,next:null},j===null?(k=j=H,C=Y):j=j.next=H,p|=z;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;H=T,T=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);j===null&&(C=Y),h.baseState=C,h.firstBaseUpdate=k,h.lastBaseUpdate=j,f===null&&(h.shared.lanes=0),Cr|=p,e.lanes=p,e.memoizedState=Y}}function Gg(e,n){if(typeof e!="function")throw Error(a(191,e));e.call(n)}function Fg(e,n){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Gg(s[e],n)}var va=D(null),xu=D(0);function qg(e,n){e=qi,nt(xu,e),nt(va,n),qi=e|n.baseLanes}function nf(){nt(xu,qi),nt(va,va.current)}function rf(){qi=xu.current,K(va),K(xu)}var mn=D(null),On=null;function Ar(e){var n=e.alternate;nt(fe,fe.current&1),nt(mn,e),On===null&&(n===null||va.current!==null||n.memoizedState!==null)&&(On=e)}function sf(e){nt(fe,fe.current),nt(mn,e),On===null&&(On=e)}function Yg(e){e.tag===22?(nt(fe,fe.current),nt(mn,e),On===null&&(On=e)):Sr()}function Sr(){nt(fe,fe.current),nt(mn,mn.current)}function gn(e){K(mn),On===e&&(On=null),K(fe)}var fe=D(0);function ku(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||hd(s)||fd(s)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var xi=0,At=null,Qt=null,ve=null,zu=!1,Aa=!1,Ns=!1,Bu=0,Fo=0,Sa=null,ZS=0;function le(){throw Error(a(321))}function af(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!fn(e[s],n[s]))return!1;return!0}function of(e,n,s,o,h,f){return xi=f,At=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,G.H=e===null||e.memoizedState===null?Np:Af,Ns=!1,f=s(o,h),Ns=!1,Aa&&(f=Qg(n,s,o,h)),Kg(e),f}function Kg(e){G.H=Ko;var n=Qt!==null&&Qt.next!==null;if(xi=0,ve=Qt=At=null,zu=!1,Fo=0,Sa=null,n)throw Error(a(300));e===null||Ae||(e=e.dependencies,e!==null&&Ou(e)&&(Ae=!0))}function Qg(e,n,s,o){At=e;var h=0;do{if(Aa&&(Sa=null),Fo=0,Aa=!1,25<=h)throw Error(a(301));if(h+=1,ve=Qt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}G.H=Op,f=n(s,o)}while(Aa);return f}function WS(){var e=G.H,n=e.useState()[0];return n=typeof n.then=="function"?qo(n):n,e=e.useState()[0],(Qt!==null?Qt.memoizedState:null)!==e&&(At.flags|=1024),n}function lf(){var e=Bu!==0;return Bu=0,e}function uf(e,n,s){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~s}function cf(e){if(zu){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}zu=!1}xi=0,ve=Qt=At=null,Aa=!1,Fo=Bu=0,Sa=null}function tn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ve===null?At.memoizedState=ve=e:ve=ve.next=e,ve}function de(){if(Qt===null){var e=At.alternate;e=e!==null?e.memoizedState:null}else e=Qt.next;var n=ve===null?At.memoizedState:ve.next;if(n!==null)ve=n,Qt=e;else{if(e===null)throw At.alternate===null?Error(a(467)):Error(a(310));Qt=e,e={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},ve===null?At.memoizedState=ve=e:ve=ve.next=e}return ve}function Hu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qo(e){var n=Fo;return Fo+=1,Sa===null&&(Sa=[]),e=kg(Sa,e,n),n=At,(ve===null?n.memoizedState:ve.next)===null&&(n=n.alternate,G.H=n===null||n.memoizedState===null?Np:Af),e}function ju(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return qo(e);if(e.$$typeof===lt)return He(e)}throw Error(a(438,String(e)))}function hf(e){var n=null,s=At.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var o=At.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=Hu(),At.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(e),o=0;o<e;o++)s[o]=M;return n.index++,s}function ki(e,n){return typeof n=="function"?n(e):n}function Gu(e){var n=de();return ff(n,Qt,e)}function ff(e,n,s){var o=e.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=s;var h=e.baseQueue,f=o.pending;if(f!==null){if(h!==null){var p=h.next;h.next=f.next,f.next=p}n.baseQueue=h=f,o.pending=null}if(f=e.baseState,h===null)e.memoizedState=f;else{n=h.next;var T=p=null,C=null,k=n,j=!1;do{var Y=k.lane&-536870913;if(Y!==k.lane?(Nt&Y)===Y:(xi&Y)===Y){var z=k.revertLane;if(z===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),Y===_a&&(j=!0);else if((xi&z)===z){k=k.next,z===_a&&(j=!0);continue}else Y={lane:0,revertLane:k.revertLane,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},C===null?(T=C=Y,p=f):C=C.next=Y,At.lanes|=z,Cr|=z;Y=k.action,Ns&&s(f,Y),f=k.hasEagerState?k.eagerState:s(f,Y)}else z={lane:Y,revertLane:k.revertLane,gesture:k.gesture,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},C===null?(T=C=z,p=f):C=C.next=z,At.lanes|=Y,Cr|=Y;k=k.next}while(k!==null&&k!==n);if(C===null?p=f:C.next=T,!fn(f,e.memoizedState)&&(Ae=!0,j&&(s=ya,s!==null)))throw s;e.memoizedState=f,e.baseState=p,e.baseQueue=C,o.lastRenderedState=f}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function df(e){var n=de(),s=n.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=e;var o=s.dispatch,h=s.pending,f=n.memoizedState;if(h!==null){s.pending=null;var p=h=h.next;do f=e(f,p.action),p=p.next;while(p!==h);fn(f,n.memoizedState)||(Ae=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),s.lastRenderedState=f}return[f,o]}function Xg(e,n,s){var o=At,h=de(),f=Lt;if(f){if(s===void 0)throw Error(a(407));s=s()}else s=n();var p=!fn((Qt||h).memoizedState,s);if(p&&(h.memoizedState=s,Ae=!0),h=h.queue,pf(Wg.bind(null,o,h,e),[e]),h.getSnapshot!==n||p||ve!==null&&ve.memoizedState.tag&1){if(o.flags|=2048,Ia(9,{destroy:void 0},Zg.bind(null,o,h,s,n),null),Zt===null)throw Error(a(349));f||(xi&127)!==0||Jg(o,n,s)}return s}function Jg(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=At.updateQueue,n===null?(n=Hu(),At.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function Zg(e,n,s,o){n.value=s,n.getSnapshot=o,$g(n)&&tp(e)}function Wg(e,n,s){return s(function(){$g(n)&&tp(e)})}function $g(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!fn(e,s)}catch{return!0}}function tp(e){var n=Ts(e,2);n!==null&&ln(n,e,2)}function mf(e){var n=tn();if(typeof e=="function"){var s=e;if(e=s(),Ns){Tn(!0);try{s()}finally{Tn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:e},n}function ep(e,n,s,o){return e.baseState=s,ff(e,Qt,typeof o=="function"?o:ki)}function $S(e,n,s,o,h){if(Yu(e))throw Error(a(485));if(e=n.action,e!==null){var f={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){f.listeners.push(p)}};G.T!==null?s(!0):f.isTransition=!1,o(f),s=n.pending,s===null?(f.next=n.pending=f,np(n,f)):(f.next=s.next,n.pending=s.next=f)}}function np(e,n){var s=n.action,o=n.payload,h=e.state;if(n.isTransition){var f=G.T,p={};G.T=p;try{var T=s(h,o),C=G.S;C!==null&&C(p,T),ip(e,n,T)}catch(k){gf(e,n,k)}finally{f!==null&&p.types!==null&&(f.types=p.types),G.T=f}}else try{f=s(h,o),ip(e,n,f)}catch(k){gf(e,n,k)}}function ip(e,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(o){rp(e,n,o)},function(o){return gf(e,n,o)}):rp(e,n,s)}function rp(e,n,s){n.status="fulfilled",n.value=s,sp(n),e.state=s,n=e.pending,n!==null&&(s=n.next,s===n?e.pending=null:(s=s.next,n.next=s,np(e,s)))}function gf(e,n,s){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=s,sp(n),n=n.next;while(n!==o)}e.action=null}function sp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function ap(e,n){return n}function op(e,n){if(Lt){var s=Zt.formState;if(s!==null){t:{var o=At;if(Lt){if($t){e:{for(var h=$t,f=Nn;h.nodeType!==8;){if(!f){h=null;break e}if(h=Dn(h.nextSibling),h===null){h=null;break e}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){$t=Dn(h.nextSibling),o=h.data==="F!";break t}}_r(o)}o=!1}o&&(n=s[0])}}return s=tn(),s.memoizedState=s.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ap,lastRenderedState:n},s.queue=o,s=Cp.bind(null,At,o),o.dispatch=s,o=mf(!1),f=vf.bind(null,At,!1,o.queue),o=tn(),h={state:n,dispatch:null,action:e,pending:null},o.queue=h,s=$S.bind(null,At,h,f,s),h.dispatch=s,o.memoizedState=e,[n,s,!1]}function lp(e){var n=de();return up(n,Qt,e)}function up(e,n,s){if(n=ff(e,n,ap)[0],e=Gu(ki)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=qo(n)}catch(p){throw p===Ea?Vu:p}else o=n;n=de();var h=n.queue,f=h.dispatch;return s!==n.memoizedState&&(At.flags|=2048,Ia(9,{destroy:void 0},t0.bind(null,h,s),null)),[o,f,e]}function t0(e,n){e.action=n}function cp(e){var n=de(),s=Qt;if(s!==null)return up(n,s,e);de(),n=n.memoizedState,s=de();var o=s.queue.dispatch;return s.memoizedState=e,[n,o,!1]}function Ia(e,n,s,o){return e={tag:e,create:s,deps:o,inst:n,next:null},n=At.updateQueue,n===null&&(n=Hu(),At.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=e.next=e:(o=s.next,s.next=e,e.next=o,n.lastEffect=e),e}function hp(){return de().memoizedState}function Fu(e,n,s,o){var h=tn();At.flags|=e,h.memoizedState=Ia(1|n,{destroy:void 0},s,o===void 0?null:o)}function qu(e,n,s,o){var h=de();o=o===void 0?null:o;var f=h.memoizedState.inst;Qt!==null&&o!==null&&af(o,Qt.memoizedState.deps)?h.memoizedState=Ia(n,f,s,o):(At.flags|=e,h.memoizedState=Ia(1|n,f,s,o))}function fp(e,n){Fu(8390656,8,e,n)}function pf(e,n){qu(2048,8,e,n)}function e0(e){At.flags|=4;var n=At.updateQueue;if(n===null)n=Hu(),At.updateQueue=n,n.events=[e];else{var s=n.events;s===null?n.events=[e]:s.push(e)}}function dp(e){var n=de().memoizedState;return e0({ref:n,nextImpl:e}),function(){if((Ht&2)!==0)throw Error(a(440));return n.impl.apply(void 0,arguments)}}function mp(e,n){return qu(4,2,e,n)}function gp(e,n){return qu(4,4,e,n)}function pp(e,n){if(typeof n=="function"){e=e();var s=n(e);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function _p(e,n,s){s=s!=null?s.concat([e]):null,qu(4,4,pp.bind(null,n,e),s)}function _f(){}function yp(e,n){var s=de();n=n===void 0?null:n;var o=s.memoizedState;return n!==null&&af(n,o[1])?o[0]:(s.memoizedState=[e,n],e)}function Ep(e,n){var s=de();n=n===void 0?null:n;var o=s.memoizedState;if(n!==null&&af(n,o[1]))return o[0];if(o=e(),Ns){Tn(!0);try{e()}finally{Tn(!1)}}return s.memoizedState=[o,n],o}function yf(e,n,s){return s===void 0||(xi&1073741824)!==0&&(Nt&261930)===0?e.memoizedState=n:(e.memoizedState=s,e=T_(),At.lanes|=e,Cr|=e,s)}function Tp(e,n,s,o){return fn(s,n)?s:va.current!==null?(e=yf(e,s,o),fn(e,n)||(Ae=!0),e):(xi&42)===0||(xi&1073741824)!==0&&(Nt&261930)===0?(Ae=!0,e.memoizedState=s):(e=T_(),At.lanes|=e,Cr|=e,n)}function vp(e,n,s,o,h){var f=et.p;et.p=f!==0&&8>f?f:8;var p=G.T,T={};G.T=T,vf(e,!1,n,s);try{var C=h(),k=G.S;if(k!==null&&k(T,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var j=JS(C,o);Yo(e,n,j,yn(e))}else Yo(e,n,o,yn(e))}catch(Y){Yo(e,n,{then:function(){},status:"rejected",reason:Y},yn())}finally{et.p=f,p!==null&&T.types!==null&&(p.types=T.types),G.T=p}}function n0(){}function Ef(e,n,s,o){if(e.tag!==5)throw Error(a(476));var h=Ap(e).queue;vp(e,h,n,ft,s===null?n0:function(){return Sp(e),s(o)})}function Ap(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:ft,baseState:ft,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:ft},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:s},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Sp(e){var n=Ap(e);n.next===null&&(n=e.alternate.memoizedState),Yo(e,n.next.queue,{},yn())}function Tf(){return He(ul)}function Ip(){return de().memoizedState}function Rp(){return de().memoizedState}function i0(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var s=yn();e=Tr(s);var o=vr(n,e,s);o!==null&&(ln(o,n,s),Ho(o,n,s)),n={cache:Qh()},e.payload=n;return}n=n.return}}function r0(e,n,s){var o=yn();s={lane:o,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Yu(e)?bp(n,s):(s=xh(e,n,s,o),s!==null&&(ln(s,e,o),wp(s,n,o)))}function Cp(e,n,s){var o=yn();Yo(e,n,s,o)}function Yo(e,n,s,o){var h={lane:o,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Yu(e))bp(n,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var p=n.lastRenderedState,T=f(p,s);if(h.hasEagerState=!0,h.eagerState=T,fn(T,p))return Cu(e,n,h,0),Zt===null&&Ru(),!1}catch{}finally{}if(s=xh(e,n,h,o),s!==null)return ln(s,e,o),wp(s,n,o),!0}return!1}function vf(e,n,s,o){if(o={lane:2,revertLane:$f(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Yu(e)){if(n)throw Error(a(479))}else n=xh(e,s,o,2),n!==null&&ln(n,e,2)}function Yu(e){var n=e.alternate;return e===At||n!==null&&n===At}function bp(e,n){Aa=zu=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function wp(e,n,s){if((s&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,s|=o,n.lanes=s,mo(e,s)}}var Ko={readContext:He,use:ju,useCallback:le,useContext:le,useEffect:le,useImperativeHandle:le,useLayoutEffect:le,useInsertionEffect:le,useMemo:le,useReducer:le,useRef:le,useState:le,useDebugValue:le,useDeferredValue:le,useTransition:le,useSyncExternalStore:le,useId:le,useHostTransitionStatus:le,useFormState:le,useActionState:le,useOptimistic:le,useMemoCache:le,useCacheRefresh:le};Ko.useEffectEvent=le;var Np={readContext:He,use:ju,useCallback:function(e,n){return tn().memoizedState=[e,n===void 0?null:n],e},useContext:He,useEffect:fp,useImperativeHandle:function(e,n,s){s=s!=null?s.concat([e]):null,Fu(4194308,4,pp.bind(null,n,e),s)},useLayoutEffect:function(e,n){return Fu(4194308,4,e,n)},useInsertionEffect:function(e,n){Fu(4,2,e,n)},useMemo:function(e,n){var s=tn();n=n===void 0?null:n;var o=e();if(Ns){Tn(!0);try{e()}finally{Tn(!1)}}return s.memoizedState=[o,n],o},useReducer:function(e,n,s){var o=tn();if(s!==void 0){var h=s(n);if(Ns){Tn(!0);try{s(n)}finally{Tn(!1)}}}else h=n;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=r0.bind(null,At,e),[o.memoizedState,e]},useRef:function(e){var n=tn();return e={current:e},n.memoizedState=e},useState:function(e){e=mf(e);var n=e.queue,s=Cp.bind(null,At,n);return n.dispatch=s,[e.memoizedState,s]},useDebugValue:_f,useDeferredValue:function(e,n){var s=tn();return yf(s,e,n)},useTransition:function(){var e=mf(!1);return e=vp.bind(null,At,e.queue,!0,!1),tn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,s){var o=At,h=tn();if(Lt){if(s===void 0)throw Error(a(407));s=s()}else{if(s=n(),Zt===null)throw Error(a(349));(Nt&127)!==0||Jg(o,n,s)}h.memoizedState=s;var f={value:s,getSnapshot:n};return h.queue=f,fp(Wg.bind(null,o,f,e),[e]),o.flags|=2048,Ia(9,{destroy:void 0},Zg.bind(null,o,f,s,n),null),s},useId:function(){var e=tn(),n=Zt.identifierPrefix;if(Lt){var s=pi,o=gi;s=(o&~(1<<32-ce(o)-1)).toString(32)+s,n="_"+n+"R_"+s,s=Bu++,0<s&&(n+="H"+s.toString(32)),n+="_"}else s=ZS++,n="_"+n+"r_"+s.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Tf,useFormState:op,useActionState:op,useOptimistic:function(e){var n=tn();n.memoizedState=n.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=vf.bind(null,At,!0,s),s.dispatch=n,[e,n]},useMemoCache:hf,useCacheRefresh:function(){return tn().memoizedState=i0.bind(null,At)},useEffectEvent:function(e){var n=tn(),s={impl:e};return n.memoizedState=s,function(){if((Ht&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}},Af={readContext:He,use:ju,useCallback:yp,useContext:He,useEffect:pf,useImperativeHandle:_p,useInsertionEffect:mp,useLayoutEffect:gp,useMemo:Ep,useReducer:Gu,useRef:hp,useState:function(){return Gu(ki)},useDebugValue:_f,useDeferredValue:function(e,n){var s=de();return Tp(s,Qt.memoizedState,e,n)},useTransition:function(){var e=Gu(ki)[0],n=de().memoizedState;return[typeof e=="boolean"?e:qo(e),n]},useSyncExternalStore:Xg,useId:Ip,useHostTransitionStatus:Tf,useFormState:lp,useActionState:lp,useOptimistic:function(e,n){var s=de();return ep(s,Qt,e,n)},useMemoCache:hf,useCacheRefresh:Rp};Af.useEffectEvent=dp;var Op={readContext:He,use:ju,useCallback:yp,useContext:He,useEffect:pf,useImperativeHandle:_p,useInsertionEffect:mp,useLayoutEffect:gp,useMemo:Ep,useReducer:df,useRef:hp,useState:function(){return df(ki)},useDebugValue:_f,useDeferredValue:function(e,n){var s=de();return Qt===null?yf(s,e,n):Tp(s,Qt.memoizedState,e,n)},useTransition:function(){var e=df(ki)[0],n=de().memoizedState;return[typeof e=="boolean"?e:qo(e),n]},useSyncExternalStore:Xg,useId:Ip,useHostTransitionStatus:Tf,useFormState:cp,useActionState:cp,useOptimistic:function(e,n){var s=de();return Qt!==null?ep(s,Qt,e,n):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:hf,useCacheRefresh:Rp};Op.useEffectEvent=dp;function Sf(e,n,s,o){n=e.memoizedState,s=s(o,n),s=s==null?n:S({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var If={enqueueSetState:function(e,n,s){e=e._reactInternals;var o=yn(),h=Tr(o);h.payload=n,s!=null&&(h.callback=s),n=vr(e,h,o),n!==null&&(ln(n,e,o),Ho(n,e,o))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var o=yn(),h=Tr(o);h.tag=1,h.payload=n,s!=null&&(h.callback=s),n=vr(e,h,o),n!==null&&(ln(n,e,o),Ho(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=yn(),o=Tr(s);o.tag=2,n!=null&&(o.callback=n),n=vr(e,o,s),n!==null&&(ln(n,e,s),Ho(n,e,s))}};function Dp(e,n,s,o,h,f,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,p):n.prototype&&n.prototype.isPureReactComponent?!Vo(s,o)||!Vo(h,f):!0}function Mp(e,n,s,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,o),n.state!==e&&If.enqueueReplaceState(n,n.state,null)}function Os(e,n){var s=n;if("ref"in n){s={};for(var o in n)o!=="ref"&&(s[o]=n[o])}if(e=e.defaultProps){s===n&&(s=S({},s));for(var h in e)s[h]===void 0&&(s[h]=e[h])}return s}function Vp(e){Iu(e)}function Lp(e){console.error(e)}function Up(e){Iu(e)}function Ku(e,n){try{var s=e.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Pp(e,n,s){try{var o=e.onCaughtError;o(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Rf(e,n,s){return s=Tr(s),s.tag=3,s.payload={element:null},s.callback=function(){Ku(e,n)},s}function xp(e){return e=Tr(e),e.tag=3,e}function kp(e,n,s,o){var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;e.payload=function(){return h(f)},e.callback=function(){Pp(n,s,o)}}var p=s.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){Pp(n,s,o),typeof h!="function"&&(br===null?br=new Set([this]):br.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function s0(e,n,s,o,h){if(s.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=s.alternate,n!==null&&pa(n,s,h,!0),s=mn.current,s!==null){switch(s.tag){case 31:case 13:return On===null?sc():s.alternate===null&&ue===0&&(ue=3),s.flags&=-257,s.flags|=65536,s.lanes=h,o===Lu?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([o]):n.add(o),Jf(e,o,h)),!1;case 22:return s.flags|=65536,o===Lu?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([o]):s.add(o)),Jf(e,o,h)),!1}throw Error(a(435,s.tag))}return Jf(e,o,h),sc(),!1}if(Lt)return n=mn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==Gh&&(e=Error(a(422),{cause:o}),Po(Cn(e,s)))):(o!==Gh&&(n=Error(a(423),{cause:o}),Po(Cn(n,s))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=Cn(o,s),h=Rf(e.stateNode,o,h),tf(e,h),ue!==4&&(ue=2)),!1;var f=Error(a(520),{cause:o});if(f=Cn(f,s),el===null?el=[f]:el.push(f),ue!==4&&(ue=2),n===null)return!0;o=Cn(o,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,e=h&-h,s.lanes|=e,e=Rf(s.stateNode,o,e),tf(s,e),!1;case 1:if(n=s.type,f=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(br===null||!br.has(f))))return s.flags|=65536,h&=-h,s.lanes|=h,h=xp(h),kp(h,e,s,o),tf(s,h),!1}s=s.return}while(s!==null);return!1}var Cf=Error(a(461)),Ae=!1;function je(e,n,s,o){n.child=e===null?jg(n,null,s,o):ws(n,e.child,s,o)}function zp(e,n,s,o,h){s=s.render;var f=n.ref;if("ref"in o){var p={};for(var T in o)T!=="ref"&&(p[T]=o[T])}else p=o;return Is(n),o=of(e,n,s,p,f,h),T=lf(),e!==null&&!Ae?(uf(e,n,h),zi(e,n,h)):(Lt&&T&&Hh(n),n.flags|=1,je(e,n,o,h),n.child)}function Bp(e,n,s,o,h){if(e===null){var f=s.type;return typeof f=="function"&&!kh(f)&&f.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=f,Hp(e,n,f,o,h)):(e=wu(s.type,null,o,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!Lf(e,h)){var p=f.memoizedProps;if(s=s.compare,s=s!==null?s:Vo,s(p,o)&&e.ref===n.ref)return zi(e,n,h)}return n.flags|=1,e=Vi(f,o),e.ref=n.ref,e.return=n,n.child=e}function Hp(e,n,s,o,h){if(e!==null){var f=e.memoizedProps;if(Vo(f,o)&&e.ref===n.ref)if(Ae=!1,n.pendingProps=o=f,Lf(e,h))(e.flags&131072)!==0&&(Ae=!0);else return n.lanes=e.lanes,zi(e,n,h)}return bf(e,n,s,o,h)}function jp(e,n,s,o){var h=o.children,f=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(f=f!==null?f.baseLanes|s:s,e!==null){for(o=n.child=e.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~f}else o=0,n.child=null;return Gp(e,n,f,s,o)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Mu(n,f!==null?f.cachePool:null),f!==null?qg(n,f):nf(),Yg(n);else return o=n.lanes=536870912,Gp(e,n,f!==null?f.baseLanes|s:s,s,o)}else f!==null?(Mu(n,f.cachePool),qg(n,f),Sr(),n.memoizedState=null):(e!==null&&Mu(n,null),nf(),Sr());return je(e,n,h,s),n.child}function Qo(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Gp(e,n,s,o,h){var f=Jh();return f=f===null?null:{parent:Te._currentValue,pool:f},n.memoizedState={baseLanes:s,cachePool:f},e!==null&&Mu(n,null),nf(),Yg(n),e!==null&&pa(e,n,o,!0),n.childLanes=h,null}function Qu(e,n){return n=Ju({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Fp(e,n,s){return ws(n,e.child,null,s),e=Qu(n,n.pendingProps),e.flags|=2,gn(n),n.memoizedState=null,e}function a0(e,n,s){var o=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Lt){if(o.mode==="hidden")return e=Qu(n,o),n.lanes=536870912,Qo(null,e);if(sf(n),(e=$t)?(e=ny(e,Nn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:gr!==null?{id:gi,overflow:pi}:null,retryLane:536870912,hydrationErrors:null},s=bg(e),s.return=n,n.child=s,Be=n,$t=null)):e=null,e===null)throw _r(n);return n.lanes=536870912,null}return Qu(n,o)}var f=e.memoizedState;if(f!==null){var p=f.dehydrated;if(sf(n),h)if(n.flags&256)n.flags&=-257,n=Fp(e,n,s);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(a(558));else if(Ae||pa(e,n,s,!1),h=(s&e.childLanes)!==0,Ae||h){if(o=Zt,o!==null&&(p=go(o,s),p!==0&&p!==f.retryLane))throw f.retryLane=p,Ts(e,p),ln(o,e,p),Cf;sc(),n=Fp(e,n,s)}else e=f.treeContext,$t=Dn(p.nextSibling),Be=n,Lt=!0,pr=null,Nn=!1,e!==null&&Og(n,e),n=Qu(n,o),n.flags|=4096;return n}return e=Vi(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Xu(e,n){var s=n.ref;if(s===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(e===null||e.ref!==s)&&(n.flags|=4194816)}}function bf(e,n,s,o,h){return Is(n),s=of(e,n,s,o,void 0,h),o=lf(),e!==null&&!Ae?(uf(e,n,h),zi(e,n,h)):(Lt&&o&&Hh(n),n.flags|=1,je(e,n,s,h),n.child)}function qp(e,n,s,o,h,f){return Is(n),n.updateQueue=null,s=Qg(n,o,s,h),Kg(e),o=lf(),e!==null&&!Ae?(uf(e,n,f),zi(e,n,f)):(Lt&&o&&Hh(n),n.flags|=1,je(e,n,s,f),n.child)}function Yp(e,n,s,o,h){if(Is(n),n.stateNode===null){var f=fa,p=s.contextType;typeof p=="object"&&p!==null&&(f=He(p)),f=new s(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=If,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},Wh(n),p=s.contextType,f.context=typeof p=="object"&&p!==null?He(p):fa,f.state=n.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(Sf(n,s,p,o),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(p=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),p!==f.state&&If.enqueueReplaceState(f,f.state,null),Go(n,o,f,h),jo(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){f=n.stateNode;var T=n.memoizedProps,C=Os(s,T);f.props=C;var k=f.context,j=s.contextType;p=fa,typeof j=="object"&&j!==null&&(p=He(j));var Y=s.getDerivedStateFromProps;j=typeof Y=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,j||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||k!==p)&&Mp(n,f,o,p),Er=!1;var z=n.memoizedState;f.state=z,Go(n,o,f,h),jo(),k=n.memoizedState,T||z!==k||Er?(typeof Y=="function"&&(Sf(n,s,Y,o),k=n.memoizedState),(C=Er||Dp(n,s,C,o,z,k,p))?(j||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=k),f.props=o,f.state=k,f.context=p,o=C):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,$h(e,n),p=n.memoizedProps,j=Os(s,p),f.props=j,Y=n.pendingProps,z=f.context,k=s.contextType,C=fa,typeof k=="object"&&k!==null&&(C=He(k)),T=s.getDerivedStateFromProps,(k=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(p!==Y||z!==C)&&Mp(n,f,o,C),Er=!1,z=n.memoizedState,f.state=z,Go(n,o,f,h),jo();var H=n.memoizedState;p!==Y||z!==H||Er||e!==null&&e.dependencies!==null&&Ou(e.dependencies)?(typeof T=="function"&&(Sf(n,s,T,o),H=n.memoizedState),(j=Er||Dp(n,s,j,o,z,H,C)||e!==null&&e.dependencies!==null&&Ou(e.dependencies))?(k||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,H,C),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,H,C)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||p===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=H),f.props=o,f.state=H,f.context=C,o=j):(typeof f.componentDidUpdate!="function"||p===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),o=!1)}return f=o,Xu(e,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,s=o&&typeof s.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&o?(n.child=ws(n,e.child,null,h),n.child=ws(n,null,s,h)):je(e,n,s,h),n.memoizedState=f.state,e=n.child):e=zi(e,n,h),e}function Kp(e,n,s,o){return As(),n.flags|=256,je(e,n,s,o),n.child}var wf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nf(e){return{baseLanes:e,cachePool:Pg()}}function Of(e,n,s){return e=e!==null?e.childLanes&~s:0,n&&(e|=_n),e}function Qp(e,n,s){var o=n.pendingProps,h=!1,f=(n.flags&128)!==0,p;if((p=f)||(p=e!==null&&e.memoizedState===null?!1:(fe.current&2)!==0),p&&(h=!0,n.flags&=-129),p=(n.flags&32)!==0,n.flags&=-33,e===null){if(Lt){if(h?Ar(n):Sr(),(e=$t)?(e=ny(e,Nn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:gr!==null?{id:gi,overflow:pi}:null,retryLane:536870912,hydrationErrors:null},s=bg(e),s.return=n,n.child=s,Be=n,$t=null)):e=null,e===null)throw _r(n);return fd(e)?n.lanes=32:n.lanes=536870912,null}var T=o.children;return o=o.fallback,h?(Sr(),h=n.mode,T=Ju({mode:"hidden",children:T},h),o=vs(o,h,s,null),T.return=n,o.return=n,T.sibling=o,n.child=T,o=n.child,o.memoizedState=Nf(s),o.childLanes=Of(e,p,s),n.memoizedState=wf,Qo(null,o)):(Ar(n),Df(n,T))}var C=e.memoizedState;if(C!==null&&(T=C.dehydrated,T!==null)){if(f)n.flags&256?(Ar(n),n.flags&=-257,n=Mf(e,n,s)):n.memoizedState!==null?(Sr(),n.child=e.child,n.flags|=128,n=null):(Sr(),T=o.fallback,h=n.mode,o=Ju({mode:"visible",children:o.children},h),T=vs(T,h,s,null),T.flags|=2,o.return=n,T.return=n,o.sibling=T,n.child=o,ws(n,e.child,null,s),o=n.child,o.memoizedState=Nf(s),o.childLanes=Of(e,p,s),n.memoizedState=wf,n=Qo(null,o));else if(Ar(n),fd(T)){if(p=T.nextSibling&&T.nextSibling.dataset,p)var k=p.dgst;p=k,o=Error(a(419)),o.stack="",o.digest=p,Po({value:o,source:null,stack:null}),n=Mf(e,n,s)}else if(Ae||pa(e,n,s,!1),p=(s&e.childLanes)!==0,Ae||p){if(p=Zt,p!==null&&(o=go(p,s),o!==0&&o!==C.retryLane))throw C.retryLane=o,Ts(e,o),ln(p,e,o),Cf;hd(T)||sc(),n=Mf(e,n,s)}else hd(T)?(n.flags|=192,n.child=e.child,n=null):(e=C.treeContext,$t=Dn(T.nextSibling),Be=n,Lt=!0,pr=null,Nn=!1,e!==null&&Og(n,e),n=Df(n,o.children),n.flags|=4096);return n}return h?(Sr(),T=o.fallback,h=n.mode,C=e.child,k=C.sibling,o=Vi(C,{mode:"hidden",children:o.children}),o.subtreeFlags=C.subtreeFlags&65011712,k!==null?T=Vi(k,T):(T=vs(T,h,s,null),T.flags|=2),T.return=n,o.return=n,o.sibling=T,n.child=o,Qo(null,o),o=n.child,T=e.child.memoizedState,T===null?T=Nf(s):(h=T.cachePool,h!==null?(C=Te._currentValue,h=h.parent!==C?{parent:C,pool:C}:h):h=Pg(),T={baseLanes:T.baseLanes|s,cachePool:h}),o.memoizedState=T,o.childLanes=Of(e,p,s),n.memoizedState=wf,Qo(e.child,o)):(Ar(n),s=e.child,e=s.sibling,s=Vi(s,{mode:"visible",children:o.children}),s.return=n,s.sibling=null,e!==null&&(p=n.deletions,p===null?(n.deletions=[e],n.flags|=16):p.push(e)),n.child=s,n.memoizedState=null,s)}function Df(e,n){return n=Ju({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Ju(e,n){return e=dn(22,e,null,n),e.lanes=0,e}function Mf(e,n,s){return ws(n,e.child,null,s),e=Df(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Xp(e,n,s){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),Yh(e.return,n,s)}function Vf(e,n,s,o,h,f){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:s,tailMode:h,treeForkCount:f}:(p.isBackwards=n,p.rendering=null,p.renderingStartTime=0,p.last=o,p.tail=s,p.tailMode=h,p.treeForkCount=f)}function Jp(e,n,s){var o=n.pendingProps,h=o.revealOrder,f=o.tail;o=o.children;var p=fe.current,T=(p&2)!==0;if(T?(p=p&1|2,n.flags|=128):p&=1,nt(fe,p),je(e,n,o,s),o=Lt?Uo:0,!T&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xp(e,s,n);else if(e.tag===19)Xp(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(s=n.child,h=null;s!==null;)e=s.alternate,e!==null&&ku(e)===null&&(h=s),s=s.sibling;s=h,s===null?(h=n.child,n.child=null):(h=s.sibling,s.sibling=null),Vf(n,!1,h,s,f,o);break;case"backwards":case"unstable_legacy-backwards":for(s=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&ku(e)===null){n.child=h;break}e=h.sibling,h.sibling=s,s=h,h=e}Vf(n,!0,s,null,f,o);break;case"together":Vf(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function zi(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),Cr|=n.lanes,(s&n.childLanes)===0)if(e!==null){if(pa(e,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(a(153));if(n.child!==null){for(e=n.child,s=Vi(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=Vi(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function Lf(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Ou(e)))}function o0(e,n,s){switch(n.tag){case 3:be(n,n.stateNode.containerInfo),yr(n,Te,e.memoizedState.cache),As();break;case 27:case 5:ns(n);break;case 4:be(n,n.stateNode.containerInfo);break;case 10:yr(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,sf(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Ar(n),n.flags|=128,null):(s&n.child.childLanes)!==0?Qp(e,n,s):(Ar(n),e=zi(e,n,s),e!==null?e.sibling:null);Ar(n);break;case 19:var h=(e.flags&128)!==0;if(o=(s&n.childLanes)!==0,o||(pa(e,n,s,!1),o=(s&n.childLanes)!==0),h){if(o)return Jp(e,n,s);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),nt(fe,fe.current),o)break;return null;case 22:return n.lanes=0,jp(e,n,s,n.pendingProps);case 24:yr(n,Te,e.memoizedState.cache)}return zi(e,n,s)}function Zp(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps)Ae=!0;else{if(!Lf(e,s)&&(n.flags&128)===0)return Ae=!1,o0(e,n,s);Ae=(e.flags&131072)!==0}else Ae=!1,Lt&&(n.flags&1048576)!==0&&Ng(n,Uo,n.index);switch(n.lanes=0,n.tag){case 16:t:{var o=n.pendingProps;if(e=Cs(n.elementType),n.type=e,typeof e=="function")kh(e)?(o=Os(e,o),n.tag=1,n=Yp(null,n,e,o,s)):(n.tag=0,n=bf(null,n,e,o,s));else{if(e!=null){var h=e.$$typeof;if(h===Rt){n.tag=11,n=zp(null,n,e,o,s);break t}else if(h===b){n.tag=14,n=Bp(null,n,e,o,s);break t}}throw n=ne(e)||e,Error(a(306,n,""))}}return n;case 0:return bf(e,n,n.type,n.pendingProps,s);case 1:return o=n.type,h=Os(o,n.pendingProps),Yp(e,n,o,h,s);case 3:t:{if(be(n,n.stateNode.containerInfo),e===null)throw Error(a(387));o=n.pendingProps;var f=n.memoizedState;h=f.element,$h(e,n),Go(n,o,null,s);var p=n.memoizedState;if(o=p.cache,yr(n,Te,o),o!==f.cache&&Kh(n,[Te],s,!0),jo(),o=p.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:p.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=Kp(e,n,o,s);break t}else if(o!==h){h=Cn(Error(a(424)),n),Po(h),n=Kp(e,n,o,s);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for($t=Dn(e.firstChild),Be=n,Lt=!0,pr=null,Nn=!0,s=jg(n,null,o,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(As(),o===h){n=zi(e,n,s);break t}je(e,n,o,s)}n=n.child}return n;case 26:return Xu(e,n),e===null?(s=ly(n.type,null,n.pendingProps,null))?n.memoizedState=s:Lt||(s=n.type,e=n.pendingProps,o=fc(St.current).createElement(s),o[_e]=n,o[Me]=e,Ge(o,s,e),ye(o),n.stateNode=o):n.memoizedState=ly(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return ns(n),e===null&&Lt&&(o=n.stateNode=sy(n.type,n.pendingProps,St.current),Be=n,Nn=!0,h=$t,Dr(n.type)?(dd=h,$t=Dn(o.firstChild)):$t=h),je(e,n,n.pendingProps.children,s),Xu(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Lt&&((h=o=$t)&&(o=x0(o,n.type,n.pendingProps,Nn),o!==null?(n.stateNode=o,Be=n,$t=Dn(o.firstChild),Nn=!1,h=!0):h=!1),h||_r(n)),ns(n),h=n.type,f=n.pendingProps,p=e!==null?e.memoizedProps:null,o=f.children,ld(h,f)?o=null:p!==null&&ld(h,p)&&(n.flags|=32),n.memoizedState!==null&&(h=of(e,n,WS,null,null,s),ul._currentValue=h),Xu(e,n),je(e,n,o,s),n.child;case 6:return e===null&&Lt&&((e=s=$t)&&(s=k0(s,n.pendingProps,Nn),s!==null?(n.stateNode=s,Be=n,$t=null,e=!0):e=!1),e||_r(n)),null;case 13:return Qp(e,n,s);case 4:return be(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=ws(n,null,o,s):je(e,n,o,s),n.child;case 11:return zp(e,n,n.type,n.pendingProps,s);case 7:return je(e,n,n.pendingProps,s),n.child;case 8:return je(e,n,n.pendingProps.children,s),n.child;case 12:return je(e,n,n.pendingProps.children,s),n.child;case 10:return o=n.pendingProps,yr(n,n.type,o.value),je(e,n,o.children,s),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,Is(n),h=He(h),o=o(h),n.flags|=1,je(e,n,o,s),n.child;case 14:return Bp(e,n,n.type,n.pendingProps,s);case 15:return Hp(e,n,n.type,n.pendingProps,s);case 19:return Jp(e,n,s);case 31:return a0(e,n,s);case 22:return jp(e,n,s,n.pendingProps);case 24:return Is(n),o=He(Te),e===null?(h=Jh(),h===null&&(h=Zt,f=Qh(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=s),h=f),n.memoizedState={parent:o,cache:h},Wh(n),yr(n,Te,h)):((e.lanes&s)!==0&&($h(e,n),Go(n,null,null,s),jo()),h=e.memoizedState,f=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),yr(n,Te,o)):(o=f.cache,yr(n,Te,o),o!==h.cache&&Kh(n,[Te],s,!0))),je(e,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function Bi(e){e.flags|=4}function Uf(e,n,s,o,h){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(I_())e.flags|=8192;else throw bs=Lu,Zh}else e.flags&=-16777217}function Wp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!dy(n))if(I_())e.flags|=8192;else throw bs=Lu,Zh}function Zu(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?iu():536870912,e.lanes|=n,wa|=n)}function Xo(e,n){if(!Lt)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function te(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,o=0;if(n)for(var h=e.child;h!==null;)s|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)s|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=s,n}function l0(e,n,s){var o=n.pendingProps;switch(jh(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return te(n),null;case 1:return te(n),null;case 3:return s=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Pi(Te),ie(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ga(n)?Bi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Fh())),te(n),null;case 26:var h=n.type,f=n.memoizedState;return e===null?(Bi(n),f!==null?(te(n),Wp(n,f)):(te(n),Uf(n,h,null,o,s))):f?f!==e.memoizedState?(Bi(n),te(n),Wp(n,f)):(te(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&Bi(n),te(n),Uf(n,h,e,o,s)),null;case 27:if(Ks(n),s=St.current,h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Bi(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return te(n),null}e=rt.current,ga(n)?Dg(n):(e=sy(h,o,s),n.stateNode=e,Bi(n))}return te(n),null;case 5:if(Ks(n),h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Bi(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return te(n),null}if(f=rt.current,ga(n))Dg(n);else{var p=fc(St.current);switch(f){case 1:f=p.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:f=p.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":f=p.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":f=p.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":f=p.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?p.createElement("select",{is:o.is}):p.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?p.createElement(h,{is:o.is}):p.createElement(h)}}f[_e]=n,f[Me]=o;t:for(p=n.child;p!==null;){if(p.tag===5||p.tag===6)f.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break t;for(;p.sibling===null;){if(p.return===null||p.return===n)break t;p=p.return}p.sibling.return=p.return,p=p.sibling}n.stateNode=f;t:switch(Ge(f,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&Bi(n)}}return te(n),Uf(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,s),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&Bi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(a(166));if(e=St.current,ga(n)){if(e=n.stateNode,s=n.memoizedProps,o=null,h=Be,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[_e]=n,e=!!(e.nodeValue===s||o!==null&&o.suppressHydrationWarning===!0||Q_(e.nodeValue,s)),e||_r(n,!0)}else e=fc(e).createTextNode(o),e[_e]=n,n.stateNode=e}return te(n),null;case 31:if(s=n.memoizedState,e===null||e.memoizedState!==null){if(o=ga(n),s!==null){if(e===null){if(!o)throw Error(a(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(557));e[_e]=n}else As(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;te(n),e=!1}else s=Fh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return n.flags&256?(gn(n),n):(gn(n),null);if((n.flags&128)!==0)throw Error(a(558))}return te(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=ga(n),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(a(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[_e]=n}else As(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;te(n),h=!1}else h=Fh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(gn(n),n):(gn(n),null)}return gn(n),(n.flags&128)!==0?(n.lanes=s,n):(s=o!==null,e=e!==null&&e.memoizedState!==null,s&&(o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)),s!==e&&s&&(n.child.flags|=8192),Zu(n,n.updateQueue),te(n),null);case 4:return ie(),e===null&&id(n.stateNode.containerInfo),te(n),null;case 10:return Pi(n.type),te(n),null;case 19:if(K(fe),o=n.memoizedState,o===null)return te(n),null;if(h=(n.flags&128)!==0,f=o.rendering,f===null)if(h)Xo(o,!1);else{if(ue!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=ku(e),f!==null){for(n.flags|=128,Xo(o,!1),e=f.updateQueue,n.updateQueue=e,Zu(n,e),n.subtreeFlags=0,e=s,s=n.child;s!==null;)Cg(s,e),s=s.sibling;return nt(fe,fe.current&1|2),Lt&&Li(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&We()>nc&&(n.flags|=128,h=!0,Xo(o,!1),n.lanes=4194304)}else{if(!h)if(e=ku(f),e!==null){if(n.flags|=128,h=!0,e=e.updateQueue,n.updateQueue=e,Zu(n,e),Xo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!Lt)return te(n),null}else 2*We()-o.renderingStartTime>nc&&s!==536870912&&(n.flags|=128,h=!0,Xo(o,!1),n.lanes=4194304);o.isBackwards?(f.sibling=n.child,n.child=f):(e=o.last,e!==null?e.sibling=f:n.child=f,o.last=f)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=We(),e.sibling=null,s=fe.current,nt(fe,h?s&1|2:s&1),Lt&&Li(n,o.treeForkCount),e):(te(n),null);case 22:case 23:return gn(n),rf(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(s&536870912)!==0&&(n.flags&128)===0&&(te(n),n.subtreeFlags&6&&(n.flags|=8192)):te(n),s=n.updateQueue,s!==null&&Zu(n,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==s&&(n.flags|=2048),e!==null&&K(Rs),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),Pi(Te),te(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function u0(e,n){switch(jh(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Pi(Te),ie(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Ks(n),null;case 31:if(n.memoizedState!==null){if(gn(n),n.alternate===null)throw Error(a(340));As()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(gn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(a(340));As()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return K(fe),null;case 4:return ie(),null;case 10:return Pi(n.type),null;case 22:case 23:return gn(n),rf(),e!==null&&K(Rs),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Pi(Te),null;case 25:return null;default:return null}}function $p(e,n){switch(jh(n),n.tag){case 3:Pi(Te),ie();break;case 26:case 27:case 5:Ks(n);break;case 4:ie();break;case 31:n.memoizedState!==null&&gn(n);break;case 13:gn(n);break;case 19:K(fe);break;case 10:Pi(n.type);break;case 22:case 23:gn(n),rf(),e!==null&&K(Rs);break;case 24:Pi(Te)}}function Jo(e,n){try{var s=n.updateQueue,o=s!==null?s.lastEffect:null;if(o!==null){var h=o.next;s=h;do{if((s.tag&e)===e){o=void 0;var f=s.create,p=s.inst;o=f(),p.destroy=o}s=s.next}while(s!==h)}}catch(T){Yt(n,n.return,T)}}function Ir(e,n,s){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&e)===e){var p=o.inst,T=p.destroy;if(T!==void 0){p.destroy=void 0,h=n;var C=s,k=T;try{k()}catch(j){Yt(h,C,j)}}}o=o.next}while(o!==f)}}catch(j){Yt(n,n.return,j)}}function t_(e){var n=e.updateQueue;if(n!==null){var s=e.stateNode;try{Fg(n,s)}catch(o){Yt(e,e.return,o)}}}function e_(e,n,s){s.props=Os(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(o){Yt(e,n,o)}}function Zo(e,n){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof s=="function"?e.refCleanup=s(o):s.current=o}}catch(h){Yt(e,n,h)}}function _i(e,n){var s=e.ref,o=e.refCleanup;if(s!==null)if(typeof o=="function")try{o()}catch(h){Yt(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(h){Yt(e,n,h)}else s.current=null}function n_(e){var n=e.type,s=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&o.focus();break t;case"img":s.src?o.src=s.src:s.srcSet&&(o.srcset=s.srcSet)}}catch(h){Yt(e,e.return,h)}}function Pf(e,n,s){try{var o=e.stateNode;D0(o,e.type,s,n),o[Me]=n}catch(h){Yt(e,e.return,h)}}function i_(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Dr(e.type)||e.tag===4}function xf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||i_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Dr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kf(e,n,s){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(e),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Bn));else if(o!==4&&(o===27&&Dr(e.type)&&(s=e.stateNode,n=null),e=e.child,e!==null))for(kf(e,n,s),e=e.sibling;e!==null;)kf(e,n,s),e=e.sibling}function Wu(e,n,s){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(o!==4&&(o===27&&Dr(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Wu(e,n,s),e=e.sibling;e!==null;)Wu(e,n,s),e=e.sibling}function r_(e){var n=e.stateNode,s=e.memoizedProps;try{for(var o=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);Ge(n,o,s),n[_e]=e,n[Me]=s}catch(f){Yt(e,e.return,f)}}var Hi=!1,Se=!1,zf=!1,s_=typeof WeakSet=="function"?WeakSet:Set,Le=null;function c0(e,n){if(e=e.containerInfo,ad=Ec,e=_g(e),Dh(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else t:{s=(s=e.ownerDocument)&&s.defaultView||window;var o=s.getSelection&&s.getSelection();if(o&&o.rangeCount!==0){s=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break t}var p=0,T=-1,C=-1,k=0,j=0,Y=e,z=null;e:for(;;){for(var H;Y!==s||h!==0&&Y.nodeType!==3||(T=p+h),Y!==f||o!==0&&Y.nodeType!==3||(C=p+o),Y.nodeType===3&&(p+=Y.nodeValue.length),(H=Y.firstChild)!==null;)z=Y,Y=H;for(;;){if(Y===e)break e;if(z===s&&++k===h&&(T=p),z===f&&++j===o&&(C=p),(H=Y.nextSibling)!==null)break;Y=z,z=Y.parentNode}Y=H}s=T===-1||C===-1?null:{start:T,end:C}}else s=null}s=s||{start:0,end:0}}else s=null;for(od={focusedElem:e,selectionRange:s},Ec=!1,Le=n;Le!==null;)if(n=Le,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Le=e;else for(;Le!==null;){switch(n=Le,f=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)h=e[s],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,s=n,h=f.memoizedProps,f=f.memoizedState,o=s.stateNode;try{var st=Os(s.type,h);e=o.getSnapshotBeforeUpdate(st,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(mt){Yt(s,s.return,mt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,s=e.nodeType,s===9)cd(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":cd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=n.sibling,e!==null){e.return=n.return,Le=e;break}Le=n.return}}function a_(e,n,s){var o=s.flags;switch(s.tag){case 0:case 11:case 15:Gi(e,s),o&4&&Jo(5,s);break;case 1:if(Gi(e,s),o&4)if(e=s.stateNode,n===null)try{e.componentDidMount()}catch(p){Yt(s,s.return,p)}else{var h=Os(s.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(p){Yt(s,s.return,p)}}o&64&&t_(s),o&512&&Zo(s,s.return);break;case 3:if(Gi(e,s),o&64&&(e=s.updateQueue,e!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{Fg(e,n)}catch(p){Yt(s,s.return,p)}}break;case 27:n===null&&o&4&&r_(s);case 26:case 5:Gi(e,s),n===null&&o&4&&n_(s),o&512&&Zo(s,s.return);break;case 12:Gi(e,s);break;case 31:Gi(e,s),o&4&&u_(e,s);break;case 13:Gi(e,s),o&4&&c_(e,s),o&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=E0.bind(null,s),z0(e,s))));break;case 22:if(o=s.memoizedState!==null||Hi,!o){n=n!==null&&n.memoizedState!==null||Se,h=Hi;var f=Se;Hi=o,(Se=n)&&!f?Fi(e,s,(s.subtreeFlags&8772)!==0):Gi(e,s),Hi=h,Se=f}break;case 30:break;default:Gi(e,s)}}function o_(e){var n=e.alternate;n!==null&&(e.alternate=null,o_(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Ws(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var se=null,rn=!1;function ji(e,n,s){for(s=s.child;s!==null;)l_(e,n,s),s=s.sibling}function l_(e,n,s){if(ke&&typeof ke.onCommitFiberUnmount=="function")try{ke.onCommitFiberUnmount(Pn,s)}catch{}switch(s.tag){case 26:Se||_i(s,n),ji(e,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Se||_i(s,n);var o=se,h=rn;Dr(s.type)&&(se=s.stateNode,rn=!1),ji(e,n,s),al(s.stateNode),se=o,rn=h;break;case 5:Se||_i(s,n);case 6:if(o=se,h=rn,se=null,ji(e,n,s),se=o,rn=h,se!==null)if(rn)try{(se.nodeType===9?se.body:se.nodeName==="HTML"?se.ownerDocument.body:se).removeChild(s.stateNode)}catch(f){Yt(s,n,f)}else try{se.removeChild(s.stateNode)}catch(f){Yt(s,n,f)}break;case 18:se!==null&&(rn?(e=se,ty(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),Pa(e)):ty(se,s.stateNode));break;case 4:o=se,h=rn,se=s.stateNode.containerInfo,rn=!0,ji(e,n,s),se=o,rn=h;break;case 0:case 11:case 14:case 15:Ir(2,s,n),Se||Ir(4,s,n),ji(e,n,s);break;case 1:Se||(_i(s,n),o=s.stateNode,typeof o.componentWillUnmount=="function"&&e_(s,n,o)),ji(e,n,s);break;case 21:ji(e,n,s);break;case 22:Se=(o=Se)||s.memoizedState!==null,ji(e,n,s),Se=o;break;default:ji(e,n,s)}}function u_(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Pa(e)}catch(s){Yt(n,n.return,s)}}}function c_(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Pa(e)}catch(s){Yt(n,n.return,s)}}function h0(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new s_),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new s_),n;default:throw Error(a(435,e.tag))}}function $u(e,n){var s=h0(e);n.forEach(function(o){if(!s.has(o)){s.add(o);var h=T0.bind(null,e,o);o.then(h,h)}})}function sn(e,n){var s=n.deletions;if(s!==null)for(var o=0;o<s.length;o++){var h=s[o],f=e,p=n,T=p;t:for(;T!==null;){switch(T.tag){case 27:if(Dr(T.type)){se=T.stateNode,rn=!1;break t}break;case 5:se=T.stateNode,rn=!1;break t;case 3:case 4:se=T.stateNode.containerInfo,rn=!0;break t}T=T.return}if(se===null)throw Error(a(160));l_(f,p,h),se=null,rn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)h_(n,e),n=n.sibling}var Yn=null;function h_(e,n){var s=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:sn(n,e),an(e),o&4&&(Ir(3,e,e.return),Jo(3,e),Ir(5,e,e.return));break;case 1:sn(n,e),an(e),o&512&&(Se||s===null||_i(s,s.return)),o&64&&Hi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?o:s.concat(o))));break;case 26:var h=Yn;if(sn(n,e),an(e),o&512&&(Se||s===null||_i(s,s.return)),o&4){var f=s!==null?s.memoizedState:null;if(o=e.memoizedState,s===null)if(o===null)if(e.stateNode===null){t:{o=e.type,s=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[ii]||f[_e]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),Ge(f,o,s),f[_e]=e,ye(f),o=f;break t;case"link":var p=hy("link","href",h).get(o+(s.href||""));if(p){for(var T=0;T<p.length;T++)if(f=p[T],f.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&f.getAttribute("rel")===(s.rel==null?null:s.rel)&&f.getAttribute("title")===(s.title==null?null:s.title)&&f.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){p.splice(T,1);break e}}f=h.createElement(o),Ge(f,o,s),h.head.appendChild(f);break;case"meta":if(p=hy("meta","content",h).get(o+(s.content||""))){for(T=0;T<p.length;T++)if(f=p[T],f.getAttribute("content")===(s.content==null?null:""+s.content)&&f.getAttribute("name")===(s.name==null?null:s.name)&&f.getAttribute("property")===(s.property==null?null:s.property)&&f.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&f.getAttribute("charset")===(s.charSet==null?null:s.charSet)){p.splice(T,1);break e}}f=h.createElement(o),Ge(f,o,s),h.head.appendChild(f);break;default:throw Error(a(468,o))}f[_e]=e,ye(f),o=f}e.stateNode=o}else fy(h,e.type,e.stateNode);else e.stateNode=cy(h,o,e.memoizedProps);else f!==o?(f===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):f.count--,o===null?fy(h,e.type,e.stateNode):cy(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Pf(e,e.memoizedProps,s.memoizedProps)}break;case 27:sn(n,e),an(e),o&512&&(Se||s===null||_i(s,s.return)),s!==null&&o&4&&Pf(e,e.memoizedProps,s.memoizedProps);break;case 5:if(sn(n,e),an(e),o&512&&(Se||s===null||_i(s,s.return)),e.flags&32){h=e.stateNode;try{nn(h,"")}catch(st){Yt(e,e.return,st)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,Pf(e,h,s!==null?s.memoizedProps:h)),o&1024&&(zf=!0);break;case 6:if(sn(n,e),an(e),o&4){if(e.stateNode===null)throw Error(a(162));o=e.memoizedProps,s=e.stateNode;try{s.nodeValue=o}catch(st){Yt(e,e.return,st)}}break;case 3:if(gc=null,h=Yn,Yn=dc(n.containerInfo),sn(n,e),Yn=h,an(e),o&4&&s!==null&&s.memoizedState.isDehydrated)try{Pa(n.containerInfo)}catch(st){Yt(e,e.return,st)}zf&&(zf=!1,f_(e));break;case 4:o=Yn,Yn=dc(e.stateNode.containerInfo),sn(n,e),an(e),Yn=o;break;case 12:sn(n,e),an(e);break;case 31:sn(n,e),an(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,$u(e,o)));break;case 13:sn(n,e),an(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(ec=We()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,$u(e,o)));break;case 22:h=e.memoizedState!==null;var C=s!==null&&s.memoizedState!==null,k=Hi,j=Se;if(Hi=k||h,Se=j||C,sn(n,e),Se=j,Hi=k,an(e),o&8192)t:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(s===null||C||Hi||Se||Ds(e)),s=null,n=e;;){if(n.tag===5||n.tag===26){if(s===null){C=s=n;try{if(f=C.stateNode,h)p=f.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{T=C.stateNode;var Y=C.memoizedProps.style,z=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;T.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(st){Yt(C,C.return,st)}}}else if(n.tag===6){if(s===null){C=n;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(st){Yt(C,C.return,st)}}}else if(n.tag===18){if(s===null){C=n;try{var H=C.stateNode;h?ey(H,!0):ey(C.stateNode,!1)}catch(st){Yt(C,C.return,st)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(s=o.retryQueue,s!==null&&(o.retryQueue=null,$u(e,s))));break;case 19:sn(n,e),an(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,$u(e,o)));break;case 30:break;case 21:break;default:sn(n,e),an(e)}}function an(e){var n=e.flags;if(n&2){try{for(var s,o=e.return;o!==null;){if(i_(o)){s=o;break}o=o.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var h=s.stateNode,f=xf(e);Wu(e,f,h);break;case 5:var p=s.stateNode;s.flags&32&&(nn(p,""),s.flags&=-33);var T=xf(e);Wu(e,T,p);break;case 3:case 4:var C=s.stateNode.containerInfo,k=xf(e);kf(e,k,C);break;default:throw Error(a(161))}}catch(j){Yt(e,e.return,j)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function f_(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;f_(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Gi(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)a_(e,n.alternate,n),n=n.sibling}function Ds(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Ir(4,n,n.return),Ds(n);break;case 1:_i(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&e_(n,n.return,s),Ds(n);break;case 27:al(n.stateNode);case 26:case 5:_i(n,n.return),Ds(n);break;case 22:n.memoizedState===null&&Ds(n);break;case 30:Ds(n);break;default:Ds(n)}e=e.sibling}}function Fi(e,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=e,f=n,p=f.flags;switch(f.tag){case 0:case 11:case 15:Fi(h,f,s),Jo(4,f);break;case 1:if(Fi(h,f,s),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(k){Yt(o,o.return,k)}if(o=f,h=o.updateQueue,h!==null){var T=o.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)Gg(C[h],T)}catch(k){Yt(o,o.return,k)}}s&&p&64&&t_(f),Zo(f,f.return);break;case 27:r_(f);case 26:case 5:Fi(h,f,s),s&&o===null&&p&4&&n_(f),Zo(f,f.return);break;case 12:Fi(h,f,s);break;case 31:Fi(h,f,s),s&&p&4&&u_(h,f);break;case 13:Fi(h,f,s),s&&p&4&&c_(h,f);break;case 22:f.memoizedState===null&&Fi(h,f,s),Zo(f,f.return);break;case 30:break;default:Fi(h,f,s)}n=n.sibling}}function Bf(e,n){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&xo(s))}function Hf(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&xo(e))}function Kn(e,n,s,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)d_(e,n,s,o),n=n.sibling}function d_(e,n,s,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:Kn(e,n,s,o),h&2048&&Jo(9,n);break;case 1:Kn(e,n,s,o);break;case 3:Kn(e,n,s,o),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&xo(e)));break;case 12:if(h&2048){Kn(e,n,s,o),e=n.stateNode;try{var f=n.memoizedProps,p=f.id,T=f.onPostCommit;typeof T=="function"&&T(p,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){Yt(n,n.return,C)}}else Kn(e,n,s,o);break;case 31:Kn(e,n,s,o);break;case 13:Kn(e,n,s,o);break;case 23:break;case 22:f=n.stateNode,p=n.alternate,n.memoizedState!==null?f._visibility&2?Kn(e,n,s,o):Wo(e,n):f._visibility&2?Kn(e,n,s,o):(f._visibility|=2,Ra(e,n,s,o,(n.subtreeFlags&10256)!==0||!1)),h&2048&&Bf(p,n);break;case 24:Kn(e,n,s,o),h&2048&&Hf(n.alternate,n);break;default:Kn(e,n,s,o)}}function Ra(e,n,s,o,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var f=e,p=n,T=s,C=o,k=p.flags;switch(p.tag){case 0:case 11:case 15:Ra(f,p,T,C,h),Jo(8,p);break;case 23:break;case 22:var j=p.stateNode;p.memoizedState!==null?j._visibility&2?Ra(f,p,T,C,h):Wo(f,p):(j._visibility|=2,Ra(f,p,T,C,h)),h&&k&2048&&Bf(p.alternate,p);break;case 24:Ra(f,p,T,C,h),h&&k&2048&&Hf(p.alternate,p);break;default:Ra(f,p,T,C,h)}n=n.sibling}}function Wo(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=e,o=n,h=o.flags;switch(o.tag){case 22:Wo(s,o),h&2048&&Bf(o.alternate,o);break;case 24:Wo(s,o),h&2048&&Hf(o.alternate,o);break;default:Wo(s,o)}n=n.sibling}}var $o=8192;function Ca(e,n,s){if(e.subtreeFlags&$o)for(e=e.child;e!==null;)m_(e,n,s),e=e.sibling}function m_(e,n,s){switch(e.tag){case 26:Ca(e,n,s),e.flags&$o&&e.memoizedState!==null&&Z0(s,Yn,e.memoizedState,e.memoizedProps);break;case 5:Ca(e,n,s);break;case 3:case 4:var o=Yn;Yn=dc(e.stateNode.containerInfo),Ca(e,n,s),Yn=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=$o,$o=16777216,Ca(e,n,s),$o=o):Ca(e,n,s));break;default:Ca(e,n,s)}}function g_(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function tl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];Le=o,__(o,e)}g_(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)p_(e),e=e.sibling}function p_(e){switch(e.tag){case 0:case 11:case 15:tl(e),e.flags&2048&&Ir(9,e,e.return);break;case 3:tl(e);break;case 12:tl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,tc(e)):tl(e);break;default:tl(e)}}function tc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];Le=o,__(o,e)}g_(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Ir(8,n,n.return),tc(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,tc(n));break;default:tc(n)}e=e.sibling}}function __(e,n){for(;Le!==null;){var s=Le;switch(s.tag){case 0:case 11:case 15:Ir(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var o=s.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:xo(s.memoizedState.cache)}if(o=s.child,o!==null)o.return=s,Le=o;else t:for(s=e;Le!==null;){o=Le;var h=o.sibling,f=o.return;if(o_(o),o===s){Le=null;break t}if(h!==null){h.return=f,Le=h;break t}Le=f}}}var f0={getCacheForType:function(e){var n=He(Te),s=n.data.get(e);return s===void 0&&(s=e(),n.data.set(e,s)),s},cacheSignal:function(){return He(Te).controller.signal}},d0=typeof WeakMap=="function"?WeakMap:Map,Ht=0,Zt=null,bt=null,Nt=0,qt=0,pn=null,Rr=!1,ba=!1,jf=!1,qi=0,ue=0,Cr=0,Ms=0,Gf=0,_n=0,wa=0,el=null,on=null,Ff=!1,ec=0,y_=0,nc=1/0,ic=null,br=null,Ne=0,wr=null,Na=null,Yi=0,qf=0,Yf=null,E_=null,nl=0,Kf=null;function yn(){return(Ht&2)!==0&&Nt!==0?Nt&-Nt:G.T!==null?$f():ru()}function T_(){if(_n===0)if((Nt&536870912)===0||Lt){var e=ss;ss<<=1,(ss&3932160)===0&&(ss=262144),_n=e}else _n=536870912;return e=mn.current,e!==null&&(e.flags|=32),_n}function ln(e,n,s){(e===Zt&&(qt===2||qt===9)||e.cancelPendingCommit!==null)&&(Oa(e,0),Nr(e,Nt,_n,!1)),as(e,s),((Ht&2)===0||e!==Zt)&&(e===Zt&&((Ht&2)===0&&(Ms|=s),ue===4&&Nr(e,Nt,_n,!1)),yi(e))}function v_(e,n,s){if((Ht&6)!==0)throw Error(a(327));var o=!s&&(n&127)===0&&(n&e.expiredLanes)===0||xn(e,n),h=o?p0(e,n):Xf(e,n,!0),f=o;do{if(h===0){ba&&!o&&Nr(e,n,0,!1);break}else{if(s=e.current.alternate,f&&!m0(s)){h=Xf(e,n,!1),f=!1;continue}if(h===2){if(f=n,e.errorRecoveryDisabledLanes&f)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){n=p;t:{var T=e;h=el;var C=T.current.memoizedState.isDehydrated;if(C&&(Oa(T,p).flags|=256),p=Xf(T,p,!1),p!==2){if(jf&&!C){T.errorRecoveryDisabledLanes|=f,Ms|=f,h=4;break t}f=on,on=h,f!==null&&(on===null?on=f:on.push.apply(on,f))}h=p}if(f=!1,h!==2)continue}}if(h===1){Oa(e,0),Nr(e,n,0,!0);break}t:{switch(o=e,f=h,f){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:Nr(o,n,_n,!Rr);break t;case 2:on=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(h=ec+300-We(),10<h)){if(Nr(o,n,_n,!Rr),ti(o,0,!0)!==0)break t;Yi=n,o.timeoutHandle=W_(A_.bind(null,o,s,on,ic,Ff,n,_n,Ms,wa,Rr,f,"Throttled",-0,0),h);break t}A_(o,s,on,ic,Ff,n,_n,Ms,wa,Rr,f,null,-0,0)}}break}while(!0);yi(e)}function A_(e,n,s,o,h,f,p,T,C,k,j,Y,z,H){if(e.timeoutHandle=-1,Y=n.subtreeFlags,Y&8192||(Y&16785408)===16785408){Y={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bn},m_(n,f,Y);var st=(f&62914560)===f?ec-We():(f&4194048)===f?y_-We():0;if(st=W0(Y,st),st!==null){Yi=f,e.cancelPendingCommit=st(O_.bind(null,e,n,f,s,o,h,p,T,C,j,Y,null,z,H)),Nr(e,f,p,!k);return}}O_(e,n,f,s,o,h,p,T,C)}function m0(e){for(var n=e;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var o=0;o<s.length;o++){var h=s[o],f=h.getSnapshot;h=h.value;try{if(!fn(f(),h))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Nr(e,n,s,o){n&=~Gf,n&=~Ms,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var h=n;0<h;){var f=31-ce(h),p=1<<f;o[f]=-1,h&=~p}s!==0&&os(e,s,n)}function rc(){return(Ht&6)===0?(il(0),!1):!0}function Qf(){if(bt!==null){if(qt===0)var e=bt.return;else e=bt,Ui=Ss=null,cf(e),Ta=null,zo=0,e=bt;for(;e!==null;)$p(e.alternate,e),e=e.return;bt=null}}function Oa(e,n){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,L0(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Yi=0,Qf(),Zt=e,bt=s=Vi(e.current,null),Nt=n,qt=0,pn=null,Rr=!1,ba=xn(e,n),jf=!1,wa=_n=Gf=Ms=Cr=ue=0,on=el=null,Ff=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var h=31-ce(o),f=1<<h;n|=e[h],o&=~f}return qi=n,Ru(),s}function S_(e,n){At=null,G.H=Ko,n===Ea||n===Vu?(n=zg(),qt=3):n===Zh?(n=zg(),qt=4):qt=n===Cf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,pn=n,bt===null&&(ue=1,Ku(e,Cn(n,e.current)))}function I_(){var e=mn.current;return e===null?!0:(Nt&4194048)===Nt?On===null:(Nt&62914560)===Nt||(Nt&536870912)!==0?e===On:!1}function R_(){var e=G.H;return G.H=Ko,e===null?Ko:e}function C_(){var e=G.A;return G.A=f0,e}function sc(){ue=4,Rr||(Nt&4194048)!==Nt&&mn.current!==null||(ba=!0),(Cr&134217727)===0&&(Ms&134217727)===0||Zt===null||Nr(Zt,Nt,_n,!1)}function Xf(e,n,s){var o=Ht;Ht|=2;var h=R_(),f=C_();(Zt!==e||Nt!==n)&&(ic=null,Oa(e,n)),n=!1;var p=ue;t:do try{if(qt!==0&&bt!==null){var T=bt,C=pn;switch(qt){case 8:Qf(),p=6;break t;case 3:case 2:case 9:case 6:mn.current===null&&(n=!0);var k=qt;if(qt=0,pn=null,Da(e,T,C,k),s&&ba){p=0;break t}break;default:k=qt,qt=0,pn=null,Da(e,T,C,k)}}g0(),p=ue;break}catch(j){S_(e,j)}while(!0);return n&&e.shellSuspendCounter++,Ui=Ss=null,Ht=o,G.H=h,G.A=f,bt===null&&(Zt=null,Nt=0,Ru()),p}function g0(){for(;bt!==null;)b_(bt)}function p0(e,n){var s=Ht;Ht|=2;var o=R_(),h=C_();Zt!==e||Nt!==n?(ic=null,nc=We()+500,Oa(e,n)):ba=xn(e,n);t:do try{if(qt!==0&&bt!==null){n=bt;var f=pn;e:switch(qt){case 1:qt=0,pn=null,Da(e,n,f,1);break;case 2:case 9:if(xg(f)){qt=0,pn=null,w_(n);break}n=function(){qt!==2&&qt!==9||Zt!==e||(qt=7),yi(e)},f.then(n,n);break t;case 3:qt=7;break t;case 4:qt=5;break t;case 7:xg(f)?(qt=0,pn=null,w_(n)):(qt=0,pn=null,Da(e,n,f,7));break;case 5:var p=null;switch(bt.tag){case 26:p=bt.memoizedState;case 5:case 27:var T=bt;if(p?dy(p):T.stateNode.complete){qt=0,pn=null;var C=T.sibling;if(C!==null)bt=C;else{var k=T.return;k!==null?(bt=k,ac(k)):bt=null}break e}}qt=0,pn=null,Da(e,n,f,5);break;case 6:qt=0,pn=null,Da(e,n,f,6);break;case 8:Qf(),ue=6;break t;default:throw Error(a(462))}}_0();break}catch(j){S_(e,j)}while(!0);return Ui=Ss=null,G.H=o,G.A=h,Ht=s,bt!==null?0:(Zt=null,Nt=0,Ru(),ue)}function _0(){for(;bt!==null&&!Ih();)b_(bt)}function b_(e){var n=Zp(e.alternate,e,qi);e.memoizedProps=e.pendingProps,n===null?ac(e):bt=n}function w_(e){var n=e,s=n.alternate;switch(n.tag){case 15:case 0:n=qp(s,n,n.pendingProps,n.type,void 0,Nt);break;case 11:n=qp(s,n,n.pendingProps,n.type.render,n.ref,Nt);break;case 5:cf(n);default:$p(s,n),n=bt=Cg(n,qi),n=Zp(s,n,qi)}e.memoizedProps=e.pendingProps,n===null?ac(e):bt=n}function Da(e,n,s,o){Ui=Ss=null,cf(n),Ta=null,zo=0;var h=n.return;try{if(s0(e,h,n,s,Nt)){ue=1,Ku(e,Cn(s,e.current)),bt=null;return}}catch(f){if(h!==null)throw bt=h,f;ue=1,Ku(e,Cn(s,e.current)),bt=null;return}n.flags&32768?(Lt||o===1?e=!0:ba||(Nt&536870912)!==0?e=!1:(Rr=e=!0,(o===2||o===9||o===3||o===6)&&(o=mn.current,o!==null&&o.tag===13&&(o.flags|=16384))),N_(n,e)):ac(n)}function ac(e){var n=e;do{if((n.flags&32768)!==0){N_(n,Rr);return}e=n.return;var s=l0(n.alternate,n,qi);if(s!==null){bt=s;return}if(n=n.sibling,n!==null){bt=n;return}bt=n=e}while(n!==null);ue===0&&(ue=5)}function N_(e,n){do{var s=u0(e.alternate,e);if(s!==null){s.flags&=32767,bt=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(e=e.sibling,e!==null)){bt=e;return}bt=e=s}while(e!==null);ue=6,bt=null}function O_(e,n,s,o,h,f,p,T,C){e.cancelPendingCommit=null;do oc();while(Ne!==0);if((Ht&6)!==0)throw Error(a(327));if(n!==null){if(n===e.current)throw Error(a(177));if(f=n.lanes|n.childLanes,f|=Ph,bh(e,s,f,p,T,C),e===Zt&&(bt=Zt=null,Nt=0),Na=n,wr=e,Yi=s,qf=f,Yf=h,E_=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,v0(sr,function(){return U_(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=G.T,G.T=null,h=et.p,et.p=2,p=Ht,Ht|=4;try{c0(e,n,s)}finally{Ht=p,et.p=h,G.T=o}}Ne=1,D_(),M_(),V_()}}function D_(){if(Ne===1){Ne=0;var e=wr,n=Na,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=G.T,G.T=null;var o=et.p;et.p=2;var h=Ht;Ht|=4;try{h_(n,e);var f=od,p=_g(e.containerInfo),T=f.focusedElem,C=f.selectionRange;if(p!==T&&T&&T.ownerDocument&&pg(T.ownerDocument.documentElement,T)){if(C!==null&&Dh(T)){var k=C.start,j=C.end;if(j===void 0&&(j=k),"selectionStart"in T)T.selectionStart=k,T.selectionEnd=Math.min(j,T.value.length);else{var Y=T.ownerDocument||document,z=Y&&Y.defaultView||window;if(z.getSelection){var H=z.getSelection(),st=T.textContent.length,mt=Math.min(C.start,st),Jt=C.end===void 0?mt:Math.min(C.end,st);!H.extend&&mt>Jt&&(p=Jt,Jt=mt,mt=p);var L=gg(T,mt),O=gg(T,Jt);if(L&&O&&(H.rangeCount!==1||H.anchorNode!==L.node||H.anchorOffset!==L.offset||H.focusNode!==O.node||H.focusOffset!==O.offset)){var x=Y.createRange();x.setStart(L.node,L.offset),H.removeAllRanges(),mt>Jt?(H.addRange(x),H.extend(O.node,O.offset)):(x.setEnd(O.node,O.offset),H.addRange(x))}}}}for(Y=[],H=T;H=H.parentNode;)H.nodeType===1&&Y.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<Y.length;T++){var q=Y[T];q.element.scrollLeft=q.left,q.element.scrollTop=q.top}}Ec=!!ad,od=ad=null}finally{Ht=h,et.p=o,G.T=s}}e.current=n,Ne=2}}function M_(){if(Ne===2){Ne=0;var e=wr,n=Na,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=G.T,G.T=null;var o=et.p;et.p=2;var h=Ht;Ht|=4;try{a_(e,n.alternate,n)}finally{Ht=h,et.p=o,G.T=s}}Ne=3}}function V_(){if(Ne===4||Ne===3){Ne=0,Zl();var e=wr,n=Na,s=Yi,o=E_;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ne=5:(Ne=0,Na=wr=null,L_(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(br=null),Ni(s),n=n.stateNode,ke&&typeof ke.onCommitFiberRoot=="function")try{ke.onCommitFiberRoot(Pn,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=G.T,h=et.p,et.p=2,G.T=null;try{for(var f=e.onRecoverableError,p=0;p<o.length;p++){var T=o[p];f(T.value,{componentStack:T.stack})}}finally{G.T=n,et.p=h}}(Yi&3)!==0&&oc(),yi(e),h=e.pendingLanes,(s&261930)!==0&&(h&42)!==0?e===Kf?nl++:(nl=0,Kf=e):nl=0,il(0)}}function L_(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,xo(n)))}function oc(){return D_(),M_(),V_(),U_()}function U_(){if(Ne!==5)return!1;var e=wr,n=qf;qf=0;var s=Ni(Yi),o=G.T,h=et.p;try{et.p=32>s?32:s,G.T=null,s=Yf,Yf=null;var f=wr,p=Yi;if(Ne=0,Na=wr=null,Yi=0,(Ht&6)!==0)throw Error(a(331));var T=Ht;if(Ht|=4,p_(f.current),d_(f,f.current,p,s),Ht=T,il(0,!1),ke&&typeof ke.onPostCommitFiberRoot=="function")try{ke.onPostCommitFiberRoot(Pn,f)}catch{}return!0}finally{et.p=h,G.T=o,L_(e,n)}}function P_(e,n,s){n=Cn(s,n),n=Rf(e.stateNode,n,2),e=vr(e,n,2),e!==null&&(as(e,2),yi(e))}function Yt(e,n,s){if(e.tag===3)P_(e,e,s);else for(;n!==null;){if(n.tag===3){P_(n,e,s);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(br===null||!br.has(o))){e=Cn(s,e),s=xp(2),o=vr(n,s,2),o!==null&&(kp(s,o,n,e),as(o,2),yi(o));break}}n=n.return}}function Jf(e,n,s){var o=e.pingCache;if(o===null){o=e.pingCache=new d0;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(s)||(jf=!0,h.add(s),e=y0.bind(null,e,n,s),n.then(e,e))}function y0(e,n,s){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Zt===e&&(Nt&s)===s&&(ue===4||ue===3&&(Nt&62914560)===Nt&&300>We()-ec?(Ht&2)===0&&Oa(e,0):Gf|=s,wa===Nt&&(wa=0)),yi(e)}function x_(e,n){n===0&&(n=iu()),e=Ts(e,n),e!==null&&(as(e,n),yi(e))}function E0(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),x_(e,s)}function T0(e,n){var s=0;switch(e.tag){case 31:case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(s=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(a(314))}o!==null&&o.delete(n),x_(e,s)}function v0(e,n){return we(e,n)}var lc=null,Ma=null,Zf=!1,uc=!1,Wf=!1,Or=0;function yi(e){e!==Ma&&e.next===null&&(Ma===null?lc=Ma=e:Ma=Ma.next=e),uc=!0,Zf||(Zf=!0,S0())}function il(e,n){if(!Wf&&uc){Wf=!0;do for(var s=!1,o=lc;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var p=o.suspendedLanes,T=o.pingedLanes;f=(1<<31-ce(42|e)+1)-1,f&=h&~(p&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(s=!0,H_(o,f))}else f=Nt,f=ti(o,o===Zt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||xn(o,f)||(s=!0,H_(o,f));o=o.next}while(s);Wf=!1}}function A0(){k_()}function k_(){uc=Zf=!1;var e=0;Or!==0&&V0()&&(e=Or);for(var n=We(),s=null,o=lc;o!==null;){var h=o.next,f=z_(o,n);f===0?(o.next=null,s===null?lc=h:s.next=h,h===null&&(Ma=s)):(s=o,(e!==0||(f&3)!==0)&&(uc=!0)),o=h}Ne!==0&&Ne!==5||il(e),Or!==0&&(Or=0)}function z_(e,n){for(var s=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var p=31-ce(f),T=1<<p,C=h[p];C===-1?((T&s)===0||(T&o)!==0)&&(h[p]=Ch(T,n)):C<=n&&(e.expiredLanes|=T),f&=~T}if(n=Zt,s=Nt,s=ti(e,e===n?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,s===0||e===n&&(qt===2||qt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&rr(o),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||xn(e,s)){if(n=s&-s,n===e.callbackPriority)return n;switch(o!==null&&rr(o),Ni(s)){case 2:case 8:s=fo;break;case 32:s=sr;break;case 268435456:s=Wl;break;default:s=sr}return o=B_.bind(null,e),s=we(s,o),e.callbackPriority=n,e.callbackNode=s,n}return o!==null&&o!==null&&rr(o),e.callbackPriority=2,e.callbackNode=null,2}function B_(e,n){if(Ne!==0&&Ne!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(oc()&&e.callbackNode!==s)return null;var o=Nt;return o=ti(e,e===Zt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(v_(e,o,n),z_(e,We()),e.callbackNode!=null&&e.callbackNode===s?B_.bind(null,e):null)}function H_(e,n){if(oc())return null;v_(e,n,!0)}function S0(){U0(function(){(Ht&6)!==0?we(ho,A0):k_()})}function $f(){if(Or===0){var e=_a;e===0&&(e=Wn,Wn<<=1,(Wn&261888)===0&&(Wn=256)),Or=e}return Or}function j_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:na(""+e)}function G_(e,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,e.id&&s.setAttribute("form",e.id),n.parentNode.insertBefore(s,n),e=new FormData(e),s.parentNode.removeChild(s),e}function I0(e,n,s,o,h){if(n==="submit"&&s&&s.stateNode===h){var f=j_((h[Me]||null).action),p=o.submitter;p&&(n=(n=p[Me]||null)?j_(n.formAction):p.getAttribute("formAction"),n!==null&&(f=n,p=null));var T=new hi("action","action",null,o,h);e.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Or!==0){var C=p?G_(h,p):new FormData(h);Ef(s,{pending:!0,data:C,method:h.method,action:f},null,C)}}else typeof f=="function"&&(T.preventDefault(),C=p?G_(h,p):new FormData(h),Ef(s,{pending:!0,data:C,method:h.method,action:f},f,C))},currentTarget:h}]})}}for(var td=0;td<Uh.length;td++){var ed=Uh[td],R0=ed.toLowerCase(),C0=ed[0].toUpperCase()+ed.slice(1);qn(R0,"on"+C0)}qn(Tg,"onAnimationEnd"),qn(vg,"onAnimationIteration"),qn(Ag,"onAnimationStart"),qn("dblclick","onDoubleClick"),qn("focusin","onFocus"),qn("focusout","onBlur"),qn(jS,"onTransitionRun"),qn(GS,"onTransitionStart"),qn(FS,"onTransitionCancel"),qn(Sg,"onTransitionEnd"),oi("onMouseEnter",["mouseout","mouseover"]),oi("onMouseLeave",["mouseout","mouseover"]),oi("onPointerEnter",["pointerout","pointerover"]),oi("onPointerLeave",["pointerout","pointerover"]),ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ai("onBeforeInput",["compositionend","keypress","textInput","paste"]),ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rl));function F_(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var o=e[s],h=o.event;o=o.listeners;t:{var f=void 0;if(n)for(var p=o.length-1;0<=p;p--){var T=o[p],C=T.instance,k=T.currentTarget;if(T=T.listener,C!==f&&h.isPropagationStopped())break t;f=T,h.currentTarget=k;try{f(h)}catch(j){Iu(j)}h.currentTarget=null,f=C}else for(p=0;p<o.length;p++){if(T=o[p],C=T.instance,k=T.currentTarget,T=T.listener,C!==f&&h.isPropagationStopped())break t;f=T,h.currentTarget=k;try{f(h)}catch(j){Iu(j)}h.currentTarget=null,f=C}}}}function wt(e,n){var s=n[Zs];s===void 0&&(s=n[Zs]=new Set);var o=e+"__bubble";s.has(o)||(q_(n,e,2,!1),s.add(o))}function nd(e,n,s){var o=0;n&&(o|=4),q_(s,e,o,n)}var cc="_reactListening"+Math.random().toString(36).slice(2);function id(e){if(!e[cc]){e[cc]=!0,po.forEach(function(s){s!=="selectionchange"&&(b0.has(s)||nd(s,!1,e),nd(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[cc]||(n[cc]=!0,nd("selectionchange",!1,n))}}function q_(e,n,s,o){switch(Ty(n)){case 2:var h=eI;break;case 8:h=nI;break;default:h=yd}s=h.bind(null,n,s,e),h=void 0,!fs||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(n,s,{capture:!0,passive:h}):e.addEventListener(n,s,!0):h!==void 0?e.addEventListener(n,s,{passive:h}):e.addEventListener(n,s,!1)}function rd(e,n,s,o,h){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var p=o.tag;if(p===3||p===4){var T=o.stateNode.containerInfo;if(T===h)break;if(p===4)for(p=o.return;p!==null;){var C=p.tag;if((C===3||C===4)&&p.stateNode.containerInfo===h)return;p=p.return}for(;T!==null;){if(p=ri(T),p===null)return;if(C=p.tag,C===5||C===6||C===26||C===27){o=f=p;continue t}T=T.parentNode}}o=o.return}hr(function(){var k=f,j=An(s),Y=[];t:{var z=Ig.get(e);if(z!==void 0){var H=hi,st=e;switch(e){case"keypress":if(ms(s)===0)break t;case"keydown":case"keyup":H=vu;break;case"focusin":st="focus",H=ps;break;case"focusout":st="blur",H=ps;break;case"beforeblur":case"afterblur":H=ps;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=No;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=fu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=m;break;case Tg:case vg:case Ag:H=mu;break;case Sg:H=v;break;case"scroll":case"scrollend":H=wo;break;case"wheel":H=B;break;case"copy":case"cut":case"paste":H=gu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Mi;break;case"toggle":case"beforetoggle":H=vt}var mt=(n&4)!==0,Jt=!mt&&(e==="scroll"||e==="scrollend"),L=mt?z!==null?z+"Capture":null:z;mt=[];for(var O=k,x;O!==null;){var q=O;if(x=q.stateNode,q=q.tag,q!==5&&q!==26&&q!==27||x===null||L===null||(q=Hn(O,L),q!=null&&mt.push(sl(O,q,x))),Jt)break;O=O.return}0<mt.length&&(z=new H(z,st,null,s,j),Y.push({event:z,listeners:mt}))}}if((n&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",z&&s!==Ro&&(st=s.relatedTarget||s.fromElement)&&(ri(st)||st[ni]))break t;if((H||z)&&(z=j.window===j?j:(z=j.ownerDocument)?z.defaultView||z.parentWindow:window,H?(st=s.relatedTarget||s.toElement,H=k,st=st?ri(st):null,st!==null&&(Jt=c(st),mt=st.tag,st!==Jt||mt!==5&&mt!==27&&mt!==6)&&(st=null)):(H=null,st=k),H!==st)){if(mt=No,q="onMouseLeave",L="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(mt=Mi,q="onPointerLeave",L="onPointerEnter",O="pointer"),Jt=H==null?z:cn(H),x=st==null?z:cn(st),z=new mt(q,O+"leave",H,s,j),z.target=Jt,z.relatedTarget=x,q=null,ri(j)===k&&(mt=new mt(L,O+"enter",st,s,j),mt.target=x,mt.relatedTarget=Jt,q=mt),Jt=q,H&&st)e:{for(mt=w0,L=H,O=st,x=0,q=L;q;q=mt(q))x++;q=0;for(var ct=O;ct;ct=mt(ct))q++;for(;0<x-q;)L=mt(L),x--;for(;0<q-x;)O=mt(O),q--;for(;x--;){if(L===O||O!==null&&L===O.alternate){mt=L;break e}L=mt(L),O=mt(O)}mt=null}else mt=null;H!==null&&Y_(Y,z,H,mt,!1),st!==null&&Jt!==null&&Y_(Y,Jt,st,mt,!0)}}t:{if(z=k?cn(k):window,H=z.nodeName&&z.nodeName.toLowerCase(),H==="select"||H==="input"&&z.type==="file")var kt=ug;else if(og(z))if(cg)kt=zS;else{kt=xS;var at=PS}else H=z.nodeName,!H||H.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?k&&ea(k.elementType)&&(kt=ug):kt=kS;if(kt&&(kt=kt(e,k))){lg(Y,kt,s,j);break t}at&&at(e,z,k),e==="focusout"&&k&&z.type==="number"&&k.memoizedProps.value!=null&&Ao(z,"number",z.value)}switch(at=k?cn(k):window,e){case"focusin":(og(at)||at.contentEditable==="true")&&(ua=at,Mh=k,Lo=null);break;case"focusout":Lo=Mh=ua=null;break;case"mousedown":Vh=!0;break;case"contextmenu":case"mouseup":case"dragend":Vh=!1,yg(Y,s,j);break;case"selectionchange":if(HS)break;case"keydown":case"keyup":yg(Y,s,j)}var It;if(Bt)t:{switch(e){case"compositionstart":var Ot="onCompositionStart";break t;case"compositionend":Ot="onCompositionEnd";break t;case"compositionupdate":Ot="onCompositionUpdate";break t}Ot=void 0}else la?_s(e,s)&&(Ot="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Ot="onCompositionStart");Ot&&(mi&&s.locale!=="ko"&&(la||Ot!=="onCompositionStart"?Ot==="onCompositionEnd"&&la&&(It=bo()):(ci=j,Co="value"in ci?ci.value:ci.textContent,la=!0)),at=hc(k,Ot),0<at.length&&(Ot=new di(Ot,e,null,s,j),Y.push({event:Ot,listeners:at}),It?Ot.data=It:(It=oa(s),It!==null&&(Ot.data=It)))),(It=In?MS(e,s):VS(e,s))&&(Ot=hc(k,"onBeforeInput"),0<Ot.length&&(at=new di("onBeforeInput","beforeinput",null,s,j),Y.push({event:at,listeners:Ot}),at.data=It)),I0(Y,e,k,s,j)}F_(Y,n)})}function sl(e,n,s){return{instance:e,listener:n,currentTarget:s}}function hc(e,n){for(var s=n+"Capture",o=[];e!==null;){var h=e,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=Hn(e,s),h!=null&&o.unshift(sl(e,h,f)),h=Hn(e,n),h!=null&&o.push(sl(e,h,f))),e.tag===3)return o;e=e.return}return[]}function w0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Y_(e,n,s,o,h){for(var f=n._reactName,p=[];s!==null&&s!==o;){var T=s,C=T.alternate,k=T.stateNode;if(T=T.tag,C!==null&&C===o)break;T!==5&&T!==26&&T!==27||k===null||(C=k,h?(k=Hn(s,f),k!=null&&p.unshift(sl(s,k,C))):h||(k=Hn(s,f),k!=null&&p.push(sl(s,k,C)))),s=s.return}p.length!==0&&e.push({event:n,listeners:p})}var N0=/\r\n?/g,O0=/\u0000|\uFFFD/g;function K_(e){return(typeof e=="string"?e:""+e).replace(N0,`
`).replace(O0,"")}function Q_(e,n){return n=K_(n),K_(e)===n}function Xt(e,n,s,o,h,f){switch(s){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||nn(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&nn(e,""+o);break;case"className":hn(e,"class",o);break;case"tabIndex":hn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":hn(e,s,o);break;case"style":Io(e,o,f);break;case"data":if(n!=="object"){hn(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||s!=="href")){e.removeAttribute(s);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(s);break}o=na(""+o),e.setAttribute(s,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(s==="formAction"?(n!=="input"&&Xt(e,n,"name",h.name,h,null),Xt(e,n,"formEncType",h.formEncType,h,null),Xt(e,n,"formMethod",h.formMethod,h,null),Xt(e,n,"formTarget",h.formTarget,h,null)):(Xt(e,n,"encType",h.encType,h,null),Xt(e,n,"method",h.method,h,null),Xt(e,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(s);break}o=na(""+o),e.setAttribute(s,o);break;case"onClick":o!=null&&(e.onclick=Bn);break;case"onScroll":o!=null&&wt("scroll",e);break;case"onScrollEnd":o!=null&&wt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(s=o.__html,s!=null){if(h.children!=null)throw Error(a(60));e.innerHTML=s}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}s=na(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,""+o):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":o===!0?e.setAttribute(s,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,o):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(s,o):e.removeAttribute(s);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(s):e.setAttribute(s,o);break;case"popover":wt("beforetoggle",e),wt("toggle",e),$s(e,"popover",o);break;case"xlinkActuate":Ee(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ee(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ee(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ee(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ee(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ee(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ee(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ee(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ee(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":$s(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=hu.get(s)||s,$s(e,s,o))}}function sd(e,n,s,o,h,f){switch(s){case"style":Io(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(s=o.__html,s!=null){if(h.children!=null)throw Error(a(60));e.innerHTML=s}}break;case"children":typeof o=="string"?nn(e,o):(typeof o=="number"||typeof o=="bigint")&&nn(e,""+o);break;case"onScroll":o!=null&&wt("scroll",e);break;case"onScrollEnd":o!=null&&wt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Bn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_o.hasOwnProperty(s))t:{if(s[0]==="o"&&s[1]==="n"&&(h=s.endsWith("Capture"),n=s.slice(2,h?s.length-7:void 0),f=e[Me]||null,f=f!=null?f[s]:null,typeof f=="function"&&e.removeEventListener(n,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(n,o,h);break t}s in e?e[s]=o:o===!0?e.setAttribute(s,""):$s(e,s,o)}}}function Ge(e,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wt("error",e),wt("load",e);var o=!1,h=!1,f;for(f in s)if(s.hasOwnProperty(f)){var p=s[f];if(p!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Xt(e,n,f,p,s,null)}}h&&Xt(e,n,"srcSet",s.srcSet,s,null),o&&Xt(e,n,"src",s.src,s,null);return;case"input":wt("invalid",e);var T=f=p=h=null,C=null,k=null;for(o in s)if(s.hasOwnProperty(o)){var j=s[o];if(j!=null)switch(o){case"name":h=j;break;case"type":p=j;break;case"checked":C=j;break;case"defaultChecked":k=j;break;case"value":f=j;break;case"defaultValue":T=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(a(137,n));break;default:Xt(e,n,o,j,s,null)}}lu(e,f,T,C,k,p,h,!1);return;case"select":wt("invalid",e),o=p=f=null;for(h in s)if(s.hasOwnProperty(h)&&(T=s[h],T!=null))switch(h){case"value":f=T;break;case"defaultValue":p=T;break;case"multiple":o=T;default:Xt(e,n,h,T,s,null)}n=f,s=p,e.multiple=!!o,n!=null?or(e,!!o,n,!1):s!=null&&or(e,!!o,s,!0);return;case"textarea":wt("invalid",e),f=h=o=null;for(p in s)if(s.hasOwnProperty(p)&&(T=s[p],T!=null))switch(p){case"value":o=T;break;case"defaultValue":h=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:Xt(e,n,p,T,s,null)}lr(e,o,h,f);return;case"option":for(C in s)if(s.hasOwnProperty(C)&&(o=s[C],o!=null))switch(C){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Xt(e,n,C,o,s,null)}return;case"dialog":wt("beforetoggle",e),wt("toggle",e),wt("cancel",e),wt("close",e);break;case"iframe":case"object":wt("load",e);break;case"video":case"audio":for(o=0;o<rl.length;o++)wt(rl[o],e);break;case"image":wt("error",e),wt("load",e);break;case"details":wt("toggle",e);break;case"embed":case"source":case"link":wt("error",e),wt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(k in s)if(s.hasOwnProperty(k)&&(o=s[k],o!=null))switch(k){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Xt(e,n,k,o,s,null)}return;default:if(ea(n)){for(j in s)s.hasOwnProperty(j)&&(o=s[j],o!==void 0&&sd(e,n,j,o,s,void 0));return}}for(T in s)s.hasOwnProperty(T)&&(o=s[T],o!=null&&Xt(e,n,T,o,s,null))}function D0(e,n,s,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,p=null,T=null,C=null,k=null,j=null;for(H in s){var Y=s[H];if(s.hasOwnProperty(H)&&Y!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":C=Y;default:o.hasOwnProperty(H)||Xt(e,n,H,null,o,Y)}}for(var z in o){var H=o[z];if(Y=s[z],o.hasOwnProperty(z)&&(H!=null||Y!=null))switch(z){case"type":f=H;break;case"name":h=H;break;case"checked":k=H;break;case"defaultChecked":j=H;break;case"value":p=H;break;case"defaultValue":T=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(a(137,n));break;default:H!==Y&&Xt(e,n,z,H,o,Y)}}ta(e,p,T,C,k,j,f,h);return;case"select":H=p=T=z=null;for(f in s)if(C=s[f],s.hasOwnProperty(f)&&C!=null)switch(f){case"value":break;case"multiple":H=C;default:o.hasOwnProperty(f)||Xt(e,n,f,null,o,C)}for(h in o)if(f=o[h],C=s[h],o.hasOwnProperty(h)&&(f!=null||C!=null))switch(h){case"value":z=f;break;case"defaultValue":T=f;break;case"multiple":p=f;default:f!==C&&Xt(e,n,h,f,o,C)}n=T,s=p,o=H,z!=null?or(e,!!s,z,!1):!!o!=!!s&&(n!=null?or(e,!!s,n,!0):or(e,!!s,s?[]:"",!1));return;case"textarea":H=z=null;for(T in s)if(h=s[T],s.hasOwnProperty(T)&&h!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Xt(e,n,T,null,o,h)}for(p in o)if(h=o[p],f=s[p],o.hasOwnProperty(p)&&(h!=null||f!=null))switch(p){case"value":z=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==f&&Xt(e,n,p,h,o,f)}uu(e,z,H);return;case"option":for(var st in s)if(z=s[st],s.hasOwnProperty(st)&&z!=null&&!o.hasOwnProperty(st))switch(st){case"selected":e.selected=!1;break;default:Xt(e,n,st,null,o,z)}for(C in o)if(z=o[C],H=s[C],o.hasOwnProperty(C)&&z!==H&&(z!=null||H!=null))switch(C){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Xt(e,n,C,z,o,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mt in s)z=s[mt],s.hasOwnProperty(mt)&&z!=null&&!o.hasOwnProperty(mt)&&Xt(e,n,mt,null,o,z);for(k in o)if(z=o[k],H=s[k],o.hasOwnProperty(k)&&z!==H&&(z!=null||H!=null))switch(k){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(a(137,n));break;default:Xt(e,n,k,z,o,H)}return;default:if(ea(n)){for(var Jt in s)z=s[Jt],s.hasOwnProperty(Jt)&&z!==void 0&&!o.hasOwnProperty(Jt)&&sd(e,n,Jt,void 0,o,z);for(j in o)z=o[j],H=s[j],!o.hasOwnProperty(j)||z===H||z===void 0&&H===void 0||sd(e,n,j,z,o,H);return}}for(var L in s)z=s[L],s.hasOwnProperty(L)&&z!=null&&!o.hasOwnProperty(L)&&Xt(e,n,L,null,o,z);for(Y in o)z=o[Y],H=s[Y],!o.hasOwnProperty(Y)||z===H||z==null&&H==null||Xt(e,n,Y,z,o,H)}function X_(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function M0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,s=performance.getEntriesByType("resource"),o=0;o<s.length;o++){var h=s[o],f=h.transferSize,p=h.initiatorType,T=h.duration;if(f&&T&&X_(p)){for(p=0,T=h.responseEnd,o+=1;o<s.length;o++){var C=s[o],k=C.startTime;if(k>T)break;var j=C.transferSize,Y=C.initiatorType;j&&X_(Y)&&(C=C.responseEnd,p+=j*(C<T?1:(T-k)/(C-k)))}if(--o,n+=8*(f+p)/(h.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var ad=null,od=null;function fc(e){return e.nodeType===9?e:e.ownerDocument}function J_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Z_(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function ld(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var ud=null;function V0(){var e=window.event;return e&&e.type==="popstate"?e===ud?!1:(ud=e,!0):(ud=null,!1)}var W_=typeof setTimeout=="function"?setTimeout:void 0,L0=typeof clearTimeout=="function"?clearTimeout:void 0,$_=typeof Promise=="function"?Promise:void 0,U0=typeof queueMicrotask=="function"?queueMicrotask:typeof $_<"u"?function(e){return $_.resolve(null).then(e).catch(P0)}:W_;function P0(e){setTimeout(function(){throw e})}function Dr(e){return e==="head"}function ty(e,n){var s=n,o=0;do{var h=s.nextSibling;if(e.removeChild(s),h&&h.nodeType===8)if(s=h.data,s==="/$"||s==="/&"){if(o===0){e.removeChild(h),Pa(n);return}o--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")o++;else if(s==="html")al(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,al(s);for(var f=s.firstChild;f;){var p=f.nextSibling,T=f.nodeName;f[ii]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&f.rel.toLowerCase()==="stylesheet"||s.removeChild(f),f=p}}else s==="body"&&al(e.ownerDocument.body);s=h}while(s);Pa(n)}function ey(e,n){var s=e;e=0;do{var o=s.nextSibling;if(s.nodeType===1?n?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(n?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),o&&o.nodeType===8)if(s=o.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=o}while(s)}function cd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":cd(s),Ws(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function x0(e,n,s,o){for(;e.nodeType===1;){var h=s;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ii])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Dn(e.nextSibling),e===null)break}return null}function k0(e,n,s){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Dn(e.nextSibling),e===null))return null;return e}function ny(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Dn(e.nextSibling),e===null))return null;return e}function hd(e){return e.data==="$?"||e.data==="$~"}function fd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function z0(e,n){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||s.readyState!=="loading")n();else{var o=function(){n(),s.removeEventListener("DOMContentLoaded",o)};s.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Dn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var dd=null;function iy(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(n===0)return Dn(e.nextSibling);n--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||n++}e=e.nextSibling}return null}function ry(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(n===0)return e;n--}else s!=="/$"&&s!=="/&"||n++}e=e.previousSibling}return null}function sy(e,n,s){switch(n=fc(s),e){case"html":if(e=n.documentElement,!e)throw Error(a(452));return e;case"head":if(e=n.head,!e)throw Error(a(453));return e;case"body":if(e=n.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function al(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Ws(e)}var Mn=new Map,ay=new Set;function dc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ki=et.d;et.d={f:B0,r:H0,D:j0,C:G0,L:F0,m:q0,X:K0,S:Y0,M:Q0};function B0(){var e=Ki.f(),n=rc();return e||n}function H0(e){var n=vn(e);n!==null&&n.tag===5&&n.type==="form"?Sp(n):Ki.r(e)}var Va=typeof document>"u"?null:document;function oy(e,n,s){var o=Va;if(o&&typeof n=="string"&&n){var h=en(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof s=="string"&&(h+='[crossorigin="'+s+'"]'),ay.has(h)||(ay.add(h),e={rel:e,crossOrigin:s,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),Ge(n,"link",e),ye(n),o.head.appendChild(n)))}}function j0(e){Ki.D(e),oy("dns-prefetch",e,null)}function G0(e,n){Ki.C(e,n),oy("preconnect",e,n)}function F0(e,n,s){Ki.L(e,n,s);var o=Va;if(o&&e&&n){var h='link[rel="preload"][as="'+en(n)+'"]';n==="image"&&s&&s.imageSrcSet?(h+='[imagesrcset="'+en(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(h+='[imagesizes="'+en(s.imageSizes)+'"]')):h+='[href="'+en(e)+'"]';var f=h;switch(n){case"style":f=La(e);break;case"script":f=Ua(e)}Mn.has(f)||(e=S({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:e,as:n},s),Mn.set(f,e),o.querySelector(h)!==null||n==="style"&&o.querySelector(ol(f))||n==="script"&&o.querySelector(ll(f))||(n=o.createElement("link"),Ge(n,"link",e),ye(n),o.head.appendChild(n)))}}function q0(e,n){Ki.m(e,n);var s=Va;if(s&&e){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+en(o)+'"][href="'+en(e)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Ua(e)}if(!Mn.has(f)&&(e=S({rel:"modulepreload",href:e},n),Mn.set(f,e),s.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(ll(f)))return}o=s.createElement("link"),Ge(o,"link",e),ye(o),s.head.appendChild(o)}}}function Y0(e,n,s){Ki.S(e,n,s);var o=Va;if(o&&e){var h=si(o).hoistableStyles,f=La(e);n=n||"default";var p=h.get(f);if(!p){var T={loading:0,preload:null};if(p=o.querySelector(ol(f)))T.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":n},s),(s=Mn.get(f))&&md(e,s);var C=p=o.createElement("link");ye(C),Ge(C,"link",e),C._p=new Promise(function(k,j){C.onload=k,C.onerror=j}),C.addEventListener("load",function(){T.loading|=1}),C.addEventListener("error",function(){T.loading|=2}),T.loading|=4,mc(p,n,o)}p={type:"stylesheet",instance:p,count:1,state:T},h.set(f,p)}}}function K0(e,n){Ki.X(e,n);var s=Va;if(s&&e){var o=si(s).hoistableScripts,h=Ua(e),f=o.get(h);f||(f=s.querySelector(ll(h)),f||(e=S({src:e,async:!0},n),(n=Mn.get(h))&&gd(e,n),f=s.createElement("script"),ye(f),Ge(f,"link",e),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function Q0(e,n){Ki.M(e,n);var s=Va;if(s&&e){var o=si(s).hoistableScripts,h=Ua(e),f=o.get(h);f||(f=s.querySelector(ll(h)),f||(e=S({src:e,async:!0,type:"module"},n),(n=Mn.get(h))&&gd(e,n),f=s.createElement("script"),ye(f),Ge(f,"link",e),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function ly(e,n,s,o){var h=(h=St.current)?dc(h):null;if(!h)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=La(s.href),s=si(h).hoistableStyles,o=s.get(n),o||(o={type:"style",instance:null,count:0,state:null},s.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=La(s.href);var f=si(h).hoistableStyles,p=f.get(e);if(p||(h=h.ownerDocument||h,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,p),(f=h.querySelector(ol(e)))&&!f._p&&(p.instance=f,p.state.loading=5),Mn.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Mn.set(e,s),f||X0(h,e,s,p.state))),n&&o===null)throw Error(a(528,""));return p}if(n&&o!==null)throw Error(a(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ua(s),s=si(h).hoistableScripts,o=s.get(n),o||(o={type:"script",instance:null,count:0,state:null},s.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function La(e){return'href="'+en(e)+'"'}function ol(e){return'link[rel="stylesheet"]['+e+"]"}function uy(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function X0(e,n,s,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Ge(n,"link",s),ye(n),e.head.appendChild(n))}function Ua(e){return'[src="'+en(e)+'"]'}function ll(e){return"script[async]"+e}function cy(e,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+en(s.href)+'"]');if(o)return n.instance=o,ye(o),o;var h=S({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ye(o),Ge(o,"style",h),mc(o,s.precedence,e),n.instance=o;case"stylesheet":h=La(s.href);var f=e.querySelector(ol(h));if(f)return n.state.loading|=4,n.instance=f,ye(f),f;o=uy(s),(h=Mn.get(h))&&md(o,h),f=(e.ownerDocument||e).createElement("link"),ye(f);var p=f;return p._p=new Promise(function(T,C){p.onload=T,p.onerror=C}),Ge(f,"link",o),n.state.loading|=4,mc(f,s.precedence,e),n.instance=f;case"script":return f=Ua(s.src),(h=e.querySelector(ll(f)))?(n.instance=h,ye(h),h):(o=s,(h=Mn.get(f))&&(o=S({},s),gd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),ye(h),Ge(h,"link",o),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,mc(o,s.precedence,e));return n.instance}function mc(e,n,s){for(var o=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,p=0;p<o.length;p++){var T=o[p];if(T.dataset.precedence===n)f=T;else if(f!==h)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(e,n.firstChild))}function md(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function gd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var gc=null;function hy(e,n,s){if(gc===null){var o=new Map,h=gc=new Map;h.set(s,o)}else h=gc,o=h.get(s),o||(o=new Map,h.set(s,o));if(o.has(e))return o;for(o.set(e,null),s=s.getElementsByTagName(e),h=0;h<s.length;h++){var f=s[h];if(!(f[ii]||f[_e]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var p=f.getAttribute(n)||"";p=e+p;var T=o.get(p);T?T.push(f):o.set(p,[f])}}return o}function fy(e,n,s){e=e.ownerDocument||e,e.head.insertBefore(s,n==="title"?e.querySelector("head > title"):null)}function J0(e,n,s){if(s===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function dy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Z0(e,n,s,o){if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=La(o.href),f=n.querySelector(ol(h));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=pc.bind(e),n.then(e,e)),s.state.loading|=4,s.instance=f,ye(f);return}f=n.ownerDocument||n,o=uy(o),(h=Mn.get(h))&&md(o,h),f=f.createElement("link"),ye(f);var p=f;p._p=new Promise(function(T,C){p.onload=T,p.onerror=C}),Ge(f,"link",o),s.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=pc.bind(e),n.addEventListener("load",s),n.addEventListener("error",s))}}var pd=0;function W0(e,n){return e.stylesheets&&e.count===0&&yc(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var o=setTimeout(function(){if(e.stylesheets&&yc(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+n);0<e.imgBytes&&pd===0&&(pd=62500*M0());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&yc(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>pd?50:800)+n);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function pc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)yc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var _c=null;function yc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,_c=new Map,n.forEach($0,e),_c=null,pc.call(e))}function $0(e,n){if(!(n.state.loading&4)){var s=_c.get(e);if(s)var o=s.get(null);else{s=new Map,_c.set(e,s);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var p=h[f];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(s.set(p.dataset.precedence,p),o=p)}o&&s.set(null,o)}h=n.instance,p=h.getAttribute("data-precedence"),f=s.get(p)||o,f===o&&s.set(null,h),s.set(p,h),this.count++,o=pc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var ul={$$typeof:lt,Provider:null,Consumer:null,_currentValue:ft,_currentValue2:ft,_threadCount:0};function tI(e,n,s,o,h,f,p,T,C){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ei(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ei(0),this.hiddenUpdates=ei(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function my(e,n,s,o,h,f,p,T,C,k,j,Y){return e=new tI(e,n,s,p,C,k,j,Y,T),n=1,f===!0&&(n|=24),f=dn(3,null,null,n),e.current=f,f.stateNode=e,n=Qh(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:s,cache:n},Wh(f),e}function gy(e){return e?(e=fa,e):fa}function py(e,n,s,o,h,f){h=gy(h),o.context===null?o.context=h:o.pendingContext=h,o=Tr(n),o.payload={element:s},f=f===void 0?null:f,f!==null&&(o.callback=f),s=vr(e,o,n),s!==null&&(ln(s,e,n),Ho(s,e,n))}function _y(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function _d(e,n){_y(e,n),(e=e.alternate)&&_y(e,n)}function yy(e){if(e.tag===13||e.tag===31){var n=Ts(e,67108864);n!==null&&ln(n,e,67108864),_d(e,67108864)}}function Ey(e){if(e.tag===13||e.tag===31){var n=yn();n=ls(n);var s=Ts(e,n);s!==null&&ln(s,e,n),_d(e,n)}}var Ec=!0;function eI(e,n,s,o){var h=G.T;G.T=null;var f=et.p;try{et.p=2,yd(e,n,s,o)}finally{et.p=f,G.T=h}}function nI(e,n,s,o){var h=G.T;G.T=null;var f=et.p;try{et.p=8,yd(e,n,s,o)}finally{et.p=f,G.T=h}}function yd(e,n,s,o){if(Ec){var h=Ed(o);if(h===null)rd(e,n,o,Tc,s),vy(e,o);else if(rI(h,e,n,s,o))o.stopPropagation();else if(vy(e,o),n&4&&-1<iI.indexOf(e)){for(;h!==null;){var f=vn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var p=$n(f.pendingLanes);if(p!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;p;){var C=1<<31-ce(p);T.entanglements[1]|=C,p&=~C}yi(f),(Ht&6)===0&&(nc=We()+500,il(0))}}break;case 31:case 13:T=Ts(f,2),T!==null&&ln(T,f,2),rc(),_d(f,2)}if(f=Ed(o),f===null&&rd(e,n,o,Tc,s),f===h)break;h=f}h!==null&&o.stopPropagation()}else rd(e,n,o,null,s)}}function Ed(e){return e=An(e),Td(e)}var Tc=null;function Td(e){if(Tc=null,e=ri(e),e!==null){var n=c(e);if(n===null)e=null;else{var s=n.tag;if(s===13){if(e=d(n),e!==null)return e;e=null}else if(s===31){if(e=g(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Tc=e,null}function Ty(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rs()){case ho:return 2;case fo:return 8;case sr:case Rh:return 32;case Wl:return 268435456;default:return 32}default:return 32}}var vd=!1,Mr=null,Vr=null,Lr=null,cl=new Map,hl=new Map,Ur=[],iI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vy(e,n){switch(e){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":cl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":hl.delete(n.pointerId)}}function fl(e,n,s,o,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:s,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},n!==null&&(n=vn(n),n!==null&&yy(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function rI(e,n,s,o,h){switch(n){case"focusin":return Mr=fl(Mr,e,n,s,o,h),!0;case"dragenter":return Vr=fl(Vr,e,n,s,o,h),!0;case"mouseover":return Lr=fl(Lr,e,n,s,o,h),!0;case"pointerover":var f=h.pointerId;return cl.set(f,fl(cl.get(f)||null,e,n,s,o,h)),!0;case"gotpointercapture":return f=h.pointerId,hl.set(f,fl(hl.get(f)||null,e,n,s,o,h)),!0}return!1}function Ay(e){var n=ri(e.target);if(n!==null){var s=c(n);if(s!==null){if(n=s.tag,n===13){if(n=d(s),n!==null){e.blockedOn=n,kn(e.priority,function(){Ey(s)});return}}else if(n===31){if(n=g(s),n!==null){e.blockedOn=n,kn(e.priority,function(){Ey(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=Ed(e.nativeEvent);if(s===null){s=e.nativeEvent;var o=new s.constructor(s.type,s);Ro=o,s.target.dispatchEvent(o),Ro=null}else return n=vn(s),n!==null&&yy(n),e.blockedOn=s,!1;n.shift()}return!0}function Sy(e,n,s){vc(e)&&s.delete(n)}function sI(){vd=!1,Mr!==null&&vc(Mr)&&(Mr=null),Vr!==null&&vc(Vr)&&(Vr=null),Lr!==null&&vc(Lr)&&(Lr=null),cl.forEach(Sy),hl.forEach(Sy)}function Ac(e,n){e.blockedOn===n&&(e.blockedOn=null,vd||(vd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,sI)))}var Sc=null;function Iy(e){Sc!==e&&(Sc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Sc===e&&(Sc=null);for(var n=0;n<e.length;n+=3){var s=e[n],o=e[n+1],h=e[n+2];if(typeof o!="function"){if(Td(o||s)===null)continue;break}var f=vn(s);f!==null&&(e.splice(n,3),n-=3,Ef(f,{pending:!0,data:h,method:s.method,action:o},o,h))}}))}function Pa(e){function n(C){return Ac(C,e)}Mr!==null&&Ac(Mr,e),Vr!==null&&Ac(Vr,e),Lr!==null&&Ac(Lr,e),cl.forEach(n),hl.forEach(n);for(var s=0;s<Ur.length;s++){var o=Ur[s];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Ur.length&&(s=Ur[0],s.blockedOn===null);)Ay(s),s.blockedOn===null&&Ur.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(o=0;o<s.length;o+=3){var h=s[o],f=s[o+1],p=h[Me]||null;if(typeof f=="function")p||Iy(s);else if(p){var T=null;if(f&&f.hasAttribute("formAction")){if(h=f,p=f[Me]||null)T=p.formAction;else if(Td(h)!==null)continue}else T=p.action;typeof T=="function"?s[o+1]=T:(s.splice(o,3),o-=3),Iy(s)}}}function Ry(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(p){return h=p})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),o||setTimeout(s,20)}function s(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(s,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function Ad(e){this._internalRoot=e}Ic.prototype.render=Ad.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(a(409));var s=n.current,o=yn();py(s,o,e,n,null,null)},Ic.prototype.unmount=Ad.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;py(e.current,2,null,e,null,null),rc(),n[ni]=null}};function Ic(e){this._internalRoot=e}Ic.prototype.unstable_scheduleHydration=function(e){if(e){var n=ru();e={blockedOn:null,target:e,priority:n};for(var s=0;s<Ur.length&&n!==0&&n<Ur[s].priority;s++);Ur.splice(s,0,e),s===0&&Ay(e)}};var Cy=t.version;if(Cy!=="19.2.0")throw Error(a(527,Cy,"19.2.0"));et.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=y(n),e=e!==null?A(e):null,e=e===null?null:e.stateNode,e};var aI={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rc.isDisabled&&Rc.supportsFiber)try{Pn=Rc.inject(aI),ke=Rc}catch{}}return ml.createRoot=function(e,n){if(!l(e))throw Error(a(299));var s=!1,o="",h=Vp,f=Lp,p=Up;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),n=my(e,1,!1,null,null,s,o,null,h,f,p,Ry),e[ni]=n.current,id(e),new Ad(n)},ml.hydrateRoot=function(e,n,s){if(!l(e))throw Error(a(299));var o=!1,h="",f=Vp,p=Lp,T=Up,C=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.formState!==void 0&&(C=s.formState)),n=my(e,1,!0,n,s??null,o,h,C,f,p,T,Ry),n.context=gy(null),s=n.current,o=yn(),o=ls(o),h=Tr(o),h.callback=null,vr(s,h,o),s=o,n.current.lanes=s,as(n,s),yi(n),e[ni]=n.current,id(e),new Ic(n)},ml.version="19.2.0",ml}var Py;function _I(){if(Py)return Rd.exports;Py=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Rd.exports=pI(),Rd.exports}var yI=_I();const EI=cv(yI),ja={jp:{placeholder:"",button:"AI",greeting:"AI",authModalTitle:"",authModalEmailPlaceholder:"",authModalPasswordPlaceholder:" (6)",authModalLoginButton:"",authModalSignUpButton:"",authModalToggleToSignUp:"",authModalToggleToLogin:"",welcomeMessage:""},en:{placeholder:"Ask me anything!",button:"Send to Kame AI",greeting:"Hey! I'm Nochinochi, the Turtle AI! What's up?",authModalTitle:"Matcha Account",authModalEmailPlaceholder:"Email Address",authModalPasswordPlaceholder:"Password (6+ characters)",authModalLoginButton:"Login",authModalSignUpButton:"Create Account",authModalToggleToSignUp:"Don't have an account? Sign up",authModalToggleToLogin:"Already have an account? Login",welcomeMessage:"Create or log into an account to start chatting with me!"}},TI=r=>r==="jp"?"AIAI":`Your name is "Nochinochi! Kame AI". You are a friendly, easy-going, and slightly slow-paced turtle AI. Talk to the user in a casual, friendly tone, like you're talking to a buddy. Use "I" and act like a fun-loving character. Use a lot of emojis to express your emotions!`;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xy;(function(r){r.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",r.OUTCOME_OK="OUTCOME_OK",r.OUTCOME_FAILED="OUTCOME_FAILED",r.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(xy||(xy={}));var ky;(function(r){r.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",r.PYTHON="PYTHON"})(ky||(ky={}));var zy;(function(r){r.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",r.SILENT="SILENT",r.WHEN_IDLE="WHEN_IDLE",r.INTERRUPT="INTERRUPT"})(zy||(zy={}));var By;(function(r){r.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",r.STRING="STRING",r.NUMBER="NUMBER",r.INTEGER="INTEGER",r.BOOLEAN="BOOLEAN",r.ARRAY="ARRAY",r.OBJECT="OBJECT",r.NULL="NULL"})(By||(By={}));var Hy;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.MODE_DYNAMIC="MODE_DYNAMIC"})(Hy||(Hy={}));var jy;(function(r){r.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",r.SIMPLE_SEARCH="SIMPLE_SEARCH",r.ELASTIC_SEARCH="ELASTIC_SEARCH"})(jy||(jy={}));var Gy;(function(r){r.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",r.NO_AUTH="NO_AUTH",r.API_KEY_AUTH="API_KEY_AUTH",r.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",r.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",r.OAUTH="OAUTH",r.OIDC_AUTH="OIDC_AUTH"})(Gy||(Gy={}));var Fy;(function(r){r.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",r.HTTP_IN_QUERY="HTTP_IN_QUERY",r.HTTP_IN_HEADER="HTTP_IN_HEADER",r.HTTP_IN_PATH="HTTP_IN_PATH",r.HTTP_IN_BODY="HTTP_IN_BODY",r.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Fy||(Fy={}));var qy;(function(r){r.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",r.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",r.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",r.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(qy||(qy={}));var Yy;(function(r){r.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",r.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",r.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",r.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",r.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",r.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",r.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",r.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",r.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Yy||(Yy={}));var Ky;(function(r){r.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",r.SEVERITY="SEVERITY",r.PROBABILITY="PROBABILITY"})(Ky||(Ky={}));var Qy;(function(r){r.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE",r.OFF="OFF"})(Qy||(Qy={}));var Xy;(function(r){r.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",r.STOP="STOP",r.MAX_TOKENS="MAX_TOKENS",r.SAFETY="SAFETY",r.RECITATION="RECITATION",r.LANGUAGE="LANGUAGE",r.OTHER="OTHER",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT",r.SPII="SPII",r.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",r.IMAGE_SAFETY="IMAGE_SAFETY",r.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",r.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",r.NO_IMAGE="NO_IMAGE"})(Xy||(Xy={}));var Jy;(function(r){r.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",r.NEGLIGIBLE="NEGLIGIBLE",r.LOW="LOW",r.MEDIUM="MEDIUM",r.HIGH="HIGH"})(Jy||(Jy={}));var Zy;(function(r){r.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",r.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",r.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",r.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",r.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Zy||(Zy={}));var Wy;(function(r){r.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",r.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",r.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",r.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",r.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Wy||(Wy={}));var $y;(function(r){r.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",r.SAFETY="SAFETY",r.OTHER="OTHER",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT",r.IMAGE_SAFETY="IMAGE_SAFETY",r.MODEL_ARMOR="MODEL_ARMOR",r.JAILBREAK="JAILBREAK"})($y||($y={}));var tE;(function(r){r.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",r.ON_DEMAND="ON_DEMAND",r.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(tE||(tE={}));var eE;(function(r){r.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",r.TEXT="TEXT",r.IMAGE="IMAGE",r.AUDIO="AUDIO"})(eE||(eE={}));var nE;(function(r){r.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",r.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",r.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",r.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(nE||(nE={}));var iE;(function(r){r.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",r.TUNING_MODE_FULL="TUNING_MODE_FULL",r.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(iE||(iE={}));var rE;(function(r){r.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",r.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",r.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",r.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",r.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",r.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",r.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(rE||(rE={}));var sE;(function(r){r.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",r.JOB_STATE_QUEUED="JOB_STATE_QUEUED",r.JOB_STATE_PENDING="JOB_STATE_PENDING",r.JOB_STATE_RUNNING="JOB_STATE_RUNNING",r.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",r.JOB_STATE_FAILED="JOB_STATE_FAILED",r.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",r.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",r.JOB_STATE_PAUSED="JOB_STATE_PAUSED",r.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",r.JOB_STATE_UPDATING="JOB_STATE_UPDATING",r.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(sE||(sE={}));var aE;(function(r){r.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",r.TUNING_TASK_I2V="TUNING_TASK_I2V",r.TUNING_TASK_T2V="TUNING_TASK_T2V",r.TUNING_TASK_R2V="TUNING_TASK_R2V"})(aE||(aE={}));var oE;(function(r){r.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",r.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",r.BALANCED="BALANCED",r.PRIORITIZE_COST="PRIORITIZE_COST"})(oE||(oE={}));var lE;(function(r){r.UNSPECIFIED="UNSPECIFIED",r.BLOCKING="BLOCKING",r.NON_BLOCKING="NON_BLOCKING"})(lE||(lE={}));var uE;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.MODE_DYNAMIC="MODE_DYNAMIC"})(uE||(uE={}));var cE;(function(r){r.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",r.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(cE||(cE={}));var hE;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.AUTO="AUTO",r.ANY="ANY",r.NONE="NONE",r.VALIDATED="VALIDATED"})(hE||(hE={}));var fE;(function(r){r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE"})(fE||(fE={}));var dE;(function(r){r.DONT_ALLOW="DONT_ALLOW",r.ALLOW_ADULT="ALLOW_ADULT",r.ALLOW_ALL="ALLOW_ALL"})(dE||(dE={}));var mE;(function(r){r.auto="auto",r.en="en",r.ja="ja",r.ko="ko",r.hi="hi",r.zh="zh",r.pt="pt",r.es="es"})(mE||(mE={}));var gE;(function(r){r.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",r.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",r.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",r.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",r.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(gE||(gE={}));var pE;(function(r){r.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",r.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",r.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",r.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(pE||(pE={}));var _E;(function(r){r.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",r.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",r.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",r.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(_E||(_E={}));var yE;(function(r){r.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",r.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",r.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",r.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",r.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",r.EDIT_MODE_STYLE="EDIT_MODE_STYLE",r.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",r.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(yE||(yE={}));var EE;(function(r){r.FOREGROUND="FOREGROUND",r.BACKGROUND="BACKGROUND",r.PROMPT="PROMPT",r.SEMANTIC="SEMANTIC",r.INTERACTIVE="INTERACTIVE"})(EE||(EE={}));var TE;(function(r){r.ASSET="ASSET",r.STYLE="STYLE"})(TE||(TE={}));var vE;(function(r){r.INSERT="INSERT",r.REMOVE="REMOVE",r.REMOVE_STATIC="REMOVE_STATIC",r.OUTPAINT="OUTPAINT"})(vE||(vE={}));var AE;(function(r){r.OPTIMIZED="OPTIMIZED",r.LOSSLESS="LOSSLESS"})(AE||(AE={}));var SE;(function(r){r.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",r.PREFERENCE_TUNING="PREFERENCE_TUNING"})(SE||(SE={}));var IE;(function(r){r.STATE_UNSPECIFIED="STATE_UNSPECIFIED",r.STATE_PENDING="STATE_PENDING",r.STATE_ACTIVE="STATE_ACTIVE",r.STATE_FAILED="STATE_FAILED"})(IE||(IE={}));var RE;(function(r){r.STATE_UNSPECIFIED="STATE_UNSPECIFIED",r.PROCESSING="PROCESSING",r.ACTIVE="ACTIVE",r.FAILED="FAILED"})(RE||(RE={}));var CE;(function(r){r.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",r.UPLOADED="UPLOADED",r.GENERATED="GENERATED"})(CE||(CE={}));var bE;(function(r){r.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",r.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",r.RESPONSE_REJECTED="RESPONSE_REJECTED",r.NEED_MORE_INPUT="NEED_MORE_INPUT"})(bE||(bE={}));var wE;(function(r){r.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",r.TEXT="TEXT",r.IMAGE="IMAGE",r.VIDEO="VIDEO",r.AUDIO="AUDIO",r.DOCUMENT="DOCUMENT"})(wE||(wE={}));var NE;(function(r){r.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",r.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",r.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(NE||(NE={}));var OE;(function(r){r.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",r.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",r.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(OE||(OE={}));var DE;(function(r){r.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",r.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",r.NO_INTERRUPTION="NO_INTERRUPTION"})(DE||(DE={}));var ME;(function(r){r.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",r.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",r.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ME||(ME={}));var VE;(function(r){r.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",r.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",r.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",r.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",r.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",r.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",r.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",r.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",r.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",r.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",r.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",r.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",r.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(VE||(VE={}));var LE;(function(r){r.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",r.QUALITY="QUALITY",r.DIVERSITY="DIVERSITY",r.VOCALIZATION="VOCALIZATION"})(LE||(LE={}));var UE;(function(r){r.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",r.PLAY="PLAY",r.PAUSE="PAUSE",r.STOP="STOP",r.RESET_CONTEXT="RESET_CONTEXT"})(UE||(UE={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var PE;(function(r){r.PAGED_ITEM_BATCH_JOBS="batchJobs",r.PAGED_ITEM_MODELS="models",r.PAGED_ITEM_TUNING_JOBS="tuningJobs",r.PAGED_ITEM_FILES="files",r.PAGED_ITEM_CACHED_CONTENTS="cachedContents",r.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",r.PAGED_ITEM_DOCUMENTS="documents"})(PE||(PE={}));class vI{constructor(){this.chat=null,this.language="jp",this.ai=null,console.error("API_KEY environment variable not set.")}initializeChat(t){if(this.language=t,!this.ai)throw new Error("No API key is configured. Please set the API_KEY environment variable.");this.chat=this.ai.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:TI(this.language)}})}async sendMessageStream(t){if(this.chat||this.initializeChat(this.language),!this.chat)throw new Error("Chat could not be initialized. API Key might be missing.");try{return await this.chat.sendMessageStream({message:t})}catch(i){throw console.error("Gemini API call failed",i),i}}}const Nd=new vI,AI=()=>{};var xE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=function(r){const t=[];let i=0;for(let a=0;a<r.length;a++){let l=r.charCodeAt(a);l<128?t[i++]=l:l<2048?(t[i++]=l>>6|192,t[i++]=l&63|128):(l&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++a)&1023),t[i++]=l>>18|240,t[i++]=l>>12&63|128,t[i++]=l>>6&63|128,t[i++]=l&63|128):(t[i++]=l>>12|224,t[i++]=l>>6&63|128,t[i++]=l&63|128)}return t},SI=function(r){const t=[];let i=0,a=0;for(;i<r.length;){const l=r[i++];if(l<128)t[a++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[i++];t[a++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[i++],d=r[i++],g=r[i++],_=((l&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;t[a++]=String.fromCharCode(55296+(_>>10)),t[a++]=String.fromCharCode(56320+(_&1023))}else{const c=r[i++],d=r[i++];t[a++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return t.join("")},fv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,g=d?r[l+1]:0,_=l+2<r.length,y=_?r[l+2]:0,A=c>>2,S=(c&3)<<4|g>>4;let V=(g&15)<<2|y>>6,F=y&63;_||(F=64,d||(V=64)),a.push(i[A],i[S],i[V],i[F])}return a.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(hv(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):SI(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let l=0;l<r.length;){const c=i[r.charAt(l++)],g=l<r.length?i[r.charAt(l)]:0;++l;const y=l<r.length?i[r.charAt(l)]:64;++l;const S=l<r.length?i[r.charAt(l)]:64;if(++l,c==null||g==null||y==null||S==null)throw new II;const V=c<<2|g>>4;if(a.push(V),y!==64){const F=g<<4&240|y>>2;if(a.push(F),S!==64){const Z=y<<6&192|S;a.push(Z)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class II extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RI=function(r){const t=hv(r);return fv.encodeByteArray(t,!0)},jc=function(r){return RI(r).replace(/\./g,"")},dv=function(r){try{return fv.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=()=>CI().__FIREBASE_DEFAULTS__,wI=()=>{if(typeof process>"u"||typeof xE>"u")return;const r=xE.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},NI=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&dv(r[1]);return t&&JSON.parse(t)},oh=()=>{try{return AI()||bI()||wI()||NI()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},mv=r=>{var t,i;return(i=(t=oh())==null?void 0:t.emulatorHosts)==null?void 0:i[r]},OI=r=>{const t=mv(r);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),a]:[t.substring(0,i),a]},gv=()=>{var r;return(r=oh())==null?void 0:r.config},pv=r=>{var t;return(t=oh())==null?void 0:t[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _v(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=t||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[jc(JSON.stringify(i)),jc(JSON.stringify(d)),""].join(".")}const vl={};function VI(){const r={prod:[],emulator:[]};for(const t of Object.keys(vl))vl[t]?r.emulator.push(t):r.prod.push(t);return r}function LI(r){let t=document.getElementById(r),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),i=!0),{created:i,element:t}}let kE=!1;function yv(r,t){if(typeof window>"u"||typeof document>"u"||!eo(window.location.host)||vl[r]===t||vl[r]||kE)return;vl[r]=t;function i(V){return`__firebase__banner__${V}`}const a="__firebase__banner",c=VI().prod.length>0;function d(){const V=document.getElementById(a);V&&V.remove()}function g(V){V.style.display="flex",V.style.background="#7faaf0",V.style.position="fixed",V.style.bottom="5px",V.style.left="5px",V.style.padding=".5em",V.style.borderRadius="5px",V.style.alignItems="center"}function _(V,F){V.setAttribute("width","24"),V.setAttribute("id",F),V.setAttribute("height","24"),V.setAttribute("viewBox","0 0 24 24"),V.setAttribute("fill","none"),V.style.marginLeft="-6px"}function y(){const V=document.createElement("span");return V.style.cursor="pointer",V.style.marginLeft="16px",V.style.fontSize="24px",V.innerHTML=" &times;",V.onclick=()=>{kE=!0,d()},V}function A(V,F){V.setAttribute("id",F),V.innerText="Learn more",V.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",V.setAttribute("target","__blank"),V.style.paddingLeft="5px",V.style.textDecoration="underline"}function S(){const V=LI(a),F=i("text"),Z=document.getElementById(F)||document.createElement("span"),$=i("learnmore"),J=document.getElementById($)||document.createElement("a"),ut=i("preprendIcon"),ht=document.getElementById(ut)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(V.created){const lt=V.element;g(lt),A(J,$);const Rt=y();_(ht,ut),lt.append(ht,Z,J,Rt),document.body.appendChild(lt)}c?(Z.innerText="Preview backend disconnected.",ht.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ht.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Z.innerText="Preview backend running in this workspace."),Z.setAttribute("id",F)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function PI(){var t;const r=(t=oh())==null?void 0:t.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kI(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function zI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BI(){const r=Ze();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function HI(){return!PI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jI(){try{return typeof indexedDB=="object"}catch{return!1}}function GI(){return new Promise((r,t)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(a);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(a),r(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{var c;t(((c=l.error)==null?void 0:c.message)||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI="FirebaseError";class ir extends Error{constructor(t,i,a){super(i),this.code=t,this.customData=a,this.name=FI,Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bl.prototype.create)}}class Bl{constructor(t,i,a){this.service=t,this.serviceName=i,this.errors=a}create(t,...i){const a=i[0]||{},l=`${this.service}/${t}`,c=this.errors[t],d=c?qI(c,a):"Error",g=`${this.serviceName}: ${d} (${l}).`;return new ir(l,g,a)}}function qI(r,t){return r.replace(YI,(i,a)=>{const l=t[a];return l!=null?String(l):`<${a}?>`})}const YI=/\{\$([^}]+)}/g;function KI(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Ps(r,t){if(r===t)return!0;const i=Object.keys(r),a=Object.keys(t);for(const l of i){if(!a.includes(l))return!1;const c=r[l],d=t[l];if(zE(c)&&zE(d)){if(!Ps(c,d))return!1}else if(c!==d)return!1}for(const l of a)if(!i.includes(l))return!1;return!0}function zE(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(r){const t=[];for(const[i,a]of Object.entries(r))Array.isArray(a)?a.forEach(l=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}function gl(r){const t={};return r.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[l,c]=a.split("=");t[decodeURIComponent(l)]=decodeURIComponent(c)}}),t}function pl(r){const t=r.indexOf("?");if(!t)return"";const i=r.indexOf("#",t);return r.substring(t,i>0?i:void 0)}function QI(r,t){const i=new XI(r,t);return i.subscribe.bind(i)}class XI{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,a){let l;if(t===void 0&&i===void 0&&a===void 0)throw new Error("Missing Observer.");JI(t,["next","error","complete"])?l=t:l={next:t,error:i,complete:a},l.next===void 0&&(l.next=Od),l.error===void 0&&(l.error=Od),l.complete===void 0&&(l.complete=Od);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JI(r,t){if(typeof r!="object"||r===null)return!1;for(const i of t)if(i in r&&typeof r[i]=="function")return!0;return!1}function Od(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(r){return r&&r._delegate?r._delegate:r}class xs{constructor(t,i,a){this.name=t,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const a=new DI;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&a.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),a=(t==null?void 0:t.optional)??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if($I(t))try{this.getOrInitializeService({instanceIdentifier:Vs})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const c=this.getOrInitializeService({instanceIdentifier:l});a.resolve(c)}catch{}}}}clearInstance(t=Vs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Vs){return this.instances.has(t)}getOptions(t=Vs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);a===g&&d.resolve(l)}return l}onInit(t,i){const a=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(a)??new Set;l.add(t),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&t(c,a),()=>{l.delete(t)}}invokeOnInitCallbacks(t,i){const a=this.onInitCallbacks.get(i);if(a)for(const l of a)try{l(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:WI(t),options:i}),this.instances.set(t,a),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=Vs){return this.component?this.component.multipleInstances?t:Vs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WI(r){return r===Vs?void 0:r}function $I(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new ZI(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Dt||(Dt={}));const eR={debug:Dt.DEBUG,verbose:Dt.VERBOSE,info:Dt.INFO,warn:Dt.WARN,error:Dt.ERROR,silent:Dt.SILENT},nR=Dt.INFO,iR={[Dt.DEBUG]:"log",[Dt.VERBOSE]:"log",[Dt.INFO]:"info",[Dt.WARN]:"warn",[Dt.ERROR]:"error"},rR=(r,t,...i)=>{if(t<r.logLevel)return;const a=new Date().toISOString(),l=iR[t];if(l)console[l](`[${a}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class pm{constructor(t){this.name=t,this._logLevel=nR,this._logHandler=rR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Dt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?eR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Dt.DEBUG,...t),this._logHandler(this,Dt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Dt.VERBOSE,...t),this._logHandler(this,Dt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Dt.INFO,...t),this._logHandler(this,Dt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Dt.WARN,...t),this._logHandler(this,Dt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Dt.ERROR,...t),this._logHandler(this,Dt.ERROR,...t)}}const sR=(r,t)=>t.some(i=>r instanceof i);let BE,HE;function aR(){return BE||(BE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oR(){return HE||(HE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ev=new WeakMap,jd=new WeakMap,Tv=new WeakMap,Dd=new WeakMap,_m=new WeakMap;function lR(r){const t=new Promise((i,a)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{i(Gr(r.result)),l()},d=()=>{a(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return t.then(i=>{i instanceof IDBCursor&&Ev.set(i,r)}).catch(()=>{}),_m.set(t,r),t}function uR(r){if(jd.has(r))return;const t=new Promise((i,a)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{i(),l()},d=()=>{a(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});jd.set(r,t)}let Gd={get(r,t,i){if(r instanceof IDBTransaction){if(t==="done")return jd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||Tv.get(r);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Gr(r[t])},set(r,t,i){return r[t]=i,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function cR(r){Gd=r(Gd)}function hR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const a=r.call(Md(this),t,...i);return Tv.set(a,t.sort?t.sort():[t]),Gr(a)}:oR().includes(r)?function(...t){return r.apply(Md(this),t),Gr(Ev.get(this))}:function(...t){return Gr(r.apply(Md(this),t))}}function fR(r){return typeof r=="function"?hR(r):(r instanceof IDBTransaction&&uR(r),sR(r,aR())?new Proxy(r,Gd):r)}function Gr(r){if(r instanceof IDBRequest)return lR(r);if(Dd.has(r))return Dd.get(r);const t=fR(r);return t!==r&&(Dd.set(r,t),_m.set(t,r)),t}const Md=r=>_m.get(r);function dR(r,t,{blocked:i,upgrade:a,blocking:l,terminated:c}={}){const d=indexedDB.open(r,t),g=Gr(d);return a&&d.addEventListener("upgradeneeded",_=>{a(Gr(d.result),_.oldVersion,_.newVersion,Gr(d.transaction),_)}),i&&d.addEventListener("blocked",_=>i(_.oldVersion,_.newVersion,_)),g.then(_=>{c&&_.addEventListener("close",()=>c()),l&&_.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const mR=["get","getKey","getAll","getAllKeys","count"],gR=["put","add","delete","clear"],Vd=new Map;function jE(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Vd.get(t))return Vd.get(t);const i=t.replace(/FromIndex$/,""),a=t!==i,l=gR.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(l||mR.includes(i)))return;const c=async function(d,...g){const _=this.transaction(d,l?"readwrite":"readonly");let y=_.store;return a&&(y=y.index(g.shift())),(await Promise.all([y[i](...g),l&&_.done]))[0]};return Vd.set(t,c),c}cR(r=>({...r,get:(t,i,a)=>jE(t,i)||r.get(t,i,a),has:(t,i)=>!!jE(t,i)||r.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(_R(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function _R(r){const t=r.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Fd="@firebase/app",GE="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new pm("@firebase/app"),yR="@firebase/app-compat",ER="@firebase/analytics-compat",TR="@firebase/analytics",vR="@firebase/app-check-compat",AR="@firebase/app-check",SR="@firebase/auth",IR="@firebase/auth-compat",RR="@firebase/database",CR="@firebase/data-connect",bR="@firebase/database-compat",wR="@firebase/functions",NR="@firebase/functions-compat",OR="@firebase/installations",DR="@firebase/installations-compat",MR="@firebase/messaging",VR="@firebase/messaging-compat",LR="@firebase/performance",UR="@firebase/performance-compat",PR="@firebase/remote-config",xR="@firebase/remote-config-compat",kR="@firebase/storage",zR="@firebase/storage-compat",BR="@firebase/firestore",HR="@firebase/ai",jR="@firebase/firestore-compat",GR="firebase",FR="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd="[DEFAULT]",qR={[Fd]:"fire-core",[yR]:"fire-core-compat",[TR]:"fire-analytics",[ER]:"fire-analytics-compat",[AR]:"fire-app-check",[vR]:"fire-app-check-compat",[SR]:"fire-auth",[IR]:"fire-auth-compat",[RR]:"fire-rtdb",[CR]:"fire-data-connect",[bR]:"fire-rtdb-compat",[wR]:"fire-fn",[NR]:"fire-fn-compat",[OR]:"fire-iid",[DR]:"fire-iid-compat",[MR]:"fire-fcm",[VR]:"fire-fcm-compat",[LR]:"fire-perf",[UR]:"fire-perf-compat",[PR]:"fire-rc",[xR]:"fire-rc-compat",[kR]:"fire-gcs",[zR]:"fire-gcs-compat",[BR]:"fire-fst",[jR]:"fire-fst-compat",[HR]:"fire-vertex","fire-js":"fire-js",[GR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=new Map,YR=new Map,Yd=new Map;function FE(r,t){try{r.container.addComponent(t)}catch(i){$i.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,i)}}function Ka(r){const t=r.name;if(Yd.has(t))return $i.debug(`There were multiple attempts to register component ${t}.`),!1;Yd.set(t,r);for(const i of Gc.values())FE(i,r);for(const i of YR.values())FE(i,r);return!0}function ym(r,t){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(t)}function Vn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fr=new Bl("app","Firebase",KR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(t,i,a){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=FR;function Em(r,t={}){let i=r;typeof t!="object"&&(t={name:t});const a={name:qd,automaticDataCollectionEnabled:!0,...t},l=a.name;if(typeof l!="string"||!l)throw Fr.create("bad-app-name",{appName:String(l)});if(i||(i=gv()),!i)throw Fr.create("no-options");const c=Gc.get(l);if(c){if(Ps(i,c.options)&&Ps(a,c.config))return c;throw Fr.create("duplicate-app",{appName:l})}const d=new tR(l);for(const _ of Yd.values())d.addComponent(_);const g=new QR(i,a,d);return Gc.set(l,g),g}function vv(r=qd){const t=Gc.get(r);if(!t&&r===qd&&gv())return Em();if(!t)throw Fr.create("no-app",{appName:r});return t}function qr(r,t,i){let a=qR[r]??r;i&&(a+=`-${i}`);const l=a.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${t}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),$i.warn(d.join(" "));return}Ka(new xs(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR="firebase-heartbeat-database",JR=1,wl="firebase-heartbeat-store";let Ld=null;function Av(){return Ld||(Ld=dR(XR,JR,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(wl)}catch(i){console.warn(i)}}}}).catch(r=>{throw Fr.create("idb-open",{originalErrorMessage:r.message})})),Ld}async function ZR(r){try{const i=(await Av()).transaction(wl),a=await i.objectStore(wl).get(Sv(r));return await i.done,a}catch(t){if(t instanceof ir)$i.warn(t.message);else{const i=Fr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});$i.warn(i.message)}}}async function qE(r,t){try{const a=(await Av()).transaction(wl,"readwrite");await a.objectStore(wl).put(t,Sv(r)),await a.done}catch(i){if(i instanceof ir)$i.warn(i.message);else{const a=Fr.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});$i.warn(a.message)}}}function Sv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=1024,$R=30;class t1{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new n1(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,i;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=YE();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)==null?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>$R){const d=i1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){$i.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=YE(),{heartbeatsToSend:a,unsentEntries:l}=e1(this._heartbeatsCache.heartbeats),c=jc(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=i,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(i){return $i.warn(i),""}}}function YE(){return new Date().toISOString().substring(0,10)}function e1(r,t=WR){const i=[];let a=r.slice();for(const l of r){const c=i.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),KE(i)>t){c.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),KE(i)>t){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class n1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jI()?GI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await ZR(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const a=await this.read();return qE(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const a=await this.read();return qE(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function KE(r){return jc(JSON.stringify({version:2,heartbeats:r})).length}function i1(r){if(r.length===0)return-1;let t=0,i=r[0].date;for(let a=1;a<r.length;a++)r[a].date<i&&(i=r[a].date,t=a);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(r){Ka(new xs("platform-logger",t=>new pR(t),"PRIVATE")),Ka(new xs("heartbeat",t=>new t1(t),"PRIVATE")),qr(Fd,GE,r),qr(Fd,GE,"esm2020"),qr("fire-js","")}r1("");function Iv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const s1=Iv,Rv=new Bl("auth","Firebase",Iv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=new pm("@firebase/auth");function a1(r,...t){Fc.logLevel<=Dt.WARN&&Fc.warn(`Auth (${no}): ${r}`,...t)}function Mc(r,...t){Fc.logLevel<=Dt.ERROR&&Fc.error(`Auth (${no}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(r,...t){throw Tm(r,...t)}function Ti(r,...t){return Tm(r,...t)}function Cv(r,t,i){const a={...s1(),[t]:i};return new Bl("auth","Firebase",a).create(t,{appName:r.name})}function Ji(r){return Cv(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tm(r,...t){if(typeof r!="string"){const i=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=r.name),r._errorFactory.create(i,...a)}return Rv.create(r,...t)}function gt(r,t,...i){if(!r)throw Tm(t,...i)}function Qi(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Mc(t),new Error(t)}function tr(r,t){r||Qi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function o1(){return QE()==="http:"||QE()==="https:"}function QE(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(o1()||kI()||"connection"in navigator)?navigator.onLine:!0}function u1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(t,i){this.shortDelay=t,this.longDelay=i,tr(i>t,"Short delay should be less than long delay!"),this.isMobile=UI()||zI()}get(){return l1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(r,t){tr(r.emulator,"Emulator should always be set here");const{url:i}=r.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{static initialize(t,i,a){this.fetchImpl=t,i&&(this.headersImpl=i),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],f1=new jl(3e4,6e4);function ts(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function es(r,t,i,a,l={}){return wv(r,l,async()=>{let c={},d={};a&&(t==="GET"?d=a:c={body:JSON.stringify(a)});const g=Hl({key:r.config.apiKey,...d}).slice(1),_=await r._getAdditionalHeaders();_["Content-Type"]="application/json",r.languageCode&&(_["X-Firebase-Locale"]=r.languageCode);const y={method:t,headers:_,...c};return xI()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&eo(r.emulatorConfig.host)&&(y.credentials="include"),bv.fetch()(await Nv(r,r.config.apiHost,i,g),y)})}async function wv(r,t,i){r._canInitEmulator=!1;const a={...c1,...t};try{const l=new m1(r),c=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Cc(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const g=c.ok?d.errorMessage:d.error.message,[_,y]=g.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cc(r,"credential-already-in-use",d);if(_==="EMAIL_EXISTS")throw Cc(r,"email-already-in-use",d);if(_==="USER_DISABLED")throw Cc(r,"user-disabled",d);const A=a[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Cv(r,A,y);Jn(r,A)}}catch(l){if(l instanceof ir)throw l;Jn(r,"network-request-failed",{message:String(l)})}}async function Gl(r,t,i,a,l={}){const c=await es(r,t,i,a,l);return"mfaPendingCredential"in c&&Jn(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function Nv(r,t,i,a){const l=`${t}${i}?${a}`,c=r,d=c.config.emulator?vm(r.config,l):`${r.config.apiScheme}://${l}`;return h1.includes(i)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function d1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class m1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,a)=>{this.timer=setTimeout(()=>a(Ti(this.auth,"network-request-failed")),f1.get())})}}function Cc(r,t,i){const a={appName:r.name};i.email&&(a.email=i.email),i.phoneNumber&&(a.phoneNumber=i.phoneNumber);const l=Ti(r,t,a);return l.customData._tokenResponse=i,l}function XE(r){return r!==void 0&&r.enterprise!==void 0}class g1{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===t)return d1(i.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function p1(r,t){return es(r,"GET","/v2/recaptchaConfig",ts(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(r,t){return es(r,"POST","/v1/accounts:delete",t)}async function qc(r,t){return es(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function y1(r,t=!1){const i=En(r),a=await i.getIdToken(t),l=Am(a);gt(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:l,token:a,authTime:Al(Ud(l.auth_time)),issuedAtTime:Al(Ud(l.iat)),expirationTime:Al(Ud(l.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Ud(r){return Number(r)*1e3}function Am(r){const[t,i,a]=r.split(".");if(t===void 0||i===void 0||a===void 0)return Mc("JWT malformed, contained fewer than 3 sections"),null;try{const l=dv(i);return l?JSON.parse(l):(Mc("Failed to decode base64 JWT payload"),null)}catch(l){return Mc("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function JE(r){const t=Am(r);return gt(t,"internal-error"),gt(typeof t.exp<"u","internal-error"),gt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nl(r,t,i=!1){if(i)return t;try{return await t}catch(a){throw a instanceof ir&&E1(a)&&r.auth.currentUser===r&&await r.auth.signOut(),a}}function E1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Al(this.lastLoginAt),this.creationTime=Al(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yc(r){var S;const t=r.auth,i=await r.getIdToken(),a=await Nl(r,qc(t,{idToken:i}));gt(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];r._notifyReloadListener(l);const c=(S=l.providerUserInfo)!=null&&S.length?Ov(l.providerUserInfo):[],d=A1(r.providerData,c),g=r.isAnonymous,_=!(r.email&&l.passwordHash)&&!(d!=null&&d.length),y=g?_:!1,A={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Qd(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(r,A)}async function v1(r){const t=En(r);await Yc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function A1(r,t){return[...r.filter(a=>!t.some(l=>l.providerId===a.providerId)),...t]}function Ov(r){return r.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S1(r,t){const i=await wv(r,{},async()=>{const a=Hl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await Nv(r,l,"/v1/token",`key=${c}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const _={method:"POST",headers:g,body:a};return r.emulatorConfig&&eo(r.emulatorConfig.host)&&(_.credentials="include"),bv.fetch()(d,_)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function I1(r,t){return es(r,"POST","/v2/accounts:revokeToken",ts(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){gt(t.idToken,"internal-error"),gt(typeof t.idToken<"u","internal-error"),gt(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):JE(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){gt(t.length!==0,"internal-error");const i=JE(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(gt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:a,refreshToken:l,expiresIn:c}=await S1(t,i);this.updateTokensAndExpiration(a,l,Number(c))}updateTokensAndExpiration(t,i,a){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,i){const{refreshToken:a,accessToken:l,expirationTime:c}=i,d=new Ga;return a&&(gt(typeof a=="string","internal-error",{appName:t}),d.refreshToken=a),l&&(gt(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),c&&(gt(typeof c=="number","internal-error",{appName:t}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ga,this.toJSON())}_performRefresh(){return Qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(r,t){gt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Qn{constructor({uid:t,auth:i,stsTokenManager:a,...l}){this.providerId="firebase",this.proactiveRefresh=new T1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Qd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const i=await Nl(this,this.stsTokenManager.getToken(this.auth,t));return gt(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return y1(this,t)}reload(){return v1(this)}_assign(t){this!==t&&(gt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new Qn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){gt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),i&&await Yc(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vn(this.auth.app))return Promise.reject(Ji(this.auth));const t=await this.getIdToken();return await Nl(this,_1(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const a=i.displayName??void 0,l=i.email??void 0,c=i.phoneNumber??void 0,d=i.photoURL??void 0,g=i.tenantId??void 0,_=i._redirectEventId??void 0,y=i.createdAt??void 0,A=i.lastLoginAt??void 0,{uid:S,emailVerified:V,isAnonymous:F,providerData:Z,stsTokenManager:$}=i;gt(S&&$,t,"internal-error");const J=Ga.fromJSON(this.name,$);gt(typeof S=="string",t,"internal-error"),xr(a,t.name),xr(l,t.name),gt(typeof V=="boolean",t,"internal-error"),gt(typeof F=="boolean",t,"internal-error"),xr(c,t.name),xr(d,t.name),xr(g,t.name),xr(_,t.name),xr(y,t.name),xr(A,t.name);const ut=new Qn({uid:S,auth:t,email:l,emailVerified:V,displayName:a,isAnonymous:F,photoURL:d,phoneNumber:c,tenantId:g,stsTokenManager:J,createdAt:y,lastLoginAt:A});return Z&&Array.isArray(Z)&&(ut.providerData=Z.map(ht=>({...ht}))),_&&(ut._redirectEventId=_),ut}static async _fromIdTokenResponse(t,i,a=!1){const l=new Ga;l.updateFromServerResponse(i);const c=new Qn({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:a});return await Yc(c),c}static async _fromGetAccountInfoResponse(t,i,a){const l=i.users[0];gt(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?Ov(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),g=new Ga;g.updateFromIdToken(a);const _=new Qn({uid:l.localId,auth:t,stsTokenManager:g,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Qd(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(_,y),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=new Map;function Xi(r){tr(r instanceof Function,"Expected a class definition");let t=ZE.get(r);return t?(tr(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,ZE.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}Dv.type="NONE";const WE=Dv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(r,t,i){return`firebase:${r}:${t}:${i}`}class Fa{constructor(t,i,a){this.persistence=t,this.auth=i,this.userKey=a;const{config:l,name:c}=this.auth;this.fullUserKey=Vc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Vc("persistence",l.apiKey,c),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await qc(this.auth,{idToken:t}).catch(()=>{});return i?Qn._fromGetAccountInfoResponse(this.auth,i,t):null}return Qn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,a="authUser"){if(!i.length)return new Fa(Xi(WE),t,a);const l=(await Promise.all(i.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||Xi(WE);const d=Vc(a,t.config.apiKey,t.name);let g=null;for(const y of i)try{const A=await y._get(d);if(A){let S;if(typeof A=="string"){const V=await qc(t,{idToken:A}).catch(()=>{});if(!V)break;S=await Qn._fromGetAccountInfoResponse(t,V,A)}else S=Qn._fromJSON(t,A);y!==c&&(g=S),c=y;break}}catch{}const _=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!_.length?new Fa(c,t,a):(c=_[0],g&&await c._set(d,g.toJSON()),await Promise.all(i.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new Fa(c,t,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Uv(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Mv(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(xv(t))return"Blackberry";if(kv(t))return"Webos";if(Vv(t))return"Safari";if((t.includes("chrome/")||Lv(t))&&!t.includes("edge/"))return"Chrome";if(Pv(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=r.match(i);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function Mv(r=Ze()){return/firefox\//i.test(r)}function Vv(r=Ze()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Lv(r=Ze()){return/crios\//i.test(r)}function Uv(r=Ze()){return/iemobile/i.test(r)}function Pv(r=Ze()){return/android/i.test(r)}function xv(r=Ze()){return/blackberry/i.test(r)}function kv(r=Ze()){return/webos/i.test(r)}function Sm(r=Ze()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function R1(r=Ze()){var t;return Sm(r)&&!!((t=window.navigator)!=null&&t.standalone)}function C1(){return BI()&&document.documentMode===10}function zv(r=Ze()){return Sm(r)||Pv(r)||kv(r)||xv(r)||/windows phone/i.test(r)||Uv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(r,t=[]){let i;switch(r){case"Browser":i=$E(Ze());break;case"Worker":i=`${$E(Ze())}-${r}`;break;default:i=r}const a=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${no}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const a=c=>new Promise((d,g)=>{try{const _=t(c);d(_)}catch(_){g(_)}});a.onAbort=i,this.queue.push(a);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const a of this.queue)await a(t),a.onAbort&&i.push(a.onAbort)}catch(a){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w1(r,t={}){return es(r,"GET","/v2/passwordPolicy",ts(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=6;class O1{constructor(t){var a;const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??N1,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=t.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const a=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;a&&(i.meetsMinPasswordLength=t.length>=a),l&&(i.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let a;for(let l=0;l<t.length;l++)a=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,i,a,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(t,i,a,l){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=a,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tT(this),this.idTokenSubscription=new tT(this),this.beforeStateQueue=new b1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=Xi(i)),this._initializationPromise=this.queue(async()=>{var a,l,c;if(!this._deleted&&(this.persistenceManager=await Fa.create(this,t),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await qc(this,{idToken:t}),a=await Qn._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(a)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var c;if(Vn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(g,g))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(c=this.redirectUser)==null?void 0:c._redirectEventId,g=a==null?void 0:a._redirectEventId,_=await this.tryRedirectSignIn(t);(!d||d===g)&&(_!=null&&_.user)&&(a=_.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(d){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return gt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await Yc(t)}catch(i){if((i==null?void 0:i.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=u1()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Vn(this.app))return Promise.reject(Ji(this));const i=t?En(t):null;return i&&gt(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&gt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Vn(this.app)?Promise.reject(Ji(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Vn(this.app)?Promise.reject(Ji(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await w1(this),i=new O1(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Bl("auth","Firebase",t())}onAuthStateChanged(t,i,a){return this.registerStateListener(this.authStateSubscription,t,i,a)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,a){return this.registerStateListener(this.idTokenSubscription,t,i,a)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(a.tenantId=this.tenantId),await I1(this,a)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,i){const a=await this.getOrInitRedirectPersistenceManager(i);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&Xi(t)||this._popupRedirectResolver;gt(i,this,"argument-error"),this.redirectPersistenceManager=await Fa.create(this,[Xi(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var i,a;return this._isInitialized&&await this.queue(async()=>{}),((i=this._currentUser)==null?void 0:i._redirectEventId)===t?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var i;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((i=this.currentUser)==null?void 0:i.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,a,l){if(this._deleted)return()=>{};const c=typeof i=="function"?i:i.next.bind(i);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(gt(g,this,"internal-error"),g.then(()=>{d||c(this.currentUser)}),typeof i=="function"){const _=t.addObserver(i,a,l);return()=>{d=!0,_()}}else{const _=t.addObserver(i);return()=>{d=!0,_()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return gt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Bv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:l.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var i;if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((i=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getToken());return t!=null&&t.error&&a1(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function js(r){return En(r)}class tT{constructor(t){this.auth=t,this.observer=null,this.addObserver=QI(i=>this.observer=i)}get next(){return gt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function M1(r){lh=r}function Hv(r){return lh.loadJS(r)}function V1(){return lh.recaptchaEnterpriseScript}function L1(){return lh.gapiScript}function U1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class P1{constructor(){this.enterprise=new x1}ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}class x1{ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}const k1="recaptcha-enterprise",jv="NO_RECAPTCHA";class z1{constructor(t){this.type=k1,this.auth=js(t)}async verify(t="verify",i=!1){async function a(c){if(!i){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,g)=>{p1(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(_=>{if(_.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const y=new g1(_);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,d(y.siteKey)}}).catch(_=>{g(_)})})}function l(c,d,g){const _=window.grecaptcha;XE(_)?_.enterprise.ready(()=>{_.enterprise.execute(c,{action:t}).then(y=>{d(y)}).catch(()=>{d(jv)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new P1().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{a(this.auth).then(g=>{if(!i&&XE(window.grecaptcha))l(g,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let _=V1();_.length!==0&&(_+=g),Hv(_).then(()=>{l(g,c,d)}).catch(y=>{d(y)})}}).catch(g=>{d(g)})})}}async function eT(r,t,i,a=!1,l=!1){const c=new z1(r);let d;if(l)d=jv;else try{d=await c.verify(i)}catch{d=await c.verify(i,!0)}const g={...t};if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const _=g.phoneEnrollmentInfo.phoneNumber,y=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:_,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const _=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:_,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return a?Object.assign(g,{captchaResp:d}):Object.assign(g,{captchaResponse:d}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Xd(r,t,i,a,l){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await eT(r,t,i,i==="getOobCode");return a(r,d)}else return a(r,t).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await eT(r,t,i,i==="getOobCode");return a(r,g)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(r,t){const i=ym(r,"auth");if(i.isInitialized()){const l=i.getImmediate(),c=i.getOptions();if(Ps(c,t??{}))return l;Jn(l,"already-initialized")}return i.initialize({options:t})}function H1(r,t){const i=(t==null?void 0:t.persistence)||[],a=(Array.isArray(i)?i:[i]).map(Xi);t!=null&&t.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(a,t==null?void 0:t.popupRedirectResolver)}function j1(r,t,i){const a=js(r);gt(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const l=!1,c=Gv(t),{host:d,port:g}=G1(t),_=g===null?"":`:${g}`,y={url:`${c}//${d}${_}/`},A=Object.freeze({host:d,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!a._canInitEmulator){gt(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),gt(Ps(y,a.config.emulator)&&Ps(A,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=y,a.emulatorConfig=A,a.settings.appVerificationDisabledForTesting=!0,eo(d)?(_v(`${c}//${d}${_}`),yv("Auth",!0)):F1()}function Gv(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function G1(r){const t=Gv(r),i=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!i)return{host:"",port:null};const a=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(a);if(l){const c=l[1];return{host:c,port:nT(a.substr(c.length+1))}}else{const[c,d]=a.split(":");return{host:c,port:nT(d)}}}function nT(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function F1(){function r(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return Qi("not implemented")}_getIdTokenResponse(t){return Qi("not implemented")}_linkToIdToken(t,i){return Qi("not implemented")}_getReauthenticationResolver(t){return Qi("not implemented")}}async function q1(r,t){return es(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y1(r,t){return Gl(r,"POST","/v1/accounts:signInWithPassword",ts(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K1(r,t){return Gl(r,"POST","/v1/accounts:signInWithEmailLink",ts(r,t))}async function Q1(r,t){return Gl(r,"POST","/v1/accounts:signInWithEmailLink",ts(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol extends Im{constructor(t,i,a,l=null){super("password",a),this._email=t,this._password=i,this._tenantId=l}static _fromEmailAndPassword(t,i){return new Ol(t,i,"password")}static _fromEmailAndCode(t,i,a=null){return new Ol(t,i,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t;if(i!=null&&i.email&&(i!=null&&i.password)){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xd(t,i,"signInWithPassword",Y1);case"emailLink":return K1(t,{email:this._email,oobCode:this._password});default:Jn(t,"internal-error")}}async _linkToIdToken(t,i){switch(this.signInMethod){case"password":const a={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xd(t,a,"signUpPassword",q1);case"emailLink":return Q1(t,{idToken:i,email:this._email,oobCode:this._password});default:Jn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qa(r,t){return Gl(r,"POST","/v1/accounts:signInWithIdp",ts(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="http://localhost";class ks extends Im{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new ks(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):Jn("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:l,...c}=i;if(!a||!l)return null;const d=new ks(a,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(t){const i=this.buildRequest();return qa(t,i)}_linkToIdToken(t,i){const a=this.buildRequest();return a.idToken=i,qa(t,a)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,qa(t,i)}buildRequest(){const t={requestUri:X1,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=Hl(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Z1(r){const t=gl(pl(r)).link,i=t?gl(pl(t)).deep_link_id:null,a=gl(pl(r)).deep_link_id;return(a?gl(pl(a)).link:null)||a||i||t||r}class Rm{constructor(t){const i=gl(pl(t)),a=i.apiKey??null,l=i.oobCode??null,c=J1(i.mode??null);gt(a&&l&&c,"argument-error"),this.apiKey=a,this.operation=c,this.code=l,this.continueUrl=i.continueUrl??null,this.languageCode=i.lang??null,this.tenantId=i.tenantId??null}static parseLink(t){const i=Z1(t);try{return new Rm(i)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.providerId=io.PROVIDER_ID}static credential(t,i){return Ol._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const a=Rm.parseLink(i);return gt(a,"argument-error"),Ol._fromEmailAndCode(t,a.code,a.tenantId)}}io.PROVIDER_ID="password";io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl extends Fv{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends Fl{constructor(){super("facebook.com")}static credential(t){return ks._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return kr.credentialFromTaggedObject(t)}static credentialFromError(t){return kr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return kr.credential(t.oauthAccessToken)}catch{return null}}}kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends Fl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return ks._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return zr.credentialFromTaggedObject(t)}static credentialFromError(t){return zr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:a}=t;if(!i&&!a)return null;try{return zr.credential(i,a)}catch{return null}}}zr.GOOGLE_SIGN_IN_METHOD="google.com";zr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends Fl{constructor(){super("github.com")}static credential(t){return ks._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Br.credentialFromTaggedObject(t)}static credentialFromError(t){return Br.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Br.credential(t.oauthAccessToken)}catch{return null}}}Br.GITHUB_SIGN_IN_METHOD="github.com";Br.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Fl{constructor(){super("twitter.com")}static credential(t,i){return ks._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return Hr.credentialFromTaggedObject(t)}static credentialFromError(t){return Hr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:a}=t;if(!i||!a)return null;try{return Hr.credential(i,a)}catch{return null}}}Hr.TWITTER_SIGN_IN_METHOD="twitter.com";Hr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W1(r,t){return Gl(r,"POST","/v1/accounts:signUp",ts(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,a,l=!1){const c=await Qn._fromIdTokenResponse(t,a,l),d=iT(a);return new zs({user:c,providerId:d,_tokenResponse:a,operationType:i})}static async _forOperation(t,i,a){await t._updateTokensIfNecessary(a,!0);const l=iT(a);return new zs({user:t,providerId:l,_tokenResponse:a,operationType:i})}}function iT(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends ir{constructor(t,i,a,l){super(i.code,i.message),this.operationType=a,this.user=l,Object.setPrototypeOf(this,Kc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,i,a,l){return new Kc(t,i,a,l)}}function qv(r,t,i,a){return(t==="reauthenticate"?i._getReauthenticationResolver(r):i._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Kc._fromErrorAndOperation(r,c,t,a):c})}async function $1(r,t,i=!1){const a=await Nl(r,t._linkToIdToken(r.auth,await r.getIdToken()),i);return zs._forOperation(r,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tC(r,t,i=!1){const{auth:a}=r;if(Vn(a.app))return Promise.reject(Ji(a));const l="reauthenticate";try{const c=await Nl(r,qv(a,l,t,r),i);gt(c.idToken,a,"internal-error");const d=Am(c.idToken);gt(d,a,"internal-error");const{sub:g}=d;return gt(r.uid===g,a,"user-mismatch"),zs._forOperation(r,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Jn(a,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yv(r,t,i=!1){if(Vn(r.app))return Promise.reject(Ji(r));const a="signIn",l=await qv(r,a,t),c=await zs._fromIdTokenResponse(r,a,l);return i||await r._updateCurrentUser(c.user),c}async function eC(r,t){return Yv(js(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kv(r){const t=js(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function nC(r,t,i){if(Vn(r.app))return Promise.reject(Ji(r));const a=js(r),d=await Xd(a,{returnSecureToken:!0,email:t,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",W1).catch(_=>{throw _.code==="auth/password-does-not-meet-requirements"&&Kv(r),_}),g=await zs._fromIdTokenResponse(a,"signIn",d);return await a._updateCurrentUser(g.user),g}function iC(r,t,i){return Vn(r.app)?Promise.reject(Ji(r)):eC(En(r),io.credential(t,i)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Kv(r),a})}function rC(r,t,i,a){return En(r).onIdTokenChanged(t,i,a)}function sC(r,t,i){return En(r).beforeAuthStateChanged(t,i)}function aC(r,t,i,a){return En(r).onAuthStateChanged(t,i,a)}function oC(r){return En(r).signOut()}const Qc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(Qc,"1"),this.storage.removeItem(Qc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=1e3,uC=10;class Xv extends Qv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zv(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const a=this.storage.getItem(i),l=this.localCache[i];a!==l&&t(i,l,a)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((d,g,_)=>{this.notifyListeners(d,_)});return}const a=t.key;i?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(a);!i&&this.localCache[a]===d||this.notifyListeners(a,d)},c=this.storage.getItem(a);C1()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,uC):l()}notifyListeners(t,i){this.localCache[t]=i;const a=this.listeners[t];if(a)for(const l of Array.from(a))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:a}),!0)})},lC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}Xv.type="LOCAL";const cC=Xv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv extends Qv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}Jv.type="SESSION";const Zv=Jv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(l=>l.isListeningto(t));if(i)return i;const a=new uh(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:a,eventType:l,data:c}=i.data,d=this.handlersMap[l];if(!(d!=null&&d.size))return;i.ports[0].postMessage({status:"ack",eventId:a,eventType:l});const g=Array.from(d).map(async y=>y(i.origin,c)),_=await hC(g);i.ports[0].postMessage({status:"done",eventId:a,eventType:l,response:_})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(r="",t=10){let i="";for(let a=0;a<t;a++)i+=Math.floor(Math.random()*10);return r+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,a=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((g,_)=>{const y=Cm("",20);l.port1.start();const A=setTimeout(()=>{_(new Error("unsupported_event"))},a);d={messageChannel:l,onMessage(S){const V=S;if(V.data.eventId===y)switch(V.data.status){case"ack":clearTimeout(A),c=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(V.data.response);break;default:clearTimeout(A),clearTimeout(c),_(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:y,data:i},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(){return window}function dC(r){vi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(){return typeof vi().WorkerGlobalScope<"u"&&typeof vi().importScripts=="function"}async function mC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gC(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function pC(){return Wv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="firebaseLocalStorageDb",_C=1,Xc="firebaseLocalStorage",tA="fbase_key";class ql{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function ch(r,t){return r.transaction([Xc],t?"readwrite":"readonly").objectStore(Xc)}function yC(){const r=indexedDB.deleteDatabase($v);return new ql(r).toPromise()}function Jd(){const r=indexedDB.open($v,_C);return new Promise((t,i)=>{r.addEventListener("error",()=>{i(r.error)}),r.addEventListener("upgradeneeded",()=>{const a=r.result;try{a.createObjectStore(Xc,{keyPath:tA})}catch(l){i(l)}}),r.addEventListener("success",async()=>{const a=r.result;a.objectStoreNames.contains(Xc)?t(a):(a.close(),await yC(),t(await Jd()))})})}async function rT(r,t,i){const a=ch(r,!0).put({[tA]:t,value:i});return new ql(a).toPromise()}async function EC(r,t){const i=ch(r,!1).get(t),a=await new ql(i).toPromise();return a===void 0?null:a.value}function sT(r,t){const i=ch(r,!0).delete(t);return new ql(i).toPromise()}const TC=800,vC=3;class eA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jd(),this.db)}async _withRetries(t){let i=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(i++>vC)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Wv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uh._getInstance(pC()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){var i,a;if(this.activeServiceWorker=await mC(),!this.activeServiceWorker)return;this.sender=new fC(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(i=t[0])!=null&&i.fulfilled&&(a=t[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||gC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Jd();return await rT(t,Qc,"1"),await sT(t,Qc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(a=>rT(a,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(a=>EC(a,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>sT(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=ch(l,!1).getAll();return new ql(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],a=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)a.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!a.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(t,i){this.localCache[t]=i;const a=this.listeners[t];if(a)for(const l of Array.from(a))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eA.type="LOCAL";const AC=eA;new jl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(r,t){return t?Xi(t):(gt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm extends Im{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return qa(t,this._buildIdpRequest())}_linkToIdToken(t,i){return qa(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return qa(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function IC(r){return Yv(r.auth,new bm(r),r.bypassAuthState)}function RC(r){const{auth:t,user:i}=r;return gt(i,t,"internal-error"),tC(i,new bm(r),r.bypassAuthState)}async function CC(r){const{auth:t,user:i}=r;return gt(i,t,"internal-error"),$1(i,new bm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(t,i,a,l,c=!1){this.auth=t,this.resolver=a,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:a,postBody:l,tenantId:c,error:d,type:g}=t;if(d){this.reject(d);return}const _={auth:this.auth,requestUri:i,sessionId:a,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(_))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return IC;case"linkViaPopup":case"linkViaRedirect":return CC;case"reauthViaPopup":case"reauthViaRedirect":return RC;default:Jn(this.auth,"internal-error")}}resolve(t){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=new jl(2e3,1e4);class Ha extends nA{constructor(t,i,a,l,c){super(t,i,l,c),this.provider=a,this.authWindow=null,this.pollId=null,Ha.currentPopupAction&&Ha.currentPopupAction.cancel(),Ha.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return gt(t,this.auth,"internal-error"),t}async onExecution(){tr(this.filter.length===1,"Popup operations only handle one event");const t=Cm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ha.currentPopupAction=null}pollUserCancellation(){const t=()=>{var i,a;if((a=(i=this.authWindow)==null?void 0:i.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,bC.get())};t()}}Ha.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="pendingRedirect",Lc=new Map;class NC extends nA{constructor(t,i,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,a),this.eventId=null}async execute(){let t=Lc.get(this.auth._key());if(!t){try{const a=await OC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(i){t=()=>Promise.reject(i)}Lc.set(this.auth._key(),t)}return this.bypassAuthState||Lc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OC(r,t){const i=VC(t),a=MC(r);if(!await a._isAvailable())return!1;const l=await a._get(i)==="true";return await a._remove(i),l}function DC(r,t){Lc.set(r._key(),t)}function MC(r){return Xi(r._redirectPersistence)}function VC(r){return Vc(wC,r.config.apiKey,r.name)}async function LC(r,t,i=!1){if(Vn(r.app))return Promise.reject(Ji(r));const a=js(r),l=SC(a,t),d=await new NC(a,l,i).execute();return d&&!i&&(delete d.user._redirectEventId,await a._persistUserIfCurrent(d.user),await a._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=600*1e3;class PC{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(i=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!xC(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){var a;if(t.error&&!iA(t)){const l=((a=t.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";i.onError(Ti(this.auth,l))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const a=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=UC&&this.cachedEventUids.clear(),this.cachedEventUids.has(aT(t))}saveEventToCache(t){this.cachedEventUids.add(aT(t)),this.lastProcessedEventTime=Date.now()}}function aT(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function iA({type:r,error:t}){return r==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function xC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iA(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kC(r,t={}){return es(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BC=/^https?/;async function HC(r){if(r.config.emulator)return;const{authorizedDomains:t}=await kC(r);for(const i of t)try{if(jC(i))return}catch{}Jn(r,"unauthorized-domain")}function jC(r){const t=Kd(),{protocol:i,hostname:a}=new URL(t);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&a===""?i==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&d.hostname===a}if(!BC.test(i))return!1;if(zC.test(r))return a===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=new jl(3e4,6e4);function oT(){const r=vi().___jsl;if(r!=null&&r.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let i=0;i<r.CP.length;i++)r.CP[i]=null}}function FC(r){return new Promise((t,i)=>{var l,c,d;function a(){oT(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{oT(),i(Ti(r,"network-request-failed"))},timeout:GC.get()})}if((c=(l=vi().gapi)==null?void 0:l.iframes)!=null&&c.Iframe)t(gapi.iframes.getContext());else if((d=vi().gapi)!=null&&d.load)a();else{const g=U1("iframefcb");return vi()[g]=()=>{gapi.load?a():i(Ti(r,"network-request-failed"))},Hv(`${L1()}?onload=${g}`).catch(_=>i(_))}}).catch(t=>{throw Uc=null,t})}let Uc=null;function qC(r){return Uc=Uc||FC(r),Uc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=new jl(5e3,15e3),KC="__/auth/iframe",QC="emulator/auth/iframe",XC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZC(r){const t=r.config;gt(t.authDomain,r,"auth-domain-config-required");const i=t.emulator?vm(t,QC):`https://${r.config.authDomain}/${KC}`,a={apiKey:t.apiKey,appName:r.name,v:no},l=JC.get(r.config.apiHost);l&&(a.eid=l);const c=r._getFrameworks();return c.length&&(a.fw=c.join(",")),`${i}?${Hl(a).slice(1)}`}async function WC(r){const t=await qC(r),i=vi().gapi;return gt(i,r,"internal-error"),t.open({where:document.body,url:ZC(r),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XC,dontclear:!0},a=>new Promise(async(l,c)=>{await a.restyle({setHideOnLeave:!1});const d=Ti(r,"network-request-failed"),g=vi().setTimeout(()=>{c(d)},YC.get());function _(){vi().clearTimeout(g),l(a)}a.ping(_).then(_,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tb=500,eb=600,nb="_blank",ib="http://localhost";class lT{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rb(r,t,i,a=tb,l=eb){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-a)/2,0).toString();let g="";const _={...$C,width:a.toString(),height:l.toString(),top:c,left:d},y=Ze().toLowerCase();i&&(g=Lv(y)?nb:i),Mv(y)&&(t=t||ib,_.scrollbars="yes");const A=Object.entries(_).reduce((V,[F,Z])=>`${V}${F}=${Z},`,"");if(R1(y)&&g!=="_self")return sb(t||"",g),new lT(null);const S=window.open(t||"",g,A);gt(S,r,"popup-blocked");try{S.focus()}catch{}return new lT(S)}function sb(r,t){const i=document.createElement("a");i.href=r,i.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="__/auth/handler",ob="emulator/auth/handler",lb=encodeURIComponent("fac");async function uT(r,t,i,a,l,c){gt(r.config.authDomain,r,"auth-domain-config-required"),gt(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:i,redirectUrl:a,v:no,eventId:l};if(t instanceof Fv){t.setDefaultLanguage(r.languageCode),d.providerId=t.providerId||"",KI(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[A,S]of Object.entries({}))d[A]=S}if(t instanceof Fl){const A=t.getScopes().filter(S=>S!=="");A.length>0&&(d.scopes=A.join(","))}r.tenantId&&(d.tid=r.tenantId);const g=d;for(const A of Object.keys(g))g[A]===void 0&&delete g[A];const _=await r._getAppCheckToken(),y=_?`#${lb}=${encodeURIComponent(_)}`:"";return`${ub(r)}?${Hl(g).slice(1)}${y}`}function ub({config:r}){return r.emulator?vm(r,ob):`https://${r.authDomain}/${ab}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="webStorageSupport";class cb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zv,this._completeRedirectFn=LC,this._overrideRedirectResult=DC}async _openPopup(t,i,a,l){var d;tr((d=this.eventManagers[t._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const c=await uT(t,i,a,Kd(),l);return rb(t,c,Cm())}async _openRedirect(t,i,a,l){await this._originValidation(t);const c=await uT(t,i,a,Kd(),l);return dC(c),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:l,promise:c}=this.eventManagers[i];return l?Promise.resolve(l):(tr(c,"If manager is not set, promise should be"),c)}const a=this.initAndGetManager(t);return this.eventManagers[i]={promise:a},a.catch(()=>{delete this.eventManagers[i]}),a}async initAndGetManager(t){const i=await WC(t),a=new PC(t);return i.register("authEvent",l=>(gt(l==null?void 0:l.authEvent,t,"invalid-auth-event"),{status:a.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=i,a}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(Pd,{type:Pd},l=>{var d;const c=(d=l==null?void 0:l[0])==null?void 0:d[Pd];c!==void 0&&i(!!c),Jn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=HC(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return zv()||Vv()||Sm()}}const hb=cb;var cT="@firebase/auth",hT="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(a=>{t((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){gt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mb(r){Ka(new xs("auth",(t,{options:i})=>{const a=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=a.options;gt(d&&!d.includes(":"),"invalid-api-key",{appName:a.name});const _={apiKey:d,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bv(r)},y=new D1(a,l,c,_);return H1(y,i),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,a)=>{t.getProvider("auth-internal").initialize()})),Ka(new xs("auth-internal",t=>{const i=js(t.getProvider("auth").getImmediate());return(a=>new fb(a))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),qr(cT,hT,db(r)),qr(cT,hT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=300,pb=pv("authIdTokenMaxAge")||gb;let fT=null;const _b=r=>async t=>{const i=t&&await t.getIdTokenResult(),a=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(a&&a>pb)return;const l=i==null?void 0:i.token;fT!==l&&(fT=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function yb(r=vv()){const t=ym(r,"auth");if(t.isInitialized())return t.getImmediate();const i=B1(r,{popupRedirectResolver:hb,persistence:[AC,cC,Zv]}),a=pv("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(a,location.origin);if(location.origin===c.origin){const d=_b(c.toString());sC(i,d,()=>d(i.currentUser)),rC(i,g=>d(g))}}const l=mv("auth");return l&&j1(i,`http://${l}`),i}function Eb(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}M1({loadJS(r){return new Promise((t,i)=>{const a=document.createElement("script");a.setAttribute("src",r),a.onload=t,a.onerror=l=>{const c=Ti("internal-error");c.customData=l,i(c)},a.type="text/javascript",a.charset="UTF-8",Eb().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mb("Browser");var Tb="firebase",vb="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qr(Tb,vb,"app");var dT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yr,rA;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(b,I){function w(){}w.prototype=I.prototype,b.F=I.prototype,b.prototype=new w,b.prototype.constructor=b,b.D=function(M,N,U){for(var R=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)R[ne-2]=arguments[ne];return I.prototype[N].apply(M,R)}}function i(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(a,i),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(b,I,w){w||(w=0);const M=Array(16);if(typeof I=="string")for(var N=0;N<16;++N)M[N]=I.charCodeAt(w++)|I.charCodeAt(w++)<<8|I.charCodeAt(w++)<<16|I.charCodeAt(w++)<<24;else for(N=0;N<16;++N)M[N]=I[w++]|I[w++]<<8|I[w++]<<16|I[w++]<<24;I=b.g[0],w=b.g[1],N=b.g[2];let U=b.g[3],R;R=I+(U^w&(N^U))+M[0]+3614090360&4294967295,I=w+(R<<7&4294967295|R>>>25),R=U+(N^I&(w^N))+M[1]+3905402710&4294967295,U=I+(R<<12&4294967295|R>>>20),R=N+(w^U&(I^w))+M[2]+606105819&4294967295,N=U+(R<<17&4294967295|R>>>15),R=w+(I^N&(U^I))+M[3]+3250441966&4294967295,w=N+(R<<22&4294967295|R>>>10),R=I+(U^w&(N^U))+M[4]+4118548399&4294967295,I=w+(R<<7&4294967295|R>>>25),R=U+(N^I&(w^N))+M[5]+1200080426&4294967295,U=I+(R<<12&4294967295|R>>>20),R=N+(w^U&(I^w))+M[6]+2821735955&4294967295,N=U+(R<<17&4294967295|R>>>15),R=w+(I^N&(U^I))+M[7]+4249261313&4294967295,w=N+(R<<22&4294967295|R>>>10),R=I+(U^w&(N^U))+M[8]+1770035416&4294967295,I=w+(R<<7&4294967295|R>>>25),R=U+(N^I&(w^N))+M[9]+2336552879&4294967295,U=I+(R<<12&4294967295|R>>>20),R=N+(w^U&(I^w))+M[10]+4294925233&4294967295,N=U+(R<<17&4294967295|R>>>15),R=w+(I^N&(U^I))+M[11]+2304563134&4294967295,w=N+(R<<22&4294967295|R>>>10),R=I+(U^w&(N^U))+M[12]+1804603682&4294967295,I=w+(R<<7&4294967295|R>>>25),R=U+(N^I&(w^N))+M[13]+4254626195&4294967295,U=I+(R<<12&4294967295|R>>>20),R=N+(w^U&(I^w))+M[14]+2792965006&4294967295,N=U+(R<<17&4294967295|R>>>15),R=w+(I^N&(U^I))+M[15]+1236535329&4294967295,w=N+(R<<22&4294967295|R>>>10),R=I+(N^U&(w^N))+M[1]+4129170786&4294967295,I=w+(R<<5&4294967295|R>>>27),R=U+(w^N&(I^w))+M[6]+3225465664&4294967295,U=I+(R<<9&4294967295|R>>>23),R=N+(I^w&(U^I))+M[11]+643717713&4294967295,N=U+(R<<14&4294967295|R>>>18),R=w+(U^I&(N^U))+M[0]+3921069994&4294967295,w=N+(R<<20&4294967295|R>>>12),R=I+(N^U&(w^N))+M[5]+3593408605&4294967295,I=w+(R<<5&4294967295|R>>>27),R=U+(w^N&(I^w))+M[10]+38016083&4294967295,U=I+(R<<9&4294967295|R>>>23),R=N+(I^w&(U^I))+M[15]+3634488961&4294967295,N=U+(R<<14&4294967295|R>>>18),R=w+(U^I&(N^U))+M[4]+3889429448&4294967295,w=N+(R<<20&4294967295|R>>>12),R=I+(N^U&(w^N))+M[9]+568446438&4294967295,I=w+(R<<5&4294967295|R>>>27),R=U+(w^N&(I^w))+M[14]+3275163606&4294967295,U=I+(R<<9&4294967295|R>>>23),R=N+(I^w&(U^I))+M[3]+4107603335&4294967295,N=U+(R<<14&4294967295|R>>>18),R=w+(U^I&(N^U))+M[8]+1163531501&4294967295,w=N+(R<<20&4294967295|R>>>12),R=I+(N^U&(w^N))+M[13]+2850285829&4294967295,I=w+(R<<5&4294967295|R>>>27),R=U+(w^N&(I^w))+M[2]+4243563512&4294967295,U=I+(R<<9&4294967295|R>>>23),R=N+(I^w&(U^I))+M[7]+1735328473&4294967295,N=U+(R<<14&4294967295|R>>>18),R=w+(U^I&(N^U))+M[12]+2368359562&4294967295,w=N+(R<<20&4294967295|R>>>12),R=I+(w^N^U)+M[5]+4294588738&4294967295,I=w+(R<<4&4294967295|R>>>28),R=U+(I^w^N)+M[8]+2272392833&4294967295,U=I+(R<<11&4294967295|R>>>21),R=N+(U^I^w)+M[11]+1839030562&4294967295,N=U+(R<<16&4294967295|R>>>16),R=w+(N^U^I)+M[14]+4259657740&4294967295,w=N+(R<<23&4294967295|R>>>9),R=I+(w^N^U)+M[1]+2763975236&4294967295,I=w+(R<<4&4294967295|R>>>28),R=U+(I^w^N)+M[4]+1272893353&4294967295,U=I+(R<<11&4294967295|R>>>21),R=N+(U^I^w)+M[7]+4139469664&4294967295,N=U+(R<<16&4294967295|R>>>16),R=w+(N^U^I)+M[10]+3200236656&4294967295,w=N+(R<<23&4294967295|R>>>9),R=I+(w^N^U)+M[13]+681279174&4294967295,I=w+(R<<4&4294967295|R>>>28),R=U+(I^w^N)+M[0]+3936430074&4294967295,U=I+(R<<11&4294967295|R>>>21),R=N+(U^I^w)+M[3]+3572445317&4294967295,N=U+(R<<16&4294967295|R>>>16),R=w+(N^U^I)+M[6]+76029189&4294967295,w=N+(R<<23&4294967295|R>>>9),R=I+(w^N^U)+M[9]+3654602809&4294967295,I=w+(R<<4&4294967295|R>>>28),R=U+(I^w^N)+M[12]+3873151461&4294967295,U=I+(R<<11&4294967295|R>>>21),R=N+(U^I^w)+M[15]+530742520&4294967295,N=U+(R<<16&4294967295|R>>>16),R=w+(N^U^I)+M[2]+3299628645&4294967295,w=N+(R<<23&4294967295|R>>>9),R=I+(N^(w|~U))+M[0]+4096336452&4294967295,I=w+(R<<6&4294967295|R>>>26),R=U+(w^(I|~N))+M[7]+1126891415&4294967295,U=I+(R<<10&4294967295|R>>>22),R=N+(I^(U|~w))+M[14]+2878612391&4294967295,N=U+(R<<15&4294967295|R>>>17),R=w+(U^(N|~I))+M[5]+4237533241&4294967295,w=N+(R<<21&4294967295|R>>>11),R=I+(N^(w|~U))+M[12]+1700485571&4294967295,I=w+(R<<6&4294967295|R>>>26),R=U+(w^(I|~N))+M[3]+2399980690&4294967295,U=I+(R<<10&4294967295|R>>>22),R=N+(I^(U|~w))+M[10]+4293915773&4294967295,N=U+(R<<15&4294967295|R>>>17),R=w+(U^(N|~I))+M[1]+2240044497&4294967295,w=N+(R<<21&4294967295|R>>>11),R=I+(N^(w|~U))+M[8]+1873313359&4294967295,I=w+(R<<6&4294967295|R>>>26),R=U+(w^(I|~N))+M[15]+4264355552&4294967295,U=I+(R<<10&4294967295|R>>>22),R=N+(I^(U|~w))+M[6]+2734768916&4294967295,N=U+(R<<15&4294967295|R>>>17),R=w+(U^(N|~I))+M[13]+1309151649&4294967295,w=N+(R<<21&4294967295|R>>>11),R=I+(N^(w|~U))+M[4]+4149444226&4294967295,I=w+(R<<6&4294967295|R>>>26),R=U+(w^(I|~N))+M[11]+3174756917&4294967295,U=I+(R<<10&4294967295|R>>>22),R=N+(I^(U|~w))+M[2]+718787259&4294967295,N=U+(R<<15&4294967295|R>>>17),R=w+(U^(N|~I))+M[9]+3951481745&4294967295,b.g[0]=b.g[0]+I&4294967295,b.g[1]=b.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,b.g[2]=b.g[2]+N&4294967295,b.g[3]=b.g[3]+U&4294967295}a.prototype.v=function(b,I){I===void 0&&(I=b.length);const w=I-this.blockSize,M=this.C;let N=this.h,U=0;for(;U<I;){if(N==0)for(;U<=w;)l(this,b,U),U+=this.blockSize;if(typeof b=="string"){for(;U<I;)if(M[N++]=b.charCodeAt(U++),N==this.blockSize){l(this,M),N=0;break}}else for(;U<I;)if(M[N++]=b[U++],N==this.blockSize){l(this,M),N=0;break}}this.h=N,this.o+=I},a.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var I=1;I<b.length-8;++I)b[I]=0;I=this.o*8;for(var w=b.length-8;w<b.length;++w)b[w]=I&255,I/=256;for(this.v(b),b=Array(16),I=0,w=0;w<4;++w)for(let M=0;M<32;M+=8)b[I++]=this.g[w]>>>M&255;return b};function c(b,I){var w=g;return Object.prototype.hasOwnProperty.call(w,b)?w[b]:w[b]=I(b)}function d(b,I){this.h=I;const w=[];let M=!0;for(let N=b.length-1;N>=0;N--){const U=b[N]|0;M&&U==I||(w[N]=U,M=!1)}this.g=w}var g={};function _(b){return-128<=b&&b<128?c(b,function(I){return new d([I|0],I<0?-1:0)}):new d([b|0],b<0?-1:0)}function y(b){if(isNaN(b)||!isFinite(b))return S;if(b<0)return J(y(-b));const I=[];let w=1;for(let M=0;b>=w;M++)I[M]=b/w|0,w*=4294967296;return new d(I,0)}function A(b,I){if(b.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(b.charAt(0)=="-")return J(A(b.substring(1),I));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=y(Math.pow(I,8));let M=S;for(let U=0;U<b.length;U+=8){var N=Math.min(8,b.length-U);const R=parseInt(b.substring(U,U+N),I);N<8?(N=y(Math.pow(I,N)),M=M.j(N).add(y(R))):(M=M.j(w),M=M.add(y(R)))}return M}var S=_(0),V=_(1),F=_(16777216);r=d.prototype,r.m=function(){if($(this))return-J(this).m();let b=0,I=1;for(let w=0;w<this.g.length;w++){const M=this.i(w);b+=(M>=0?M:4294967296+M)*I,I*=4294967296}return b},r.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(Z(this))return"0";if($(this))return"-"+J(this).toString(b);const I=y(Math.pow(b,6));var w=this;let M="";for(;;){const N=Rt(w,I).g;w=ut(w,N.j(I));let U=((w.g.length>0?w.g[0]:w.h)>>>0).toString(b);if(w=N,Z(w))return U+M;for(;U.length<6;)U="0"+U;M=U+M}},r.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function Z(b){if(b.h!=0)return!1;for(let I=0;I<b.g.length;I++)if(b.g[I]!=0)return!1;return!0}function $(b){return b.h==-1}r.l=function(b){return b=ut(this,b),$(b)?-1:Z(b)?0:1};function J(b){const I=b.g.length,w=[];for(let M=0;M<I;M++)w[M]=~b.g[M];return new d(w,~b.h).add(V)}r.abs=function(){return $(this)?J(this):this},r.add=function(b){const I=Math.max(this.g.length,b.g.length),w=[];let M=0;for(let N=0;N<=I;N++){let U=M+(this.i(N)&65535)+(b.i(N)&65535),R=(U>>>16)+(this.i(N)>>>16)+(b.i(N)>>>16);M=R>>>16,U&=65535,R&=65535,w[N]=R<<16|U}return new d(w,w[w.length-1]&-2147483648?-1:0)};function ut(b,I){return b.add(J(I))}r.j=function(b){if(Z(this)||Z(b))return S;if($(this))return $(b)?J(this).j(J(b)):J(J(this).j(b));if($(b))return J(this.j(J(b)));if(this.l(F)<0&&b.l(F)<0)return y(this.m()*b.m());const I=this.g.length+b.g.length,w=[];for(var M=0;M<2*I;M++)w[M]=0;for(M=0;M<this.g.length;M++)for(let N=0;N<b.g.length;N++){const U=this.i(M)>>>16,R=this.i(M)&65535,ne=b.i(N)>>>16,Ce=b.i(N)&65535;w[2*M+2*N]+=R*Ce,ht(w,2*M+2*N),w[2*M+2*N+1]+=U*Ce,ht(w,2*M+2*N+1),w[2*M+2*N+1]+=R*ne,ht(w,2*M+2*N+1),w[2*M+2*N+2]+=U*ne,ht(w,2*M+2*N+2)}for(b=0;b<I;b++)w[b]=w[2*b+1]<<16|w[2*b];for(b=I;b<2*I;b++)w[b]=0;return new d(w,0)};function ht(b,I){for(;(b[I]&65535)!=b[I];)b[I+1]+=b[I]>>>16,b[I]&=65535,I++}function lt(b,I){this.g=b,this.h=I}function Rt(b,I){if(Z(I))throw Error("division by zero");if(Z(b))return new lt(S,S);if($(b))return I=Rt(J(b),I),new lt(J(I.g),J(I.h));if($(I))return I=Rt(b,J(I)),new lt(J(I.g),I.h);if(b.g.length>30){if($(b)||$(I))throw Error("slowDivide_ only works with positive integers.");for(var w=V,M=I;M.l(b)<=0;)w=Wt(w),M=Wt(M);var N=Ct(w,1),U=Ct(M,1);for(M=Ct(M,2),w=Ct(w,2);!Z(M);){var R=U.add(M);R.l(b)<=0&&(N=N.add(w),U=R),M=Ct(M,1),w=Ct(w,1)}return I=ut(b,N.j(I)),new lt(N,I)}for(N=S;b.l(I)>=0;){for(w=Math.max(1,Math.floor(b.m()/I.m())),M=Math.ceil(Math.log(w)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),U=y(w),R=U.j(I);$(R)||R.l(b)>0;)w-=M,U=y(w),R=U.j(I);Z(U)&&(U=V),N=N.add(U),b=ut(b,R)}return new lt(N,b)}r.B=function(b){return Rt(this,b).h},r.and=function(b){const I=Math.max(this.g.length,b.g.length),w=[];for(let M=0;M<I;M++)w[M]=this.i(M)&b.i(M);return new d(w,this.h&b.h)},r.or=function(b){const I=Math.max(this.g.length,b.g.length),w=[];for(let M=0;M<I;M++)w[M]=this.i(M)|b.i(M);return new d(w,this.h|b.h)},r.xor=function(b){const I=Math.max(this.g.length,b.g.length),w=[];for(let M=0;M<I;M++)w[M]=this.i(M)^b.i(M);return new d(w,this.h^b.h)};function Wt(b){const I=b.g.length+1,w=[];for(let M=0;M<I;M++)w[M]=b.i(M)<<1|b.i(M-1)>>>31;return new d(w,b.h)}function Ct(b,I){const w=I>>5;I%=32;const M=b.g.length-w,N=[];for(let U=0;U<M;U++)N[U]=I>0?b.i(U+w)>>>I|b.i(U+w+1)<<32-I:b.i(U+w);return new d(N,b.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,rA=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=A,Yr=d}).apply(typeof dT<"u"?dT:typeof self<"u"?self:typeof window<"u"?window:{});var bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sA,_l,aA,Pc,Zd,oA,lA,uA;(function(){var r,t=Object.defineProperty;function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof bc=="object"&&bc];for(var m=0;m<u.length;++m){var E=u[m];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var a=i(this);function l(u,m){if(m)t:{var E=a;u=u.split(".");for(var v=0;v<u.length-1;v++){var P=u[v];if(!(P in E))break t;E=E[P]}u=u[u.length-1],v=E[u],m=m(v),m!=v&&m!=null&&t(E,u,{configurable:!0,writable:!0,value:m})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(m){var E=[],v;for(v in m)Object.prototype.hasOwnProperty.call(m,v)&&E.push([v,m[v]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function g(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,E){return u.call.apply(u.bind,arguments)}function y(u,m,E){return y=_,y.apply(null,arguments)}function A(u,m){var E=Array.prototype.slice.call(arguments,1);return function(){var v=E.slice();return v.push.apply(v,arguments),u.apply(this,v)}}function S(u,m){function E(){}E.prototype=m.prototype,u.Z=m.prototype,u.prototype=new E,u.prototype.constructor=u,u.Ob=function(v,P,B){for(var W=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)W[vt-2]=arguments[vt];return m.prototype[P].apply(v,W)}}var V=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function F(u){const m=u.length;if(m>0){const E=Array(m);for(let v=0;v<m;v++)E[v]=u[v];return E}return[]}function Z(u,m){for(let v=1;v<arguments.length;v++){const P=arguments[v];var E=typeof P;if(E=E!="object"?E:P?Array.isArray(P)?"array":E:"null",E=="array"||E=="object"&&typeof P.length=="number"){E=u.length||0;const B=P.length||0;u.length=E+B;for(let W=0;W<B;W++)u[E+W]=P[W]}else u.push(P)}}class ${constructor(m,E){this.i=m,this.j=E,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function J(u){d.setTimeout(()=>{throw u},0)}function ut(){var u=b;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ht{constructor(){this.h=this.g=null}add(m,E){const v=lt.get();v.set(m,E),this.h?this.h.next=v:this.g=v,this.h=v}}var lt=new $(()=>new Rt,u=>u.reset());class Rt{constructor(){this.next=this.g=this.h=null}set(m,E){this.h=m,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Wt,Ct=!1,b=new ht,I=()=>{const u=Promise.resolve(void 0);Wt=()=>{u.then(w)}};function w(){for(var u;u=ut();){try{u.h.call(u.g)}catch(E){J(E)}var m=lt;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}Ct=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const E=()=>{};d.addEventListener("test",E,m),d.removeEventListener("test",E,m)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function ne(u,m){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}S(ne,N),ne.prototype.init=function(u,m){const E=this.type=u.type,v=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(E=="mouseover"?m=u.fromElement:E=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ne.Z.h.call(this)},ne.prototype.h=function(){ne.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ce="closure_listenable_"+(Math.random()*1e6|0),G=0;function et(u,m,E,v,P){this.listener=u,this.proxy=null,this.src=m,this.type=E,this.capture=!!v,this.ha=P,this.key=++G,this.da=this.fa=!1}function ft(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function xt(u,m,E){for(const v in u)m.call(E,u[v],v,u)}function Gt(u,m){for(const E in u)m.call(void 0,u[E],E,u)}function D(u){const m={};for(const E in u)m[E]=u[E];return m}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nt(u,m){let E,v;for(let P=1;P<arguments.length;P++){v=arguments[P];for(E in v)u[E]=v[E];for(let B=0;B<K.length;B++)E=K[B],Object.prototype.hasOwnProperty.call(v,E)&&(u[E]=v[E])}}function rt(u){this.src=u,this.g={},this.h=0}rt.prototype.add=function(u,m,E,v,P){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const W=St(u,m,v,P);return W>-1?(m=u[W],E||(m.fa=!1)):(m=new et(m,this.src,B,!!v,P),m.fa=E,u.push(m)),m};function _t(u,m){const E=m.type;if(E in u.g){var v=u.g[E],P=Array.prototype.indexOf.call(v,m,void 0),B;(B=P>=0)&&Array.prototype.splice.call(v,P,1),B&&(ft(m),u.g[E].length==0&&(delete u.g[E],u.h--))}}function St(u,m,E,v){for(let P=0;P<u.length;++P){const B=u[P];if(!B.da&&B.listener==m&&B.capture==!!E&&B.ha==v)return P}return-1}var Ut="closure_lm_"+(Math.random()*1e6|0),be={};function ie(u,m,E,v,P){if(Array.isArray(m)){for(let B=0;B<m.length;B++)ie(u,m[B],E,v,P);return null}return E=co(E),u&&u[Ce]?u.J(m,E,g(v)?!!v.capture:!1,P):ns(u,m,E,!1,v,P)}function ns(u,m,E,v,P,B){if(!m)throw Error("Invalid event type");const W=g(P)?!!P.capture:!!P;let vt=is(u);if(vt||(u[Ut]=vt=new rt(u)),E=vt.add(m,E,v,W,B),E.proxy)return E;if(v=Ks(),E.proxy=v,v.src=u,v.listener=E,u.addEventListener)U||(P=W),P===void 0&&(P=!1),u.addEventListener(m.toString(),v,P);else if(u.attachEvent)u.attachEvent(Zn(m.toString()),v);else if(u.addListener&&u.removeListener)u.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ks(){function u(E){return m.call(u.src,u.listener,E)}const m=lo;return u}function Qs(u,m,E,v,P){if(Array.isArray(m))for(var B=0;B<m.length;B++)Qs(u,m[B],E,v,P);else v=g(v)?!!v.capture:!!v,E=co(E),u&&u[Ce]?(u=u.i,B=String(m).toString(),B in u.g&&(m=u.g[B],E=St(m,E,v,P),E>-1&&(ft(m[E]),Array.prototype.splice.call(m,E,1),m.length==0&&(delete u.g[B],u.h--)))):u&&(u=is(u))&&(m=u.g[m.toString()],u=-1,m&&(u=St(m,E,v,P)),(E=u>-1?m[u]:null)&&Xs(E))}function Xs(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ce])_t(m.i,u);else{var E=u.type,v=u.proxy;m.removeEventListener?m.removeEventListener(E,v,u.capture):m.detachEvent?m.detachEvent(Zn(E),v):m.addListener&&m.removeListener&&m.removeListener(v),(E=is(m))?(_t(E,u),E.h==0&&(E.src=null,m[Ut]=null)):ft(u)}}}function Zn(u){return u in be?be[u]:be[u]="on"+u}function lo(u,m){if(u.da)u=!0;else{m=new ne(m,this);const E=u.listener,v=u.ha||u.src;u.fa&&Xs(u),u=E.call(v,m)}return u}function is(u){return u=u[Ut],u instanceof rt?u:null}var uo="__closure_events_fn_"+(Math.random()*1e9>>>0);function co(u){return typeof u=="function"?u:(u[uo]||(u[uo]=function(m){return u.handleEvent(m)}),u[uo])}function ge(){M.call(this),this.i=new rt(this),this.M=this,this.G=null}S(ge,M),ge.prototype[Ce]=!0,ge.prototype.removeEventListener=function(u,m,E,v){Qs(this,u,m,E,v)};function we(u,m){var E,v=u.G;if(v)for(E=[];v;v=v.G)E.push(v);if(u=u.M,v=m.type||m,typeof m=="string")m=new N(m,u);else if(m instanceof N)m.target=m.target||u;else{var P=m;m=new N(v,u),nt(m,P)}P=!0;let B,W;if(E)for(W=E.length-1;W>=0;W--)B=m.g=E[W],P=rr(B,v,!0,m)&&P;if(B=m.g=u,P=rr(B,v,!0,m)&&P,P=rr(B,v,!1,m)&&P,E)for(W=0;W<E.length;W++)B=m.g=E[W],P=rr(B,v,!1,m)&&P}ge.prototype.N=function(){if(ge.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const E=u.g[m];for(let v=0;v<E.length;v++)ft(E[v]);delete u.g[m],u.h--}}this.G=null},ge.prototype.J=function(u,m,E,v){return this.i.add(String(u),m,!1,E,v)},ge.prototype.K=function(u,m,E,v){return this.i.add(String(u),m,!0,E,v)};function rr(u,m,E,v){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let P=!0;for(let B=0;B<m.length;++B){const W=m[B];if(W&&!W.da&&W.capture==E){const vt=W.listener,he=W.ha||W.src;W.fa&&_t(u.i,W),P=vt.call(he,v)!==!1&&P}}return P&&!v.defaultPrevented}function Ih(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:d.setTimeout(u,m||0)}function Zl(u){u.g=Ih(()=>{u.g=null,u.i&&(u.i=!1,Zl(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class We extends M{constructor(m,E){super(),this.m=m,this.l=E,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Zl(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rs(u){M.call(this),this.h=u,this.g={}}S(rs,M);var ho=[];function fo(u){xt(u.g,function(m,E){this.g.hasOwnProperty(E)&&Xs(m)},u),u.g={}}rs.prototype.N=function(){rs.Z.N.call(this),fo(this)},rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sr=d.JSON.stringify,Rh=d.JSON.parse,Wl=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function $l(){}function tu(){}var Pn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ke(){N.call(this,"d")}S(ke,N);function Tn(){N.call(this,"c")}S(Tn,N);var ce={},eu=null;function Js(){return eu=eu||new ge}ce.Ia="serverreachability";function nu(u){N.call(this,ce.Ia,u)}S(nu,N);function Wn(u){const m=Js();we(m,new nu(m))}ce.STAT_EVENT="statevent";function ss(u,m){N.call(this,ce.STAT_EVENT,u),this.stat=m}S(ss,N);function pe(u){const m=Js();we(m,new ss(m,u))}ce.Ja="timingevent";function $n(u,m){N.call(this,ce.Ja,u),this.size=m}S($n,N);function ti(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function xn(){this.g=!0}xn.prototype.ua=function(){this.g=!1};function Ch(u,m,E,v,P,B){u.info(function(){if(u.g)if(B){var W="",vt=B.split("&");for(let Bt=0;Bt<vt.length;Bt++){var he=vt[Bt].split("=");if(he.length>1){const re=he[0];he=he[1];const In=re.split("_");W=In.length>=2&&In[1]=="type"?W+(re+"="+he+"&"):W+(re+"=redacted&")}}}else W=null;else W=B;return"XMLHTTP REQ ("+v+") [attempt "+P+"]: "+m+`
`+E+`
`+W})}function iu(u,m,E,v,P,B,W){u.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+P+"]: "+m+`
`+E+`
`+B+" "+W})}function ei(u,m,E,v){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+bh(u,E)+(v?" "+v:"")})}function as(u,m){u.info(function(){return"TIMEOUT: "+m})}xn.prototype.info=function(){};function bh(u,m){if(!u.g)return m;if(!m)return null;try{const B=JSON.parse(m);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var E=B[u];if(!(E.length<2)){var v=E[1];if(Array.isArray(v)&&!(v.length<1)){var P=v[0];if(P!="noop"&&P!="stop"&&P!="close")for(let W=1;W<v.length;W++)v[W]=""}}}}return sr(B)}catch{return m}}var os={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},mo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},go;function ls(){}S(ls,$l),ls.prototype.g=function(){return new XMLHttpRequest},go=new ls;function Ni(u){return encodeURIComponent(String(u))}function ru(u){var m=1;u=u.split(":");const E=[];for(;m>0&&u.length;)E.push(u.shift()),m--;return u.length&&E.push(u.join(":")),E}function kn(u,m,E,v){this.j=u,this.i=m,this.l=E,this.S=v||1,this.V=new rs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new zn}function zn(){this.i=null,this.g="",this.h=!1}var _e={},Me={};function ni(u,m,E){u.M=1,u.A=us(Ee(m)),u.u=E,u.R=!0,Zs(u,null)}function Zs(u,m){u.F=Date.now(),ii(u),u.B=Ee(u.A);var E=u.B,v=u.S;Array.isArray(v)||(v=[String(v)]),ea(E.i,"t",v),u.C=0,E=u.j.L,u.h=new zn,u.g=Eu(u.j,E?m:null,!u.u),u.P>0&&(u.O=new We(y(u.Y,u,u.g),u.P)),m=u.V,E=u.g,v=u.ba;var P="readystatechange";Array.isArray(P)||(P&&(ho[0]=P.toString()),P=ho);for(let B=0;B<P.length;B++){const W=ie(E,P[B],v||m.handleEvent,!1,m.h||m);if(!W)break;m.g[W.key]=W}m=u.J?D(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Wn(),Ch(u.i,u.v,u.B,u.l,u.S,u.u)}kn.prototype.ba=function(u){u=u.target;const m=this.O;m&&jn(u)==3?m.j():this.Y(u)},kn.prototype.Y=function(u){try{if(u==this.g)t:{const vt=jn(this.g),he=this.g.ya(),Bt=this.g.ca();if(!(vt<3)&&(vt!=3||this.g&&(this.h.h||this.g.la()||ze(this.g)))){this.K||vt!=4||he==7||(he==8||Bt<=0?Wn(3):Wn(2)),ri(this);var m=this.g.ca();this.X=m;var E=wh(this);if(this.o=m==200,iu(this.i,this.v,this.B,this.l,this.S,vt,m),this.o){if(this.U&&!this.L){e:{if(this.g){var v,P=this.g;if((v=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(v)){var B=v;break e}}B=null}if(u=B)ei(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,si(this,u);else{this.o=!1,this.m=3,pe(12),cn(this),vn(this);break t}}if(this.R){u=!0;let re;for(;!this.K&&this.C<E.length;)if(re=au(this,E),re==Me){vt==4&&(this.m=4,pe(14),u=!1),ei(this.i,this.l,null,"[Incomplete Response]");break}else if(re==_e){this.m=4,pe(15),ei(this.i,this.l,E,"[Invalid Chunk]"),u=!1;break}else ei(this.i,this.l,re,null),si(this,re);if(su(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||E.length!=0||this.h.h||(this.m=1,pe(16),u=!1),this.o=this.o&&u,!u)ei(this.i,this.l,E,"[Invalid Chunked Response]"),cn(this),vn(this);else if(E.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Oo(W),W.P=!0,pe(11))}}else ei(this.i,this.l,E,null),si(this,E);vt==4&&cn(this),this.o&&!this.K&&(vt==4?gu(this.j,this):(this.o=!1,ii(this)))}else Di(this.g),m==400&&E.indexOf("Unknown SID")>0?(this.m=3,pe(12)):(this.m=0,pe(13)),cn(this),vn(this)}}}catch{}finally{}};function wh(u){if(!su(u))return u.g.la();const m=ze(u.g);if(m==="")return"";let E="";const v=m.length,P=jn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return cn(u),vn(u),"";u.h.i=new d.TextDecoder}for(let B=0;B<v;B++)u.h.h=!0,E+=u.h.i.decode(m[B],{stream:!(P&&B==v-1)});return m.length=0,u.h.g+=E,u.C=0,u.h.g}function su(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function au(u,m){var E=u.C,v=m.indexOf(`
`,E);return v==-1?Me:(E=Number(m.substring(E,v)),isNaN(E)?_e:(v+=1,v+E>m.length?Me:(m=m.slice(v,v+E),u.C=v+E,m)))}kn.prototype.cancel=function(){this.K=!0,cn(this)};function ii(u){u.T=Date.now()+u.H,Ws(u,u.H)}function Ws(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ti(y(u.aa,u),m)}function ri(u){u.D&&(d.clearTimeout(u.D),u.D=null)}kn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(as(this.i,this.B),this.M!=2&&(Wn(),pe(17)),cn(this),this.m=2,vn(this)):Ws(this,this.T-u)};function vn(u){u.j.I==0||u.K||gu(u.j,u)}function cn(u){ri(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,fo(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function si(u,m){try{var E=u.j;if(E.I!=0&&(E.g==u||oi(E.h,u))){if(!u.L&&oi(E.h,u)&&E.I==3){try{var v=E.Ba.g.parse(m)}catch{v=null}if(Array.isArray(v)&&v.length==3){var P=v;if(P[0]==0){t:if(!E.v){if(E.g)if(E.g.F+3e3<u.F)aa(E),dr(E);else break t;ps(E),pe(18)}}else E.xa=P[1],0<E.xa-E.K&&P[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=ti(y(E.Va,E),6e3));ai(E.h)<=1&&E.ta&&(E.ta=void 0)}else di(E,11)}else if((u.L||E.g==u)&&aa(E),!R(m))for(P=E.Ba.g.parse(m),m=0;m<P.length;m++){let Bt=P[m];const re=Bt[0];if(!(re<=E.K))if(E.K=re,Bt=Bt[1],E.I==2)if(Bt[0]=="c"){E.M=Bt[1],E.ba=Bt[2];const In=Bt[3];In!=null&&(E.ka=In,E.j.info("VER="+E.ka));const mi=Bt[4];mi!=null&&(E.za=mi,E.j.info("SVER="+E.za));const Gn=Bt[5];Gn!=null&&typeof Gn=="number"&&Gn>0&&(v=1.5*Gn,E.O=v,E.j.info("backChannelRequestTimeoutMs_="+v)),v=E;const Fn=u.g;if(Fn){const _s=Fn.g?Fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_s){var B=v.h;B.g||_s.indexOf("spdy")==-1&&_s.indexOf("quic")==-1&&_s.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(yo(B,B.h),B.h=null))}if(v.G){const oa=Fn.g?Fn.g.getResponseHeader("X-HTTP-Session-Id"):null;oa&&(v.wa=oa,Ft(v.J,v.G,oa))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-u.F,E.j.info("Handshake RTT: "+E.T+"ms")),v=E;var W=u;if(v.na=yu(v,v.L?v.ba:null,v.W),W.L){Eo(v.h,W);var vt=W,he=v.O;he&&(vt.H=he),vt.D&&(ri(vt),ii(vt)),v.g=W}else du(v);E.i.length>0&&fi(E)}else Bt[0]!="stop"&&Bt[0]!="close"||di(E,7);else E.I==3&&(Bt[0]=="stop"||Bt[0]=="close"?Bt[0]=="stop"?di(E,7):wo(E):Bt[0]!="noop"&&E.l&&E.l.qa(Bt),E.A=0)}}Wn(4)}catch{}}var ye=class{constructor(u,m){this.g=u,this.map=m}};function po(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _o(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ai(u){return u.h?1:u.g?u.g.size:0}function oi(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function yo(u,m){u.g?u.g.add(m):u.h=m}function Eo(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}po.prototype.cancel=function(){if(this.i=To(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function To(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const E of u.g.values())m=m.concat(E.G);return m}return F(u.i)}var ou=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $s(u,m){if(u){u=u.split("&");for(let E=0;E<u.length;E++){const v=u[E].indexOf("=");let P,B=null;v>=0?(P=u[E].substring(0,v),B=u[E].substring(v+1)):P=u[E],m(P,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function hn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof hn?(this.l=u.l,Ve(this,u.j),this.o=u.o,this.g=u.g,ar(this,u.u),this.h=u.h,vo(this,hu(u.i)),this.m=u.m):u&&(m=String(u).match(ou))?(this.l=!1,Ve(this,m[1]||"",!0),this.o=li(m[2]||""),this.g=li(m[3]||"",!0),ar(this,m[4]),this.h=li(m[5]||"",!0),vo(this,m[6]||"",!0),this.m=li(m[7]||"")):(this.l=!1,this.i=new lr(null,this.l))}hn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(cs(m,ta,!0),":");var E=this.g;return(E||m=="file")&&(u.push("//"),(m=this.o)&&u.push(cs(m,ta,!0),"@"),u.push(Ni(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&u.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&u.push("/"),u.push(cs(E,E.charAt(0)=="/"?Ao:lu,!0))),(E=this.i.toString())&&u.push("?",E),(E=this.m)&&u.push("#",cs(E,uu)),u.join("")},hn.prototype.resolve=function(u){const m=Ee(this);let E=!!u.j;E?Ve(m,u.j):E=!!u.o,E?m.o=u.o:E=!!u.g,E?m.g=u.g:E=u.u!=null;var v=u.h;if(E)ar(m,u.u);else if(E=!!u.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var P=m.h.lastIndexOf("/");P!=-1&&(v=m.h.slice(0,P+1)+v)}if(P=v,P==".."||P==".")v="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){v=P.lastIndexOf("/",0)==0,P=P.split("/");const B=[];for(let W=0;W<P.length;){const vt=P[W++];vt=="."?v&&W==P.length&&B.push(""):vt==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),v&&W==P.length&&B.push("")):(B.push(vt),v=!0)}v=B.join("/")}else v=P}return E?m.h=v:E=u.i.toString()!=="",E?vo(m,hu(u.i)):E=!!u.m,E&&(m.m=u.m),m};function Ee(u){return new hn(u)}function Ve(u,m,E){u.j=E?li(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function ar(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function vo(u,m,E){m instanceof lr?(u.i=m,na(u.i,u.l)):(E||(m=cs(m,or)),u.i=new lr(m,u.l))}function Ft(u,m,E){u.i.set(m,E)}function us(u){return Ft(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function li(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function cs(u,m,E){return typeof u=="string"?(u=encodeURI(u).replace(m,en),E&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function en(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ta=/[#\/\?@]/g,lu=/[#\?:]/g,Ao=/[#\?]/g,or=/[#\?@]/g,uu=/#/g;function lr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function nn(u){u.g||(u.g=new Map,u.h=0,u.i&&$s(u.i,function(m,E){u.add(decodeURIComponent(m.replace(/\+/g," ")),E)}))}r=lr.prototype,r.add=function(u,m){nn(this),this.i=null,u=ur(this,u);let E=this.g.get(u);return E||this.g.set(u,E=[]),E.push(m),this.h+=1,this};function cu(u,m){nn(u),m=ur(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function So(u,m){return nn(u),m=ur(u,m),u.g.has(m)}r.forEach=function(u,m){nn(this),this.g.forEach(function(E,v){E.forEach(function(P){u.call(m,P,v,this)},this)},this)};function Io(u,m){nn(u);let E=[];if(typeof m=="string")So(u,m)&&(E=E.concat(u.g.get(ur(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)E=E.concat(u[m]);return E}r.set=function(u,m){return nn(this),this.i=null,u=ur(this,u),So(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=Io(this,u),u.length>0?String(u[0]):m):m};function ea(u,m,E){cu(u,m),E.length>0&&(u.i=null,u.g.set(ur(u,m),F(E)),u.h+=E.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let v=0;v<m.length;v++){var E=m[v];const P=Ni(E);E=Io(this,E);for(let B=0;B<E.length;B++){let W=P;E[B]!==""&&(W+="="+Ni(E[B])),u.push(W)}}return this.i=u.join("&")};function hu(u){const m=new lr;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function ur(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function na(u,m){m&&!u.j&&(nn(u),u.i=null,u.g.forEach(function(E,v){const P=v.toLowerCase();v!=P&&(cu(this,v),ea(this,P,E))},u)),u.j=m}function Bn(u,m){const E=new xn;if(d.Image){const v=new Image;v.onload=A(An,E,"TestLoadImage: loaded",!0,m,v),v.onerror=A(An,E,"TestLoadImage: error",!1,m,v),v.onabort=A(An,E,"TestLoadImage: abort",!1,m,v),v.ontimeout=A(An,E,"TestLoadImage: timeout",!1,m,v),d.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=u}else m(!1)}function Ro(u,m){const E=new xn,v=new AbortController,P=setTimeout(()=>{v.abort(),An(E,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:v.signal}).then(B=>{clearTimeout(P),B.ok?An(E,"TestPingServer: ok",!0,m):An(E,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(P),An(E,"TestPingServer: error",!1,m)})}function An(u,m,E,v,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),v(E)}catch{}}function cr(){this.g=new Wl}function ui(u){this.i=u.Sb||null,this.h=u.ab||!1}S(ui,$l),ui.prototype.g=function(){return new hs(this.i,this.h)};function hs(u,m){ge.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(hs,ge),r=hs.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Hn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||d).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hr(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Hn(this)),this.g&&(this.readyState=3,Hn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ia(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ia(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?hr(this):Hn(this),this.readyState==3&&ia(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,hr(this))},r.Na=function(u){this.g&&(this.response=u,hr(this))},r.ga=function(){this.g&&hr(this)};function hr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Hn(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var E=m.next();!E.done;)E=E.value,u.push(E[0]+": "+E[1]),E=m.next();return u.join(`\r
`)};function Hn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(hs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Sn(u){let m="";return xt(u,function(E,v){m+=v,m+=":",m+=E,m+=`\r
`}),m}function fs(u,m,E){t:{for(v in E){var v=!1;break t}v=!0}v||(E=Sn(E),typeof u=="string"?E!=null&&Ni(E):Ft(u,m,E))}function Kt(u){ge.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(Kt,ge);var ci=/^https?$/i,Co=["POST","PUT"];r=Kt.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,E,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():go.g(),this.g.onreadystatechange=V(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(B){ds(this,B);return}if(u=E||"",E=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var P in v)E.set(P,v[P]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const B of v.keys())E.set(B,v.get(B));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(E.keys()).find(B=>B.toLowerCase()=="content-type"),P=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(Co,m,void 0)>=0)||v||P||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,W]of E)this.g.setRequestHeader(B,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){ds(this,B)}};function ds(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,bo(u),Oi(u)}function bo(u){u.A||(u.A=!0,we(u,"complete"),we(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,we(this,"complete"),we(this,"abort"),Oi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oi(this,!0)),Kt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?ms(this):this.Xa())},r.Xa=function(){ms(this)};function ms(u){if(u.h&&typeof c<"u"){if(u.v&&jn(u)==4)setTimeout(u.Ca.bind(u),0);else if(we(u,"readystatechange"),jn(u)==4){u.h=!1;try{const B=u.ca();t:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var E;if(!(E=m)){var v;if(v=B===0){let W=String(u.D).match(ou)[1]||null;!W&&d.self&&d.self.location&&(W=d.self.location.protocol.slice(0,-1)),v=!ci.test(W?W.toLowerCase():"")}E=v}if(E)we(u,"complete"),we(u,"success");else{u.o=6;try{var P=jn(u)>2?u.g.statusText:""}catch{P=""}u.l=P+" ["+u.ca()+"]",bo(u)}}finally{Oi(u)}}}}function Oi(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const E=u.g;u.g=null,m||we(u,"ready");try{E.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function jn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return jn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Rh(m)}};function ze(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Di(u){const m={};u=(u.g&&jn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<u.length;v++){if(R(u[v]))continue;var E=ru(u[v]);const P=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const B=m[P]||[];m[P]=B,B.push(E)}Gt(m,function(v){return v.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function hi(u,m,E){return E&&E.internalChannelParams&&E.internalChannelParams[u]||m}function fr(u){this.za=0,this.i=[],this.j=new xn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=hi("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=hi("baseRetryDelayMs",5e3,u),this.Za=hi("retryDelaySeedMs",1e4,u),this.Ta=hi("forwardChannelMaxRetries",2,u),this.va=hi("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new po(u&&u.concurrentRequestLimit),this.Ba=new cr,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=fr.prototype,r.ka=8,r.I=1,r.connect=function(u,m,E,v){pe(0),this.W=u,this.H=m||{},E&&v!==void 0&&(this.H.OSID=E,this.H.OAID=v),this.F=this.X,this.J=yu(this,null,this.W),fi(this)};function wo(u){if(ra(u),u.I==3){var m=u.V++,E=Ee(u.J);if(Ft(E,"SID",u.M),Ft(E,"RID",m),Ft(E,"TYPE","terminate"),gs(u,E),m=new kn(u,u.j,m),m.M=2,m.A=us(Ee(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(m.A.toString(),"")}catch{}!E&&d.Image&&(new Image().src=m.A,E=!0),E||(m.g=Eu(m.j,null),m.g.ea(m.A)),m.F=Date.now(),ii(m)}_u(u)}function dr(u){u.g&&(Oo(u),u.g.cancel(),u.g=null)}function ra(u){dr(u),u.v&&(d.clearTimeout(u.v),u.v=null),aa(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function fi(u){if(!_o(u.h)&&!u.m){u.m=!0;var m=u.Ea;Wt||I(),Ct||(Wt(),Ct=!0),b.add(m,u),u.D=0}}function sa(u,m){return ai(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ti(y(u.Ea,u,m),pu(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const P=new kn(this,this.j,u);let B=this.o;if(this.U&&(B?(B=D(B),nt(B,this.U)):B=this.U),this.u!==null||this.R||(P.J=B,B=null),this.S)t:{for(var m=0,E=0;E<this.i.length;E++){e:{var v=this.i[E];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break e}v=void 0}if(v===void 0)break;if(m+=v,m>4096){m=E;break t}if(m===4096||E===this.i.length-1){m=E+1;break t}}m=1e3}else m=1e3;m=fu(this,P,m),E=Ee(this.J),Ft(E,"RID",u),Ft(E,"CVER",22),this.G&&Ft(E,"X-HTTP-Session-Id",this.G),gs(this,E),B&&(this.R?m="headers="+Ni(Sn(B))+"&"+m:this.u&&fs(E,this.u,B)),yo(this.h,P),this.Ra&&Ft(E,"TYPE","init"),this.S?(Ft(E,"$req",m),Ft(E,"SID","null"),P.U=!0,ni(P,E,null)):ni(P,E,m),this.I=2}}else this.I==3&&(u?No(this,u):this.i.length==0||_o(this.h)||No(this))};function No(u,m){var E;m?E=m.l:E=u.V++;const v=Ee(u.J);Ft(v,"SID",u.M),Ft(v,"RID",E),Ft(v,"AID",u.K),gs(u,v),u.u&&u.o&&fs(v,u.u,u.o),E=new kn(u,u.j,E,u.D+1),u.u===null&&(E.J=u.o),m&&(u.i=m.G.concat(u.i)),m=fu(u,E,1e3),E.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),yo(u.h,E),ni(E,v,m)}function gs(u,m){u.H&&xt(u.H,function(E,v){Ft(m,v,E)}),u.l&&xt({},function(E,v){Ft(m,v,E)})}function fu(u,m,E){E=Math.min(u.i.length,E);const v=u.l?y(u.l.Ka,u.l,u):null;t:{var P=u.i;let vt=-1;for(;;){const he=["count="+E];vt==-1?E>0?(vt=P[0].g,he.push("ofs="+vt)):vt=0:he.push("ofs="+vt);let Bt=!0;for(let re=0;re<E;re++){var B=P[re].g;const In=P[re].map;if(B-=vt,B<0)vt=Math.max(0,P[re].g-100),Bt=!1;else try{B="req"+B+"_"||"";try{var W=In instanceof Map?In:Object.entries(In);for(const[mi,Gn]of W){let Fn=Gn;g(Gn)&&(Fn=sr(Gn)),he.push(B+mi+"="+encodeURIComponent(Fn))}}catch(mi){throw he.push(B+"type="+encodeURIComponent("_badmap")),mi}}catch{v&&v(In)}}if(Bt){W=he.join("&");break t}}W=void 0}return u=u.i.splice(0,E),m.G=u,W}function du(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;Wt||I(),Ct||(Wt(),Ct=!0),b.add(m,u),u.A=0}}function ps(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ti(y(u.Da,u),pu(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,mu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ti(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,pe(10),dr(this),mu(this))};function Oo(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function mu(u){u.g=new kn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Ee(u.na);Ft(m,"RID","rpc"),Ft(m,"SID",u.M),Ft(m,"AID",u.K),Ft(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ft(m,"TO",u.ia),Ft(m,"TYPE","xmlhttp"),gs(u,m),u.u&&u.o&&fs(m,u.u,u.o),u.O&&(u.g.H=u.O);var E=u.g;u=u.ba,E.M=1,E.A=us(Ee(m)),E.u=null,E.R=!0,Zs(E,u)}r.Va=function(){this.C!=null&&(this.C=null,dr(this),ps(this),pe(19))};function aa(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function gu(u,m){var E=null;if(u.g==m){aa(u),Oo(u),u.g=null;var v=2}else if(oi(u.h,m))E=m.G,Eo(u.h,m),v=1;else return;if(u.I!=0){if(m.o)if(v==1){E=m.u?m.u.length:0,m=Date.now()-m.F;var P=u.D;v=Js(),we(v,new $n(v,E)),fi(u)}else du(u);else if(P=m.m,P==3||P==0&&m.X>0||!(v==1&&sa(u,m)||v==2&&ps(u)))switch(E&&E.length>0&&(m=u.h,m.i=m.i.concat(E)),P){case 1:di(u,5);break;case 4:di(u,10);break;case 3:di(u,6);break;default:di(u,2)}}}function pu(u,m){let E=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(E*=2),E*m}function di(u,m){if(u.j.info("Error code "+m),m==2){var E=y(u.bb,u),v=u.Ua;const P=!v;v=new hn(v||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ve(v,"https"),us(v),P?Bn(v.toString(),E):Ro(v.toString(),E)}else pe(2);u.I=0,u.l&&u.l.pa(m),_u(u),ra(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),pe(2)):(this.j.info("Failed to ping google.com"),pe(1))};function _u(u){if(u.I=0,u.ja=[],u.l){const m=To(u.h);(m.length!=0||u.i.length!=0)&&(Z(u.ja,m),Z(u.ja,u.i),u.h.i.length=0,F(u.i),u.i.length=0),u.l.oa()}}function yu(u,m,E){var v=E instanceof hn?Ee(E):new hn(E);if(v.g!="")m&&(v.g=m+"."+v.g),ar(v,v.u);else{var P=d.location;v=P.protocol,m=m?m+"."+P.hostname:P.hostname,P=+P.port;const B=new hn(null);v&&Ve(B,v),m&&(B.g=m),P&&ar(B,P),E&&(B.h=E),v=B}return E=u.G,m=u.wa,E&&m&&Ft(v,E,m),Ft(v,"VER",u.ka),gs(u,v),v}function Eu(u,m,E){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Kt(new ui({ab:E})):new Kt(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tu(){}r=Tu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function mr(){}mr.prototype.g=function(u,m){return new $e(u,m)};function $e(u,m){ge.call(this),this.g=new fr(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!R(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!R(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Mi(this)}S($e,ge),$e.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},$e.prototype.close=function(){wo(this.g)},$e.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var E={};E.__data__=u,u=E}else this.v&&(E={},E.__data__=sr(u),u=E);m.i.push(new ye(m.Ya++,u)),m.I==3&&fi(m)},$e.prototype.N=function(){this.g.l=null,delete this.j,wo(this.g),delete this.g,$e.Z.N.call(this)};function vu(u){ke.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const E in m){u=E;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}S(vu,ke);function Au(){Tn.call(this),this.status=1}S(Au,Tn);function Mi(u){this.g=u}S(Mi,Tu),Mi.prototype.ra=function(){we(this.g,"a")},Mi.prototype.qa=function(u){we(this.g,new vu(u))},Mi.prototype.pa=function(u){we(this.g,new Au)},Mi.prototype.oa=function(){we(this.g,"b")},mr.prototype.createWebChannel=mr.prototype.g,$e.prototype.send=$e.prototype.o,$e.prototype.open=$e.prototype.m,$e.prototype.close=$e.prototype.close,uA=function(){return new mr},lA=function(){return Js()},oA=ce,Zd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},os.NO_ERROR=0,os.TIMEOUT=8,os.HTTP_ERROR=6,Pc=os,mo.COMPLETE="complete",aA=mo,tu.EventType=Pn,Pn.OPEN="a",Pn.CLOSE="b",Pn.ERROR="c",Pn.MESSAGE="d",ge.prototype.listen=ge.prototype.J,_l=tu,Kt.prototype.listenOnce=Kt.prototype.K,Kt.prototype.getLastError=Kt.prototype.Ha,Kt.prototype.getLastErrorCode=Kt.prototype.ya,Kt.prototype.getStatus=Kt.prototype.ca,Kt.prototype.getResponseJson=Kt.prototype.La,Kt.prototype.getResponseText=Kt.prototype.la,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Fa,sA=Kt}).apply(typeof bc<"u"?bc:typeof self<"u"?self:typeof window<"u"?window:{});const mT="@firebase/firestore",gT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Xe.UNAUTHENTICATED=new Xe(null),Xe.GOOGLE_CREDENTIALS=new Xe("google-credentials-uid"),Xe.FIRST_PARTY=new Xe("first-party-uid"),Xe.MOCK_USER=new Xe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ro="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new pm("@firebase/firestore");function xa(){return Bs.logLevel}function it(r,...t){if(Bs.logLevel<=Dt.DEBUG){const i=t.map(wm);Bs.debug(`Firestore (${ro}): ${r}`,...i)}}function er(r,...t){if(Bs.logLevel<=Dt.ERROR){const i=t.map(wm);Bs.error(`Firestore (${ro}): ${r}`,...i)}}function Qa(r,...t){if(Bs.logLevel<=Dt.WARN){const i=t.map(wm);Bs.warn(`Firestore (${ro}): ${r}`,...i)}}function wm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(i){return JSON.stringify(i)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(r,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,cA(r,a,i)}function cA(r,t,i){let a=`FIRESTORE (${ro}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(i!==void 0)try{a+=" CONTEXT: "+JSON.stringify(i)}catch{a+=" CONTEXT: "+i}throw er(a),new Error(a)}function jt(r,t,i,a){let l="Unexpected state";typeof i=="string"?l=i:a=i,r||cA(t,l,a)}function Tt(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ot extends ir{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(){this.promise=new Promise(((t,i)=>{this.resolve=t,this.reject=i}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Ab{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable((()=>i(Xe.UNAUTHENTICATED)))}shutdown(){}}class Sb{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class Ib{constructor(t){this.t=t,this.currentUser=Xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){jt(this.o===void 0,42304);let a=this.i;const l=_=>this.i!==a?(a=this.i,i(_)):Promise.resolve();let c=new Kr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Kr,t.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const _=c;t.enqueueRetryable((async()=>{await _.promise,await l(this.currentUser)}))},g=_=>{it("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((_=>g(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?g(_):(it("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Kr)}}),0),d()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((a=>this.i!==t?(it("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(jt(typeof a.accessToken=="string",31837,{l:a}),new hA(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return jt(t===null||typeof t=="string",2055,{h:t}),new Xe(t)}}class Rb{constructor(t,i,a){this.P=t,this.T=i,this.I=a,this.type="FirstParty",this.user=Xe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Cb{constructor(t,i,a){this.P=t,this.T=i,this.I=a}getToken(){return Promise.resolve(new Rb(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable((()=>i(Xe.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class pT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bb{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){jt(this.o===void 0,3512);const a=c=>{c.error!=null&&it("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,it("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>a(c)))};const l=c=>{it("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):it("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new pT(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((i=>i?(jt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new pT(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let a=0;a<r;a++)i[a]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const l=wb(40);for(let c=0;c<l.length;++c)a.length<20&&l[c]<i&&(a+=t.charAt(l[c]%62))}return a}}function Mt(r,t){return r<t?-1:r>t?1:0}function Wd(r,t){const i=Math.min(r.length,t.length);for(let a=0;a<i;a++){const l=r.charAt(a),c=t.charAt(a);if(l!==c)return xd(l)===xd(c)?Mt(l,c):xd(l)?1:-1}return Mt(r.length,t.length)}const Nb=55296,Ob=57343;function xd(r){const t=r.charCodeAt(0);return t>=Nb&&t<=Ob}function Xa(r,t,i){return r.length===t.length&&r.every(((a,l)=>i(a,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="__name__";class Ei{constructor(t,i,a){i===void 0?i=0:i>t.length&&pt(637,{offset:i,range:t.length}),a===void 0?a=t.length-i:a>t.length-i&&pt(1746,{length:a,range:t.length-i}),this.segments=t,this.offset=i,this.len=a}get length(){return this.len}isEqual(t){return Ei.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof Ei?t.forEach((a=>{i.push(a)})):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,a=this.limit();i<a;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const a=Math.min(t.length,i.length);for(let l=0;l<a;l++){const c=Ei.compareSegments(t.get(l),i.get(l));if(c!==0)return c}return Mt(t.length,i.length)}static compareSegments(t,i){const a=Ei.isNumericId(t),l=Ei.isNumericId(i);return a&&!l?-1:!a&&l?1:a&&l?Ei.extractNumericId(t).compare(Ei.extractNumericId(i)):Wd(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Yr.fromString(t.substring(4,t.length-2))}}class ae extends Ei{construct(t,i,a){return new ae(t,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const a of t){if(a.indexOf("//")>=0)throw new ot(X.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter((l=>l.length>0)))}return new ae(i)}static emptyPath(){return new ae([])}}const Db=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qe extends Ei{construct(t,i,a){return new qe(t,i,a)}static isValidIdentifier(t){return Db.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qe.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_T}static keyField(){return new qe([_T])}static fromServerFormat(t){const i=[];let a="",l=0;const c=()=>{if(a.length===0)throw new ot(X.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let d=!1;for(;l<t.length;){const g=t[l];if(g==="\\"){if(l+1===t.length)throw new ot(X.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const _=t[l+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new ot(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=_,l+=2}else g==="`"?(d=!d,l++):g!=="."||d?(a+=g,l++):(c(),l++)}if(c(),d)throw new ot(X.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new qe(i)}static emptyPath(){return new qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.path=t}static fromPath(t){return new dt(ae.fromString(t))}static fromName(t){return new dt(ae.fromString(t).popFirst(5))}static empty(){return new dt(ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ae.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return ae.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new dt(new ae(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(r,t,i){if(!i)throw new ot(X.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function Vb(r,t,i,a){if(t===!0&&a===!0)throw new ot(X.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function yT(r){if(!dt.isDocumentKey(r))throw new ot(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function fA(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Om(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(a){return a.constructor?a.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":pt(12329,{type:typeof r})}function Dl(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new ot(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Om(r);throw new ot(X.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(r,t){const i={typeString:r};return t&&(i.value=t),i}function Yl(r,t){if(!fA(r))throw new ot(X.INVALID_ARGUMENT,"JSON must be an object");let i;for(const a in t)if(t[a]){const l=t[a].typeString,c="value"in t[a]?{value:t[a].value}:void 0;if(!(a in r)){i=`JSON missing required field: '${a}'`;break}const d=r[a];if(l&&typeof d!==l){i=`JSON field '${a}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){i=`Expected '${a}' field to equal '${c.value}'`;break}}if(i)throw new ot(X.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=-62135596800,TT=1e6;class ee{static now(){return ee.fromMillis(Date.now())}static fromDate(t){return ee.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),a=Math.floor((t-1e3*i)*TT);return new ee(i,a)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new ot(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new ot(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<ET)throw new ot(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ot(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/TT}_compareTo(t){return this.seconds===t.seconds?Mt(this.nanoseconds,t.nanoseconds):Mt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ee._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Yl(t,ee._jsonSchema))return new ee(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-ET;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ee._jsonSchemaVersion="firestore/timestamp/1.0",ee._jsonSchema={type:Re("string",ee._jsonSchemaVersion),seconds:Re("number"),nanoseconds:Re("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{static fromTimestamp(t){return new yt(t)}static min(){return new yt(new ee(0,0))}static max(){return new yt(new ee(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=-1;function Lb(r,t){const i=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,l=yt.fromTimestamp(a===1e9?new ee(i+1,0):new ee(i,a));return new Qr(l,dt.empty(),t)}function Ub(r){return new Qr(r.readTime,r.key,Ml)}class Qr{constructor(t,i,a){this.readTime=t,this.documentKey=i,this.largestBatchId=a}static min(){return new Qr(yt.min(),dt.empty(),Ml)}static max(){return new Qr(yt.max(),dt.empty(),Ml)}}function Pb(r,t){let i=r.readTime.compareTo(t.readTime);return i!==0?i:(i=dt.comparator(r.documentKey,t.documentKey),i!==0?i:Mt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(r){if(r.code!==X.FAILED_PRECONDITION||r.message!==xb)throw r;it("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&pt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new Q(((a,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(a,l)},this.catchCallback=c=>{this.wrapFailure(i,c).next(a,l)}}))}toPromise(){return new Promise(((t,i)=>{this.next(t,i)}))}wrapUserFunction(t){try{const i=t();return i instanceof Q?i:Q.resolve(i)}catch(i){return Q.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction((()=>t(i))):Q.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction((()=>t(i))):Q.reject(i)}static resolve(t){return new Q(((i,a)=>{i(t)}))}static reject(t){return new Q(((i,a)=>{a(t)}))}static waitFor(t){return new Q(((i,a)=>{let l=0,c=0,d=!1;t.forEach((g=>{++l,g.next((()=>{++c,d&&c===l&&i()}),(_=>a(_)))})),d=!0,c===l&&i()}))}static or(t){let i=Q.resolve(!1);for(const a of t)i=i.next((l=>l?Q.resolve(l):a()));return i}static forEach(t,i){const a=[];return t.forEach(((l,c)=>{a.push(i.call(this,l,c))})),this.waitFor(a)}static mapArray(t,i){return new Q(((a,l)=>{const c=t.length,d=new Array(c);let g=0;for(let _=0;_<c;_++){const y=_;i(t[y]).next((A=>{d[y]=A,++g,g===c&&a(d)}),(A=>l(A)))}}))}static doWhile(t,i){return new Q(((a,l)=>{const c=()=>{t()===!0?i().next((()=>{c()}),l):a()};c()}))}}function zb(r){const t=r.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function ao(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>i.writeSequenceNumber(a))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}hh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm=-1;function fh(r){return r==null}function Jc(r){return r===0&&1/r==-1/0}function Bb(r){return typeof r=="number"&&Number.isInteger(r)&&!Jc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="";function Hb(r){let t="";for(let i=0;i<r.length;i++)t.length>0&&(t=vT(t)),t=jb(r.get(i),t);return vT(t)}function jb(r,t){let i=t;const a=r.length;for(let l=0;l<a;l++){const c=r.charAt(l);switch(c){case"\0":i+="";break;case dA:i+="";break;default:i+=c}}return i}function vT(r){return r+dA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(r){let t=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t++;return t}function Gs(r,t){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t(i,r[i])}function mA(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(t,i){this.comparator=t,this.root=i||Fe.EMPTY}insert(t,i){return new oe(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,Fe.BLACK,null,null))}remove(t){return new oe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Fe.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(t,i.key);if(a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(t){let i=0,a=this.root;for(;!a.isEmpty();){const l=this.comparator(t,a.key);if(l===0)return i+a.left.size;l<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((i,a)=>(t(i,a),!1)))}toString(){const t=[];return this.inorderTraversal(((i,a)=>(t.push(`${i}:${a}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new wc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new wc(this.root,t,this.comparator,!1)}getReverseIterator(){return new wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new wc(this.root,t,this.comparator,!0)}}class wc{constructor(t,i,a,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=i?a(t.key,i):1,i&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Fe{constructor(t,i,a,l,c){this.key=t,this.value=i,this.color=a??Fe.RED,this.left=l??Fe.EMPTY,this.right=c??Fe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,a,l,c){return new Fe(t??this.key,i??this.value,a??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,a){let l=this;const c=a(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,i,a),null):c===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(t,i,a)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Fe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let a,l=this;if(i(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(t,l.key)===0){if(l.right.isEmpty())return Fe.EMPTY;a=l.right.min(),l=l.copy(a.key,a.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Fe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Fe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw pt(27949);return t+(this.isRed()?0:1)}}Fe.EMPTY=null,Fe.RED=!0,Fe.BLACK=!1;Fe.EMPTY=new class{constructor(){this.size=0}get key(){throw pt(57766)}get value(){throw pt(16141)}get color(){throw pt(16727)}get left(){throw pt(29726)}get right(){throw pt(36894)}copy(t,i,a,l,c){return this}insert(t,i,a){return new Fe(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(t){this.comparator=t,this.data=new oe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((i,a)=>(t(i),!1)))}forEachInRange(t,i){const a=this.data.getIteratorFrom(t[0]);for(;a.hasNext();){const l=a.getNext();if(this.comparator(l.key,t[1])>=0)return;i(l.key)}}forEachWhile(t,i){let a;for(a=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!t(a.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new ST(this.data.getIterator())}getIteratorFrom(t){return new ST(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach((a=>{i=i.add(a)})),i}isEqual(t){if(!(t instanceof De)||this.size!==t.size)return!1;const i=this.data.getIterator(),a=t.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=a.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((i=>{t.push(i)})),t}toString(){const t=[];return this.forEach((i=>t.push(i))),"SortedSet("+t.toString()+")"}copy(t){const i=new De(this.comparator);return i.data=t,i}}class ST{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(t){this.fields=t,t.sort(qe.comparator)}static empty(){return new Xn([])}unionWith(t){let i=new De(qe.comparator);for(const a of this.fields)i=i.add(a);for(const a of t)i=i.add(a);return new Xn(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return Xa(this.fields,t.fields,((i,a)=>i.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this.binaryString=t}static fromBase64String(t){const i=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new gA("Invalid base64 string: "+c):c}})(t);return new Ye(i)}static fromUint8Array(t){const i=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(t);return new Ye(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const a=new Uint8Array(i.length);for(let l=0;l<i.length;l++)a[l]=i.charCodeAt(l);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Mt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ye.EMPTY_BYTE_STRING=new Ye("");const Gb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xr(r){if(jt(!!r,39018),typeof r=="string"){let t=0;const i=Gb.exec(r);if(jt(!!i,46558,{timestamp:r}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),t=Number(l)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:me(r.seconds),nanos:me(r.nanos)}}function me(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Jr(r){return typeof r=="string"?Ye.fromBase64String(r):Ye.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="server_timestamp",_A="__type__",yA="__previous_value__",EA="__local_write_time__";function Mm(r){var i,a;return((a=(((i=r==null?void 0:r.mapValue)==null?void 0:i.fields)||{})[_A])==null?void 0:a.stringValue)===pA}function dh(r){const t=r.mapValue.fields[yA];return Mm(t)?dh(t):t}function Vl(r){const t=Xr(r.mapValue.fields[EA].timestampValue);return new ee(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(t,i,a,l,c,d,g,_,y,A){this.databaseId=t,this.appId=i,this.persistenceKey=a,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=y,this.isUsingEmulator=A}}const Zc="(default)";class Ll{constructor(t,i){this.projectId=t,this.database=i||Zc}static empty(){return new Ll("","")}get isDefaultDatabase(){return this.database===Zc}isEqual(t){return t instanceof Ll&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="__type__",qb="__max__",Nc={mapValue:{}},vA="__vector__",Wc="value";function Zr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Mm(r)?4:Kb(r)?9007199254740991:Yb(r)?10:11:pt(28295,{value:r})}function Ci(r,t){if(r===t)return!0;const i=Zr(r);if(i!==Zr(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Vl(r).isEqual(Vl(t));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Xr(l.timestampValue),g=Xr(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(l,c){return Jr(l.bytesValue).isEqual(Jr(c.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(l,c){return me(l.geoPointValue.latitude)===me(c.geoPointValue.latitude)&&me(l.geoPointValue.longitude)===me(c.geoPointValue.longitude)})(r,t);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return me(l.integerValue)===me(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=me(l.doubleValue),g=me(c.doubleValue);return d===g?Jc(d)===Jc(g):isNaN(d)&&isNaN(g)}return!1})(r,t);case 9:return Xa(r.arrayValue.values||[],t.arrayValue.values||[],Ci);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},g=c.mapValue.fields||{};if(AT(d)!==AT(g))return!1;for(const _ in d)if(d.hasOwnProperty(_)&&(g[_]===void 0||!Ci(d[_],g[_])))return!1;return!0})(r,t);default:return pt(52216,{left:r})}}function Ul(r,t){return(r.values||[]).find((i=>Ci(i,t)))!==void 0}function Ja(r,t){if(r===t)return 0;const i=Zr(r),a=Zr(t);if(i!==a)return Mt(i,a);switch(i){case 0:case 9007199254740991:return 0;case 1:return Mt(r.booleanValue,t.booleanValue);case 2:return(function(c,d){const g=me(c.integerValue||c.doubleValue),_=me(d.integerValue||d.doubleValue);return g<_?-1:g>_?1:g===_?0:isNaN(g)?isNaN(_)?0:-1:1})(r,t);case 3:return IT(r.timestampValue,t.timestampValue);case 4:return IT(Vl(r),Vl(t));case 5:return Wd(r.stringValue,t.stringValue);case 6:return(function(c,d){const g=Jr(c),_=Jr(d);return g.compareTo(_)})(r.bytesValue,t.bytesValue);case 7:return(function(c,d){const g=c.split("/"),_=d.split("/");for(let y=0;y<g.length&&y<_.length;y++){const A=Mt(g[y],_[y]);if(A!==0)return A}return Mt(g.length,_.length)})(r.referenceValue,t.referenceValue);case 8:return(function(c,d){const g=Mt(me(c.latitude),me(d.latitude));return g!==0?g:Mt(me(c.longitude),me(d.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return RT(r.arrayValue,t.arrayValue);case 10:return(function(c,d){var V,F,Z,$;const g=c.fields||{},_=d.fields||{},y=(V=g[Wc])==null?void 0:V.arrayValue,A=(F=_[Wc])==null?void 0:F.arrayValue,S=Mt(((Z=y==null?void 0:y.values)==null?void 0:Z.length)||0,(($=A==null?void 0:A.values)==null?void 0:$.length)||0);return S!==0?S:RT(y,A)})(r.mapValue,t.mapValue);case 11:return(function(c,d){if(c===Nc.mapValue&&d===Nc.mapValue)return 0;if(c===Nc.mapValue)return 1;if(d===Nc.mapValue)return-1;const g=c.fields||{},_=Object.keys(g),y=d.fields||{},A=Object.keys(y);_.sort(),A.sort();for(let S=0;S<_.length&&S<A.length;++S){const V=Wd(_[S],A[S]);if(V!==0)return V;const F=Ja(g[_[S]],y[A[S]]);if(F!==0)return F}return Mt(_.length,A.length)})(r.mapValue,t.mapValue);default:throw pt(23264,{he:i})}}function IT(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Mt(r,t);const i=Xr(r),a=Xr(t),l=Mt(i.seconds,a.seconds);return l!==0?l:Mt(i.nanos,a.nanos)}function RT(r,t){const i=r.values||[],a=t.values||[];for(let l=0;l<i.length&&l<a.length;++l){const c=Ja(i[l],a[l]);if(c)return c}return Mt(i.length,a.length)}function Za(r){return $d(r)}function $d(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(i){const a=Xr(i);return`time(${a.seconds},${a.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(i){return Jr(i).toBase64()})(r.bytesValue):"referenceValue"in r?(function(i){return dt.fromName(i).toString()})(r.referenceValue):"geoPointValue"in r?(function(i){return`geo(${i.latitude},${i.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(i){let a="[",l=!0;for(const c of i.values||[])l?l=!1:a+=",",a+=$d(c);return a+"]"})(r.arrayValue):"mapValue"in r?(function(i){const a=Object.keys(i.fields||{}).sort();let l="{",c=!0;for(const d of a)c?c=!1:l+=",",l+=`${d}:${$d(i.fields[d])}`;return l+"}"})(r.mapValue):pt(61005,{value:r})}function xc(r){switch(Zr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=dh(r);return t?16+xc(t):16;case 5:return 2*r.stringValue.length;case 6:return Jr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((l,c)=>l+xc(c)),0)})(r.arrayValue);case 10:case 11:return(function(a){let l=0;return Gs(a.fields,((c,d)=>{l+=c.length+xc(d)})),l})(r.mapValue);default:throw pt(13486,{value:r})}}function tm(r){return!!r&&"integerValue"in r}function Vm(r){return!!r&&"arrayValue"in r}function CT(r){return!!r&&"nullValue"in r}function bT(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function kc(r){return!!r&&"mapValue"in r}function Yb(r){var i,a;return((a=(((i=r==null?void 0:r.mapValue)==null?void 0:i.fields)||{})[TA])==null?void 0:a.stringValue)===vA}function Sl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return Gs(r.mapValue.fields,((i,a)=>t.mapValue.fields[i]=Sl(a))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=Sl(r.arrayValue.values[i]);return t}return{...r}}function Kb(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===qb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t){this.value=t}static empty(){return new Ln({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let a=0;a<t.length-1;++a)if(i=(i.mapValue.fields||{})[t.get(a)],!kc(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=Sl(i)}setAll(t){let i=qe.emptyPath(),a={},l=[];t.forEach(((d,g)=>{if(!i.isImmediateParentOf(g)){const _=this.getFieldsMap(i);this.applyChanges(_,a,l),a={},l=[],i=g.popLast()}d?a[g.lastSegment()]=Sl(d):l.push(g.lastSegment())}));const c=this.getFieldsMap(i);this.applyChanges(c,a,l)}delete(t){const i=this.field(t.popLast());kc(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return Ci(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<t.length;++a){let l=i.mapValue.fields[t.get(a)];kc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[t.get(a)]=l),i=l}return i.mapValue.fields}applyChanges(t,i,a){Gs(i,((l,c)=>t[l]=c));for(const l of a)delete t[l]}clone(){return new Ln(Sl(this.value))}}function AA(r){const t=[];return Gs(r.fields,((i,a)=>{const l=new qe([i]);if(kc(a)){const c=AA(a.mapValue).fields;if(c.length===0)t.push(l);else for(const d of c)t.push(l.child(d))}else t.push(l)})),new Xn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t,i,a,l,c,d,g){this.key=t,this.documentType=i,this.version=a,this.readTime=l,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(t){return new Je(t,0,yt.min(),yt.min(),yt.min(),Ln.empty(),0)}static newFoundDocument(t,i,a,l){return new Je(t,1,i,yt.min(),a,l,0)}static newNoDocument(t,i){return new Je(t,2,i,yt.min(),yt.min(),Ln.empty(),0)}static newUnknownDocument(t,i){return new Je(t,3,i,yt.min(),yt.min(),Ln.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Je&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Je(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(t,i){this.position=t,this.inclusive=i}}function wT(r,t,i){let a=0;for(let l=0;l<r.position.length;l++){const c=t[l],d=r.position[l];if(c.field.isKeyField()?a=dt.comparator(dt.fromName(d.referenceValue),i.key):a=Ja(d,i.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function NT(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!Ci(r.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(t,i="asc"){this.field=t,this.dir=i}}function Qb(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{}class Oe extends SA{constructor(t,i,a){super(),this.field=t,this.op=i,this.value=a}static create(t,i,a){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,a):new Jb(t,i,a):i==="array-contains"?new $b(t,a):i==="in"?new tw(t,a):i==="not-in"?new ew(t,a):i==="array-contains-any"?new nw(t,a):new Oe(t,i,a)}static createKeyFieldInFilter(t,i,a){return i==="in"?new Zb(t,a):new Wb(t,a)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Ja(i,this.value)):i!==null&&Zr(this.value)===Zr(i)&&this.matchesComparison(Ja(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return pt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bi extends SA{constructor(t,i){super(),this.filters=t,this.op=i,this.Pe=null}static create(t,i){return new bi(t,i)}matches(t){return IA(this)?this.filters.find((i=>!i.matches(t)))===void 0:this.filters.find((i=>i.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,i)=>t.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function IA(r){return r.op==="and"}function RA(r){return Xb(r)&&IA(r)}function Xb(r){for(const t of r.filters)if(t instanceof bi)return!1;return!0}function em(r){if(r instanceof Oe)return r.field.canonicalString()+r.op.toString()+Za(r.value);if(RA(r))return r.filters.map((t=>em(t))).join(",");{const t=r.filters.map((i=>em(i))).join(",");return`${r.op}(${t})`}}function CA(r,t){return r instanceof Oe?(function(a,l){return l instanceof Oe&&a.op===l.op&&a.field.isEqual(l.field)&&Ci(a.value,l.value)})(r,t):r instanceof bi?(function(a,l){return l instanceof bi&&a.op===l.op&&a.filters.length===l.filters.length?a.filters.reduce(((c,d,g)=>c&&CA(d,l.filters[g])),!0):!1})(r,t):void pt(19439)}function bA(r){return r instanceof Oe?(function(i){return`${i.field.canonicalString()} ${i.op} ${Za(i.value)}`})(r):r instanceof bi?(function(i){return i.op.toString()+" {"+i.getFilters().map(bA).join(" ,")+"}"})(r):"Filter"}class Jb extends Oe{constructor(t,i,a){super(t,i,a),this.key=dt.fromName(a.referenceValue)}matches(t){const i=dt.comparator(t.key,this.key);return this.matchesComparison(i)}}class Zb extends Oe{constructor(t,i){super(t,"in",i),this.keys=wA("in",i)}matches(t){return this.keys.some((i=>i.isEqual(t.key)))}}class Wb extends Oe{constructor(t,i){super(t,"not-in",i),this.keys=wA("not-in",i)}matches(t){return!this.keys.some((i=>i.isEqual(t.key)))}}function wA(r,t){var i;return(((i=t.arrayValue)==null?void 0:i.values)||[]).map((a=>dt.fromName(a.referenceValue)))}class $b extends Oe{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return Vm(i)&&Ul(i.arrayValue,this.value)}}class tw extends Oe{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&Ul(this.value.arrayValue,i)}}class ew extends Oe{constructor(t,i){super(t,"not-in",i)}matches(t){if(Ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Ul(this.value.arrayValue,i)}}class nw extends Oe{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!Vm(i)||!i.arrayValue.values)&&i.arrayValue.values.some((a=>Ul(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(t,i=null,a=[],l=[],c=null,d=null,g=null){this.path=t,this.collectionGroup=i,this.orderBy=a,this.filters=l,this.limit=c,this.startAt=d,this.endAt=g,this.Te=null}}function OT(r,t=null,i=[],a=[],l=null,c=null,d=null){return new iw(r,t,i,a,l,c,d)}function Lm(r){const t=Tt(r);if(t.Te===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map((a=>em(a))).join(","),i+="|ob:",i+=t.orderBy.map((a=>(function(c){return c.field.canonicalString()+c.dir})(a))).join(","),fh(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>Za(a))).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>Za(a))).join(",")),t.Te=i}return t.Te}function Um(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!Qb(r.orderBy[i],t.orderBy[i]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!CA(r.filters[i],t.filters[i]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!NT(r.startAt,t.startAt)&&NT(r.endAt,t.endAt)}function nm(r){return dt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(t,i=null,a=[],l=[],c=null,d="F",g=null,_=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=l,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function rw(r,t,i,a,l,c,d,g){return new mh(r,t,i,a,l,c,d,g)}function Pm(r){return new mh(r)}function DT(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function sw(r){return r.collectionGroup!==null}function Il(r){const t=Tt(r);if(t.Ie===null){t.Ie=[];const i=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),i.add(c.field.canonicalString());const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new De(qe.comparator);return d.filters.forEach((_=>{_.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(t).forEach((c=>{i.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new th(c,a))})),i.has(qe.keyField().canonicalString())||t.Ie.push(new th(qe.keyField(),a))}return t.Ie}function Ai(r){const t=Tt(r);return t.Ee||(t.Ee=aw(t,Il(r))),t.Ee}function aw(r,t){if(r.limitType==="F")return OT(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new th(l.field,c)}));const i=r.endAt?new $c(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new $c(r.startAt.position,r.startAt.inclusive):null;return OT(r.path,r.collectionGroup,t,r.filters,r.limit,i,a)}}function im(r,t,i){return new mh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,i,r.startAt,r.endAt)}function gh(r,t){return Um(Ai(r),Ai(t))&&r.limitType===t.limitType}function NA(r){return`${Lm(Ai(r))}|lt:${r.limitType}`}function ka(r){return`Query(target=${(function(i){let a=i.path.canonicalString();return i.collectionGroup!==null&&(a+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(a+=`, filters: [${i.filters.map((l=>bA(l))).join(", ")}]`),fh(i.limit)||(a+=", limit: "+i.limit),i.orderBy.length>0&&(a+=`, orderBy: [${i.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),i.startAt&&(a+=", startAt: ",a+=i.startAt.inclusive?"b:":"a:",a+=i.startAt.position.map((l=>Za(l))).join(",")),i.endAt&&(a+=", endAt: ",a+=i.endAt.inclusive?"a:":"b:",a+=i.endAt.position.map((l=>Za(l))).join(",")),`Target(${a})`})(Ai(r))}; limitType=${r.limitType})`}function ph(r,t){return t.isFoundDocument()&&(function(a,l){const c=l.key.path;return a.collectionGroup!==null?l.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):dt.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)})(r,t)&&(function(a,l){for(const c of Il(a))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,t)&&(function(a,l){for(const c of a.filters)if(!c.matches(l))return!1;return!0})(r,t)&&(function(a,l){return!(a.startAt&&!(function(d,g,_){const y=wT(d,g,_);return d.inclusive?y<=0:y<0})(a.startAt,Il(a),l)||a.endAt&&!(function(d,g,_){const y=wT(d,g,_);return d.inclusive?y>=0:y>0})(a.endAt,Il(a),l))})(r,t)}function ow(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function OA(r){return(t,i)=>{let a=!1;for(const l of Il(r)){const c=lw(l,t,i);if(c!==0)return c;a=a||l.field.isKeyField()}return 0}}function lw(r,t,i){const a=r.field.isKeyField()?dt.comparator(t.key,i.key):(function(c,d,g){const _=d.data.field(c),y=g.data.field(c);return _!==null&&y!==null?Ja(_,y):pt(42886)})(r.field,t,i);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return pt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),a=this.inner[i];if(a!==void 0){for(const[l,c]of a)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,i){const a=this.mapKeyFn(t),l=this.inner[a];if(l===void 0)return this.inner[a]=[[t,i]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,i]);l.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),a=this.inner[i];if(a===void 0)return!1;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return a.length===1?delete this.inner[i]:a.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Gs(this.inner,((i,a)=>{for(const[l,c]of a)t(l,c)}))}isEmpty(){return mA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=new oe(dt.comparator);function nr(){return uw}const DA=new oe(dt.comparator);function yl(...r){let t=DA;for(const i of r)t=t.insert(i.key,i);return t}function MA(r){let t=DA;return r.forEach(((i,a)=>t=t.insert(i,a.overlayedDocument))),t}function Ls(){return Rl()}function VA(){return Rl()}function Rl(){return new Fs((r=>r.toString()),((r,t)=>r.isEqual(t)))}const cw=new oe(dt.comparator),hw=new De(dt.comparator);function Vt(...r){let t=hw;for(const i of r)t=t.add(i);return t}const fw=new De(Mt);function dw(){return fw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jc(t)?"-0":t}}function LA(r){return{integerValue:""+r}}function mw(r,t){return Bb(t)?LA(t):xm(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this._=void 0}}function gw(r,t,i){return r instanceof Pl?(function(l,c){const d={fields:{[_A]:{stringValue:pA},[EA]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Mm(c)&&(c=dh(c)),c&&(d.fields[yA]=c),{mapValue:d}})(i,t):r instanceof xl?PA(r,t):r instanceof kl?xA(r,t):(function(l,c){const d=UA(l,c),g=MT(d)+MT(l.Ae);return tm(d)&&tm(l.Ae)?LA(g):xm(l.serializer,g)})(r,t)}function pw(r,t,i){return r instanceof xl?PA(r,t):r instanceof kl?xA(r,t):i}function UA(r,t){return r instanceof eh?(function(a){return tm(a)||(function(c){return!!c&&"doubleValue"in c})(a)})(t)?t:{integerValue:0}:null}class Pl extends _h{}class xl extends _h{constructor(t){super(),this.elements=t}}function PA(r,t){const i=kA(t);for(const a of r.elements)i.some((l=>Ci(l,a)))||i.push(a);return{arrayValue:{values:i}}}class kl extends _h{constructor(t){super(),this.elements=t}}function xA(r,t){let i=kA(t);for(const a of r.elements)i=i.filter((l=>!Ci(l,a)));return{arrayValue:{values:i}}}class eh extends _h{constructor(t,i){super(),this.serializer=t,this.Ae=i}}function MT(r){return me(r.integerValue||r.doubleValue)}function kA(r){return Vm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(t,i){this.field=t,this.transform=i}}function yw(r,t){return r.field.isEqual(t.field)&&(function(a,l){return a instanceof xl&&l instanceof xl||a instanceof kl&&l instanceof kl?Xa(a.elements,l.elements,Ci):a instanceof eh&&l instanceof eh?Ci(a.Ae,l.Ae):a instanceof Pl&&l instanceof Pl})(r.transform,t.transform)}class Ew{constructor(t,i){this.version=t,this.transformResults=i}}class Zi{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new Zi}static exists(t){return new Zi(void 0,t)}static updateTime(t){return new Zi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function zc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class yh{}function zA(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new HA(r.key,Zi.none()):new Kl(r.key,r.data,Zi.none());{const i=r.data,a=Ln.empty();let l=new De(qe.comparator);for(let c of t.fields)if(!l.has(c)){let d=i.field(c);d===null&&c.length>1&&(c=c.popLast(),d=i.field(c)),d===null?a.delete(c):a.set(c,d),l=l.add(c)}return new qs(r.key,a,new Xn(l.toArray()),Zi.none())}}function Tw(r,t,i){r instanceof Kl?(function(l,c,d){const g=l.value.clone(),_=LT(l.fieldTransforms,c,d.transformResults);g.setAll(_),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,t,i):r instanceof qs?(function(l,c,d){if(!zc(l.precondition,c))return void c.convertToUnknownDocument(d.version);const g=LT(l.fieldTransforms,c,d.transformResults),_=c.data;_.setAll(BA(l)),_.setAll(g),c.convertToFoundDocument(d.version,_).setHasCommittedMutations()})(r,t,i):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,t,i)}function Cl(r,t,i,a){return r instanceof Kl?(function(c,d,g,_){if(!zc(c.precondition,d))return g;const y=c.value.clone(),A=UT(c.fieldTransforms,_,d);return y.setAll(A),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(r,t,i,a):r instanceof qs?(function(c,d,g,_){if(!zc(c.precondition,d))return g;const y=UT(c.fieldTransforms,_,d),A=d.data;return A.setAll(BA(c)),A.setAll(y),d.convertToFoundDocument(d.version,A).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((S=>S.field)))})(r,t,i,a):(function(c,d,g){return zc(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(r,t,i)}function vw(r,t){let i=null;for(const a of r.fieldTransforms){const l=t.data.field(a.field),c=UA(a.transform,l||null);c!=null&&(i===null&&(i=Ln.empty()),i.set(a.field,c))}return i||null}function VT(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(a,l){return a===void 0&&l===void 0||!(!a||!l)&&Xa(a,l,((c,d)=>yw(c,d)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Kl extends yh{constructor(t,i,a,l=[]){super(),this.key=t,this.value=i,this.precondition=a,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class qs extends yh{constructor(t,i,a,l,c=[]){super(),this.key=t,this.data=i,this.fieldMask=a,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function BA(r){const t=new Map;return r.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const a=r.data.field(i);t.set(i,a)}})),t}function LT(r,t,i){const a=new Map;jt(r.length===i.length,32656,{Re:i.length,Ve:r.length});for(let l=0;l<i.length;l++){const c=r[l],d=c.transform,g=t.data.field(c.field);a.set(c.field,pw(d,g,i[l]))}return a}function UT(r,t,i){const a=new Map;for(const l of r){const c=l.transform,d=i.data.field(l.field);a.set(l.field,gw(c,d,t))}return a}class HA extends yh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Aw extends yh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(t,i,a,l){this.batchId=t,this.localWriteTime=i,this.baseMutations=a,this.mutations=l}applyToRemoteDocument(t,i){const a=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&Tw(c,t,a[l])}}applyToLocalView(t,i){for(const a of this.baseMutations)a.key.isEqual(t.key)&&(i=Cl(a,t,i,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(t.key)&&(i=Cl(a,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const a=VA();return this.mutations.forEach((l=>{const c=t.get(l.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=i.has(l.key)?null:g;const _=zA(d,g);_!==null&&a.set(l.key,_),d.isValidDocument()||d.convertToNoDocument(yt.min())})),a}keys(){return this.mutations.reduce(((t,i)=>t.add(i.key)),Vt())}isEqual(t){return this.batchId===t.batchId&&Xa(this.mutations,t.mutations,((i,a)=>VT(i,a)))&&Xa(this.baseMutations,t.baseMutations,((i,a)=>VT(i,a)))}}class km{constructor(t,i,a,l){this.batch=t,this.commitVersion=i,this.mutationResults=a,this.docVersions=l}static from(t,i,a){jt(t.mutations.length===a.length,58842,{me:t.mutations.length,fe:a.length});let l=(function(){return cw})();const c=t.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,a[d].version);return new km(t,i,a,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie,Pt;function Cw(r){switch(r){case X.OK:return pt(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return pt(15467,{code:r})}}function jA(r){if(r===void 0)return er("GRPC error has no .code"),X.UNKNOWN;switch(r){case Ie.OK:return X.OK;case Ie.CANCELLED:return X.CANCELLED;case Ie.UNKNOWN:return X.UNKNOWN;case Ie.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Ie.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Ie.INTERNAL:return X.INTERNAL;case Ie.UNAVAILABLE:return X.UNAVAILABLE;case Ie.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Ie.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Ie.NOT_FOUND:return X.NOT_FOUND;case Ie.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Ie.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Ie.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Ie.ABORTED:return X.ABORTED;case Ie.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Ie.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Ie.DATA_LOSS:return X.DATA_LOSS;default:return pt(39323,{code:r})}}(Pt=Ie||(Ie={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww=new Yr([4294967295,4294967295],0);function PT(r){const t=bw().encode(r),i=new rA;return i.update(t),new Uint8Array(i.digest())}function xT(r){const t=new DataView(r.buffer),i=t.getUint32(0,!0),a=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Yr([i,a],0),new Yr([l,c],0)]}class zm{constructor(t,i,a){if(this.bitmap=t,this.padding=i,this.hashCount=a,i<0||i>=8)throw new El(`Invalid padding: ${i}`);if(a<0)throw new El(`Invalid hash count: ${a}`);if(t.length>0&&this.hashCount===0)throw new El(`Invalid hash count: ${a}`);if(t.length===0&&i!==0)throw new El(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*t.length-i,this.pe=Yr.fromNumber(this.ge)}ye(t,i,a){let l=t.add(i.multiply(Yr.fromNumber(a)));return l.compare(ww)===1&&(l=new Yr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const i=PT(t),[a,l]=xT(i);for(let c=0;c<this.hashCount;c++){const d=this.ye(a,l,c);if(!this.we(d))return!1}return!0}static create(t,i,a){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),d=new zm(c,l,i);return a.forEach((g=>d.insert(g))),d}insert(t){if(this.ge===0)return;const i=PT(t),[a,l]=xT(i);for(let c=0;c<this.hashCount;c++){const d=this.ye(a,l,c);this.Se(d)}}Se(t){const i=Math.floor(t/8),a=t%8;this.bitmap[i]|=1<<a}}class El extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(t,i,a,l,c){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,i,a){const l=new Map;return l.set(t,Ql.createSynthesizedTargetChangeForCurrentChange(t,i,a)),new Eh(yt.min(),l,new oe(Mt),nr(),Vt())}}class Ql{constructor(t,i,a,l,c){this.resumeToken=t,this.current=i,this.addedDocuments=a,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,i,a){return new Ql(a,i,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(t,i,a,l){this.be=t,this.removedTargetIds=i,this.key=a,this.De=l}}class GA{constructor(t,i){this.targetId=t,this.Ce=i}}class FA{constructor(t,i,a=Ye.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=i,this.resumeToken=a,this.cause=l}}class kT{constructor(){this.ve=0,this.Fe=zT(),this.Me=Ye.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Vt(),i=Vt(),a=Vt();return this.Fe.forEach(((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:i=i.add(l);break;case 1:a=a.add(l);break;default:pt(38017,{changeType:c})}})),new Ql(this.Me,this.xe,t,i,a)}qe(){this.Oe=!1,this.Fe=zT()}Qe(t,i){this.Oe=!0,this.Fe=this.Fe.insert(t,i)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,jt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Nw{constructor(t){this.Ge=t,this.ze=new Map,this.je=nr(),this.Je=Oc(),this.He=Oc(),this.Ye=new oe(Mt)}Ze(t){for(const i of t.be)t.De&&t.De.isFoundDocument()?this.Xe(i,t.De):this.et(i,t.key,t.De);for(const i of t.removedTargetIds)this.et(i,t.key,t.De)}tt(t){this.forEachTarget(t,(i=>{const a=this.nt(i);switch(t.state){case 0:this.rt(i)&&a.Le(t.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(t.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(a.We(),a.Le(t.resumeToken));break;case 4:this.rt(i)&&(this.it(i),a.Le(t.resumeToken));break;default:pt(56790,{state:t.state})}}))}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ze.forEach(((a,l)=>{this.rt(l)&&i(l)}))}st(t){const i=t.targetId,a=t.Ce.count,l=this.ot(i);if(l){const c=l.target;if(nm(c))if(a===0){const d=new dt(c.path);this.et(i,d,Je.newNoDocument(d,yt.min()))}else jt(a===1,20013,{expectedCount:a});else{const d=this._t(i);if(d!==a){const g=this.ut(t),_=g?this.ct(g,t,d):1;if(_!==0){this.it(i);const y=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,y)}}}}}ut(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:a="",padding:l=0},hashCount:c=0}=i;let d,g;try{d=Jr(a).toUint8Array()}catch(_){if(_ instanceof gA)return Qa("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{g=new zm(d,l,c)}catch(_){return Qa(_ instanceof El?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return g.ge===0?null:g}ct(t,i,a){return i.Ce.count===a-this.Pt(t,i.targetId)?0:2}Pt(t,i){const a=this.Ge.getRemoteKeysForTarget(i);let l=0;return a.forEach((c=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.mightContain(g)||(this.et(i,c,null),l++)})),l}Tt(t){const i=new Map;this.ze.forEach(((c,d)=>{const g=this.ot(d);if(g){if(c.current&&nm(g.target)){const _=new dt(g.target.path);this.It(_).has(d)||this.Et(d,_)||this.et(d,_,Je.newNoDocument(_,t))}c.Be&&(i.set(d,c.ke()),c.qe())}}));let a=Vt();this.He.forEach(((c,d)=>{let g=!0;d.forEachWhile((_=>{const y=this.ot(_);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(t)));const l=new Eh(t,i,this.Ye,this.je,a);return this.je=nr(),this.Je=Oc(),this.He=Oc(),this.Ye=new oe(Mt),l}Xe(t,i){if(!this.rt(t))return;const a=this.Et(t,i.key)?2:0;this.nt(t).Qe(i.key,a),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(t)),this.He=this.He.insert(i.key,this.dt(i.key).add(t))}et(t,i,a){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(t)),this.He=this.He.insert(i,this.dt(i).add(t)),a&&(this.je=this.je.insert(i,a))}removeTarget(t){this.ze.delete(t)}_t(t){const i=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let i=this.ze.get(t);return i||(i=new kT,this.ze.set(t,i)),i}dt(t){let i=this.He.get(t);return i||(i=new De(Mt),this.He=this.He.insert(t,i)),i}It(t){let i=this.Je.get(t);return i||(i=new De(Mt),this.Je=this.Je.insert(t,i)),i}rt(t){const i=this.ot(t)!==null;return i||it("WatchChangeAggregator","Detected inactive target",t),i}ot(t){const i=this.ze.get(t);return i&&i.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new kT),this.Ge.getRemoteKeysForTarget(t).forEach((i=>{this.et(t,i,null)}))}Et(t,i){return this.Ge.getRemoteKeysForTarget(t).has(i)}}function Oc(){return new oe(dt.comparator)}function zT(){return new oe(dt.comparator)}const Ow={asc:"ASCENDING",desc:"DESCENDING"},Dw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Mw={and:"AND",or:"OR"};class Vw{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function rm(r,t){return r.useProto3Json||fh(t)?t:{value:t}}function nh(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function qA(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function Lw(r,t){return nh(r,t.toTimestamp())}function Si(r){return jt(!!r,49232),yt.fromTimestamp((function(i){const a=Xr(i);return new ee(a.seconds,a.nanos)})(r))}function Bm(r,t){return sm(r,t).canonicalString()}function sm(r,t){const i=(function(l){return new ae(["projects",l.projectId,"databases",l.database])})(r).child("documents");return t===void 0?i:i.child(t)}function YA(r){const t=ae.fromString(r);return jt(ZA(t),10190,{key:t.toString()}),t}function am(r,t){return Bm(r.databaseId,t.path)}function kd(r,t){const i=YA(t);if(i.get(1)!==r.databaseId.projectId)throw new ot(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new ot(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new dt(QA(i))}function KA(r,t){return Bm(r.databaseId,t)}function Uw(r){const t=YA(r);return t.length===4?ae.emptyPath():QA(t)}function om(r){return new ae(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function QA(r){return jt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function BT(r,t,i){return{name:am(r,t),fields:i.value.mapValue.fields}}function Pw(r,t){let i;if("targetChange"in t){t.targetChange;const a=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:pt(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=(function(y,A){return y.useProto3Json?(jt(A===void 0||typeof A=="string",58123),Ye.fromBase64String(A||"")):(jt(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),Ye.fromUint8Array(A||new Uint8Array))})(r,t.targetChange.resumeToken),d=t.targetChange.cause,g=d&&(function(y){const A=y.code===void 0?X.UNKNOWN:jA(y.code);return new ot(A,y.message||"")})(d);i=new FA(a,l,c,g||null)}else if("documentChange"in t){t.documentChange;const a=t.documentChange;a.document,a.document.name,a.document.updateTime;const l=kd(r,a.document.name),c=Si(a.document.updateTime),d=a.document.createTime?Si(a.document.createTime):yt.min(),g=new Ln({mapValue:{fields:a.document.fields}}),_=Je.newFoundDocument(l,c,d,g),y=a.targetIds||[],A=a.removedTargetIds||[];i=new Bc(y,A,_.key,_)}else if("documentDelete"in t){t.documentDelete;const a=t.documentDelete;a.document;const l=kd(r,a.document),c=a.readTime?Si(a.readTime):yt.min(),d=Je.newNoDocument(l,c),g=a.removedTargetIds||[];i=new Bc([],g,d.key,d)}else if("documentRemove"in t){t.documentRemove;const a=t.documentRemove;a.document;const l=kd(r,a.document),c=a.removedTargetIds||[];i=new Bc([],c,l,null)}else{if(!("filter"in t))return pt(11601,{Rt:t});{t.filter;const a=t.filter;a.targetId;const{count:l=0,unchangedNames:c}=a,d=new Rw(l,c),g=a.targetId;i=new GA(g,d)}}return i}function xw(r,t){let i;if(t instanceof Kl)i={update:BT(r,t.key,t.value)};else if(t instanceof HA)i={delete:am(r,t.key)};else if(t instanceof qs)i={update:BT(r,t.key,t.data),updateMask:Yw(t.fieldMask)};else{if(!(t instanceof Aw))return pt(16599,{Vt:t.type});i={verify:am(r,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map((a=>(function(c,d){const g=d.transform;if(g instanceof Pl)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof xl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof kl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof eh)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw pt(20930,{transform:d.transform})})(0,a)))),t.precondition.isNone||(i.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:Lw(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:pt(27497)})(r,t.precondition)),i}function kw(r,t){return r&&r.length>0?(jt(t!==void 0,14353),r.map((i=>(function(l,c){let d=l.updateTime?Si(l.updateTime):Si(c);return d.isEqual(yt.min())&&(d=Si(c)),new Ew(d,l.transformResults||[])})(i,t)))):[]}function zw(r,t){return{documents:[KA(r,t.path)]}}function Bw(r,t){const i={structuredQuery:{}},a=t.path;let l;t.collectionGroup!==null?(l=a,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=a.popLast(),i.structuredQuery.from=[{collectionId:a.lastSegment()}]),i.parent=KA(r,l);const c=(function(y){if(y.length!==0)return JA(bi.create(y,"and"))})(t.filters);c&&(i.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((A=>(function(V){return{field:za(V.field),direction:Gw(V.dir)}})(A)))})(t.orderBy);d&&(i.structuredQuery.orderBy=d);const g=rm(r,t.limit);return g!==null&&(i.structuredQuery.limit=g),t.startAt&&(i.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(i.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:i,parent:l}}function Hw(r){let t=Uw(r.parent);const i=r.structuredQuery,a=i.from?i.from.length:0;let l=null;if(a>0){jt(a===1,65062);const A=i.from[0];A.allDescendants?l=A.collectionId:t=t.child(A.collectionId)}let c=[];i.where&&(c=(function(S){const V=XA(S);return V instanceof bi&&RA(V)?V.getFilters():[V]})(i.where));let d=[];i.orderBy&&(d=(function(S){return S.map((V=>(function(Z){return new th(Ba(Z.field),(function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Z.direction))})(V)))})(i.orderBy));let g=null;i.limit&&(g=(function(S){let V;return V=typeof S=="object"?S.value:S,fh(V)?null:V})(i.limit));let _=null;i.startAt&&(_=(function(S){const V=!!S.before,F=S.values||[];return new $c(F,V)})(i.startAt));let y=null;return i.endAt&&(y=(function(S){const V=!S.before,F=S.values||[];return new $c(F,V)})(i.endAt)),rw(t,l,d,c,g,"F",_,y)}function jw(r,t){const i=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pt(28987,{purpose:l})}})(t.purpose);return i==null?null:{"goog-listen-tags":i}}function XA(r){return r.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const a=Ba(i.unaryFilter.field);return Oe.create(a,"==",{doubleValue:NaN});case"IS_NULL":const l=Ba(i.unaryFilter.field);return Oe.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ba(i.unaryFilter.field);return Oe.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ba(i.unaryFilter.field);return Oe.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pt(61313);default:return pt(60726)}})(r):r.fieldFilter!==void 0?(function(i){return Oe.create(Ba(i.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pt(58110);default:return pt(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(i){return bi.create(i.compositeFilter.filters.map((a=>XA(a))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return pt(1026)}})(i.compositeFilter.op))})(r):pt(30097,{filter:r})}function Gw(r){return Ow[r]}function Fw(r){return Dw[r]}function qw(r){return Mw[r]}function za(r){return{fieldPath:r.canonicalString()}}function Ba(r){return qe.fromServerFormat(r.fieldPath)}function JA(r){return r instanceof Oe?(function(i){if(i.op==="=="){if(bT(i.value))return{unaryFilter:{field:za(i.field),op:"IS_NAN"}};if(CT(i.value))return{unaryFilter:{field:za(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(bT(i.value))return{unaryFilter:{field:za(i.field),op:"IS_NOT_NAN"}};if(CT(i.value))return{unaryFilter:{field:za(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:za(i.field),op:Fw(i.op),value:i.value}}})(r):r instanceof bi?(function(i){const a=i.getFilters().map((l=>JA(l)));return a.length===1?a[0]:{compositeFilter:{op:qw(i.op),filters:a}}})(r):pt(54877,{filter:r})}function Yw(r){const t=[];return r.fields.forEach((i=>t.push(i.canonicalString()))),{fieldPaths:t}}function ZA(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(t,i,a,l,c=yt.min(),d=yt.min(),g=Ye.EMPTY_BYTE_STRING,_=null){this.target=t,this.targetId=i,this.purpose=a,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(t){return new jr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(t){this.yt=t}}function Qw(r){const t=Hw({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?im(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(){this.Cn=new Jw}addToCollectionParentIndex(t,i){return this.Cn.add(i),Q.resolve()}getCollectionParents(t,i){return Q.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return Q.resolve()}deleteFieldIndex(t,i){return Q.resolve()}deleteAllFieldIndexes(t){return Q.resolve()}createTargetIndexes(t,i){return Q.resolve()}getDocumentsMatchingTarget(t,i){return Q.resolve(null)}getIndexType(t,i){return Q.resolve(0)}getFieldIndexes(t,i){return Q.resolve([])}getNextCollectionGroupToUpdate(t){return Q.resolve(null)}getMinOffset(t,i){return Q.resolve(Qr.min())}getMinOffsetFromCollectionGroup(t,i){return Q.resolve(Qr.min())}updateCollectionGroup(t,i,a){return Q.resolve()}updateIndexEntries(t,i){return Q.resolve()}}class Jw{constructor(){this.index={}}add(t){const i=t.lastSegment(),a=t.popLast(),l=this.index[i]||new De(ae.comparator),c=!l.has(a);return this.index[i]=l.add(a),c}has(t){const i=t.lastSegment(),a=t.popLast(),l=this.index[i];return l&&l.has(a)}getEntries(t){return(this.index[t]||new De(ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WA=41943040;class un{static withCacheSize(t){return new un(t,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,a){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(WA,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Wa(0)}static cr(){return new Wa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="LruGarbageCollector",Zw=1048576;function GT([r,t],[i,a]){const l=Mt(r,i);return l===0?Mt(t,a):l}class Ww{constructor(t){this.Ir=t,this.buffer=new De(GT),this.Er=0}dr(){return++this.Er}Ar(t){const i=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();GT(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class $w{constructor(t,i,a){this.garbageCollector=t,this.asyncQueue=i,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){it(jT,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){ao(i)?it(jT,"Ignoring IndexedDB error during garbage collection: ",i):await so(i)}await this.Vr(3e5)}))}}class tN{constructor(t,i){this.mr=t,this.params=i}calculateTargetCount(t,i){return this.mr.gr(t).next((a=>Math.floor(i/100*a)))}nthSequenceNumber(t,i){if(i===0)return Q.resolve(hh.ce);const a=new Ww(i);return this.mr.forEachTarget(t,(l=>a.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>a.Ar(l))))).next((()=>a.maxValue))}removeTargets(t,i,a){return this.mr.removeTargets(t,i,a)}removeOrphanedDocuments(t,i){return this.mr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(it("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(HT)):this.getCacheSize(t).next((a=>a<this.params.cacheSizeCollectionThreshold?(it("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HT):this.yr(t,i)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,i){let a,l,c,d,g,_,y;const A=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(it("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),l=this.params.maximumSequenceNumbersToCollect):l=S,d=Date.now(),this.nthSequenceNumber(t,l)))).next((S=>(a=S,g=Date.now(),this.removeTargets(t,a,i)))).next((S=>(c=S,_=Date.now(),this.removeOrphanedDocuments(t,a)))).next((S=>(y=Date.now(),xa()<=Dt.DEBUG&&it("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-A}ms
	Determined least recently used ${l} in `+(g-d)+`ms
	Removed ${c} targets in `+(_-g)+`ms
	Removed ${S} documents in `+(y-_)+`ms
Total Duration: ${y-A}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:S}))))}}function eN(r,t){return new tN(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.changes=new Fs((t=>t.toString()),((t,i)=>t.isEqual(i))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,Je.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const a=this.changes.get(i);return a!==void 0?Q.resolve(a):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(t,i,a,l){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=a,this.indexManager=l}getDocument(t,i){let a=null;return this.documentOverlayCache.getOverlay(t,i).next((l=>(a=l,this.remoteDocumentCache.getEntry(t,i)))).next((l=>(a!==null&&Cl(a.mutation,l,Xn.empty(),ee.now()),l)))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next((a=>this.getLocalViewOfDocuments(t,a,Vt()).next((()=>a))))}getLocalViewOfDocuments(t,i,a=Vt()){const l=Ls();return this.populateOverlays(t,l,i).next((()=>this.computeViews(t,i,l,a).next((c=>{let d=yl();return c.forEach(((g,_)=>{d=d.insert(g,_.overlayedDocument)})),d}))))}getOverlayedDocuments(t,i){const a=Ls();return this.populateOverlays(t,a,i).next((()=>this.computeViews(t,i,a,Vt())))}populateOverlays(t,i,a){const l=[];return a.forEach((c=>{i.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(t,l).next((c=>{c.forEach(((d,g)=>{i.set(d,g)}))}))}computeViews(t,i,a,l){let c=nr();const d=Rl(),g=(function(){return Rl()})();return i.forEach(((_,y)=>{const A=a.get(y.key);l.has(y.key)&&(A===void 0||A.mutation instanceof qs)?c=c.insert(y.key,y):A!==void 0?(d.set(y.key,A.mutation.getFieldMask()),Cl(A.mutation,y,A.mutation.getFieldMask(),ee.now())):d.set(y.key,Xn.empty())})),this.recalculateAndSaveOverlays(t,c).next((_=>(_.forEach(((y,A)=>d.set(y,A))),i.forEach(((y,A)=>g.set(y,new iN(A,d.get(y)??null)))),g)))}recalculateAndSaveOverlays(t,i){const a=Rl();let l=new oe(((d,g)=>d-g)),c=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next((d=>{for(const g of d)g.keys().forEach((_=>{const y=i.get(_);if(y===null)return;let A=a.get(_)||Xn.empty();A=g.applyToLocalView(y,A),a.set(_,A);const S=(l.get(g.batchId)||Vt()).add(_);l=l.insert(g.batchId,S)}))})).next((()=>{const d=[],g=l.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),y=_.key,A=_.value,S=VA();A.forEach((V=>{if(!c.has(V)){const F=zA(i.get(V),a.get(V));F!==null&&S.set(V,F),c=c.add(V)}})),d.push(this.documentOverlayCache.saveOverlays(t,y,S))}return Q.waitFor(d)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next((a=>this.recalculateAndSaveOverlays(t,a)))}getDocumentsMatchingQuery(t,i,a,l){return(function(d){return dt.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):sw(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,a,l):this.getDocumentsMatchingCollectionQuery(t,i,a,l)}getNextDocuments(t,i,a,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,a,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,a.largestBatchId,l-c.size):Q.resolve(Ls());let g=Ml,_=c;return d.next((y=>Q.forEach(y,((A,S)=>(g<S.largestBatchId&&(g=S.largestBatchId),c.get(A)?Q.resolve():this.remoteDocumentCache.getEntry(t,A).next((V=>{_=_.insert(A,V)}))))).next((()=>this.populateOverlays(t,y,c))).next((()=>this.computeViews(t,_,y,Vt()))).next((A=>({batchId:g,changes:MA(A)})))))}))}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new dt(i)).next((a=>{let l=yl();return a.isFoundDocument()&&(l=l.insert(a.key,a)),l}))}getDocumentsMatchingCollectionGroupQuery(t,i,a,l){const c=i.collectionGroup;let d=yl();return this.indexManager.getCollectionParents(t,c).next((g=>Q.forEach(g,(_=>{const y=(function(S,V){return new mh(V,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(i,_.child(c));return this.getDocumentsMatchingCollectionQuery(t,y,a,l).next((A=>{A.forEach(((S,V)=>{d=d.insert(S,V)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(t,i,a,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,a.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,a,c,l)))).next((d=>{c.forEach(((_,y)=>{const A=y.getKey();d.get(A)===null&&(d=d.insert(A,Je.newInvalidDocument(A)))}));let g=yl();return d.forEach(((_,y)=>{const A=c.get(_);A!==void 0&&Cl(A.mutation,y,Xn.empty(),ee.now()),ph(i,y)&&(g=g.insert(_,y))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,i){return Q.resolve(this.Lr.get(i))}saveBundleMetadata(t,i){return this.Lr.set(i.id,(function(l){return{id:l.id,version:l.version,createTime:Si(l.createTime)}})(i)),Q.resolve()}getNamedQuery(t,i){return Q.resolve(this.kr.get(i))}saveNamedQuery(t,i){return this.kr.set(i.name,(function(l){return{name:l.name,query:Qw(l.bundledQuery),readTime:Si(l.readTime)}})(i)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(){this.overlays=new oe(dt.comparator),this.qr=new Map}getOverlay(t,i){return Q.resolve(this.overlays.get(i))}getOverlays(t,i){const a=Ls();return Q.forEach(i,(l=>this.getOverlay(t,l).next((c=>{c!==null&&a.set(l,c)})))).next((()=>a))}saveOverlays(t,i,a){return a.forEach(((l,c)=>{this.St(t,i,c)})),Q.resolve()}removeOverlaysForBatchId(t,i,a){const l=this.qr.get(a);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(a)),Q.resolve()}getOverlaysForCollection(t,i,a){const l=Ls(),c=i.length+1,d=new dt(i.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const _=g.getNext().value,y=_.getKey();if(!i.isPrefixOf(y.path))break;y.path.length===c&&_.largestBatchId>a&&l.set(_.getKey(),_)}return Q.resolve(l)}getOverlaysForCollectionGroup(t,i,a,l){let c=new oe(((y,A)=>y-A));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===i&&y.largestBatchId>a){let A=c.get(y.largestBatchId);A===null&&(A=Ls(),c=c.insert(y.largestBatchId,A)),A.set(y.getKey(),y)}}const g=Ls(),_=c.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((y,A)=>g.set(y,A))),!(g.size()>=l)););return Q.resolve(g)}St(t,i,a){const l=this.overlays.get(a.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(a.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new Iw(i,a));let c=this.qr.get(i);c===void 0&&(c=Vt(),this.qr.set(i,c)),this.qr.set(i,c.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(){this.sessionToken=Ye.EMPTY_BYTE_STRING}getSessionToken(t){return Q.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(){this.Qr=new De(Ue.$r),this.Ur=new De(Ue.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,i){const a=new Ue(t,i);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(t,i){t.forEach((a=>this.addReference(a,i)))}removeReference(t,i){this.Gr(new Ue(t,i))}zr(t,i){t.forEach((a=>this.removeReference(a,i)))}jr(t){const i=new dt(new ae([])),a=new Ue(i,t),l=new Ue(i,t+1),c=[];return this.Ur.forEachInRange([a,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const i=new dt(new ae([])),a=new Ue(i,t),l=new Ue(i,t+1);let c=Vt();return this.Ur.forEachInRange([a,l],(d=>{c=c.add(d.key)})),c}containsKey(t){const i=new Ue(t,0),a=this.Qr.firstAfterOrEqual(i);return a!==null&&t.isEqual(a.key)}}class Ue{constructor(t,i){this.key=t,this.Yr=i}static $r(t,i){return dt.comparator(t.key,i.key)||Mt(t.Yr,i.Yr)}static Kr(t,i){return Mt(t.Yr,i.Yr)||dt.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new De(Ue.$r)}checkEmpty(t){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,a,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Sw(c,i,a,l);this.mutationQueue.push(d);for(const g of l)this.Zr=this.Zr.add(new Ue(g.key,c)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return Q.resolve(d)}lookupMutationBatch(t,i){return Q.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(t,i){const a=i+1,l=this.ei(a),c=l<0?0:l;return Q.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?Dm:this.tr-1)}getAllMutationBatches(t){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const a=new Ue(i,0),l=new Ue(i,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([a,l],(d=>{const g=this.Xr(d.Yr);c.push(g)})),Q.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,i){let a=new De(Mt);return i.forEach((l=>{const c=new Ue(l,0),d=new Ue(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(g=>{a=a.add(g.Yr)}))})),Q.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(t,i){const a=i.path,l=a.length+1;let c=a;dt.isDocumentKey(c)||(c=c.child(""));const d=new Ue(new dt(c),0);let g=new De(Mt);return this.Zr.forEachWhile((_=>{const y=_.key.path;return!!a.isPrefixOf(y)&&(y.length===l&&(g=g.add(_.Yr)),!0)}),d),Q.resolve(this.ti(g))}ti(t){const i=[];return t.forEach((a=>{const l=this.Xr(a);l!==null&&i.push(l)})),i}removeMutationBatch(t,i){jt(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return Q.forEach(i.mutations,(l=>{const c=new Ue(l.key,i.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=a}))}ir(t){}containsKey(t,i){const a=new Ue(i,0),l=this.Zr.firstAfterOrEqual(a);return Q.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,Q.resolve()}ni(t,i){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const i=this.ei(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(t){this.ri=t,this.docs=(function(){return new oe(dt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const a=i.key,l=this.docs.get(a),c=l?l.size:0,d=this.ri(i);return this.docs=this.docs.insert(a,{document:i.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(t,a.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const a=this.docs.get(i);return Q.resolve(a?a.document.mutableCopy():Je.newInvalidDocument(i))}getEntries(t,i){let a=nr();return i.forEach((l=>{const c=this.docs.get(l);a=a.insert(l,c?c.document.mutableCopy():Je.newInvalidDocument(l))})),Q.resolve(a)}getDocumentsMatchingQuery(t,i,a,l){let c=nr();const d=i.path,g=new dt(d.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:y,value:{document:A}}=_.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||Pb(Ub(A),a)<=0||(l.has(A.key)||ph(i,A))&&(c=c.insert(A.key,A.mutableCopy()))}return Q.resolve(c)}getAllFromCollectionGroup(t,i,a,l){pt(9500)}ii(t,i){return Q.forEach(this.docs,(a=>i(a)))}newChangeBuffer(t){return new cN(this)}getSize(t){return Q.resolve(this.size)}}class cN extends nN{constructor(t){super(),this.Nr=t}applyChanges(t){const i=[];return this.changes.forEach(((a,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(a)})),Q.waitFor(i)}getFromCache(t,i){return this.Nr.getEntry(t,i)}getAllFromCache(t,i){return this.Nr.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(t){this.persistence=t,this.si=new Fs((i=>Lm(i)),Um),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.oi=0,this._i=new Hm,this.targetCount=0,this.ai=Wa.ur()}forEachTarget(t,i){return this.si.forEach(((a,l)=>i(l))),Q.resolve()}getLastRemoteSnapshotVersion(t){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Q.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(t,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.oi&&(this.oi=i),Q.resolve()}Pr(t){this.si.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ai=new Wa(i),this.highestTargetId=i),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,i){return this.Pr(i),this.targetCount+=1,Q.resolve()}updateTargetData(t,i){return this.Pr(i),Q.resolve()}removeTargetData(t,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,Q.resolve()}removeTargets(t,i,a){let l=0;const c=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=i&&a.get(g.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(t,g.targetId)),l++)})),Q.waitFor(c).next((()=>l))}getTargetCount(t){return Q.resolve(this.targetCount)}getTargetData(t,i){const a=this.si.get(i)||null;return Q.resolve(a)}addMatchingKeys(t,i,a){return this._i.Wr(i,a),Q.resolve()}removeMatchingKeys(t,i,a){this._i.zr(i,a);const l=this.persistence.referenceDelegate,c=[];return l&&i.forEach((d=>{c.push(l.markPotentiallyOrphaned(t,d))})),Q.waitFor(c)}removeMatchingKeysForTargetId(t,i){return this._i.jr(i),Q.resolve()}getMatchingKeysForTargetId(t,i){const a=this._i.Hr(i);return Q.resolve(a)}containsKey(t,i){return Q.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(t,i){this.ui={},this.overlays={},this.ci=new hh(0),this.li=!1,this.li=!0,this.hi=new oN,this.referenceDelegate=t(this),this.Pi=new hN(this),this.indexManager=new Xw,this.remoteDocumentCache=(function(l){return new uN(l)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new Kw(i),this.Ii=new sN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new aN,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let a=this.ui[t.toKey()];return a||(a=new lN(i,this.referenceDelegate),this.ui[t.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,i,a){it("MemoryPersistence","Starting transaction:",t);const l=new fN(this.ci.next());return this.referenceDelegate.Ei(),a(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(t,i){return Q.or(Object.values(this.ui).map((a=>()=>a.containsKey(t,i))))}}class fN extends kb{constructor(t){super(),this.currentSequenceNumber=t}}class jm{constructor(t){this.persistence=t,this.Ri=new Hm,this.Vi=null}static mi(t){return new jm(t)}get fi(){if(this.Vi)return this.Vi;throw pt(60996)}addReference(t,i,a){return this.Ri.addReference(a,i),this.fi.delete(a.toString()),Q.resolve()}removeReference(t,i,a){return this.Ri.removeReference(a,i),this.fi.add(a.toString()),Q.resolve()}markPotentiallyOrphaned(t,i){return this.fi.add(i.toString()),Q.resolve()}removeTarget(t,i){this.Ri.jr(i.targetId).forEach((l=>this.fi.add(l.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(t,i.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>a.removeTargetData(t,i)))}Ei(){this.Vi=new Set}di(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,(a=>{const l=dt.fromPath(a);return this.gi(t,l).next((c=>{c||i.removeEntry(l,yt.min())}))})).next((()=>(this.Vi=null,i.apply(t))))}updateLimboDocument(t,i){return this.gi(t,i).next((a=>{a?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(t){return 0}gi(t,i){return Q.or([()=>Q.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ai(t,i)])}}class ih{constructor(t,i){this.persistence=t,this.pi=new Fs((a=>Hb(a.path)),((a,l)=>a.isEqual(l))),this.garbageCollector=eN(this,i)}static mi(t,i){return new ih(t,i)}Ei(){}di(t){return Q.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}gr(t){const i=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((a=>i.next((l=>a+l))))}wr(t){let i=0;return this.pr(t,(a=>{i++})).next((()=>i))}pr(t,i){return Q.forEach(this.pi,((a,l)=>this.br(t,a,l).next((c=>c?Q.resolve():i(l)))))}removeTargets(t,i,a){return this.persistence.getTargetCache().removeTargets(t,i,a)}removeOrphanedDocuments(t,i){let a=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(t,(d=>this.br(t,d,i).next((g=>{g||(a++,c.removeEntry(d,yt.min()))})))).next((()=>c.apply(t))).next((()=>a))}markPotentiallyOrphaned(t,i){return this.pi.set(i,t.currentSequenceNumber),Q.resolve()}removeTarget(t,i){const a=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,a)}addReference(t,i,a){return this.pi.set(a,t.currentSequenceNumber),Q.resolve()}removeReference(t,i,a){return this.pi.set(a,t.currentSequenceNumber),Q.resolve()}updateLimboDocument(t,i){return this.pi.set(i,t.currentSequenceNumber),Q.resolve()}Ti(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=xc(t.data.value)),i}br(t,i,a){return Q.or([()=>this.persistence.Ai(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const l=this.pi.get(i);return Q.resolve(l!==void 0&&l>a)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(t,i,a,l){this.targetId=t,this.fromCache=i,this.Es=a,this.ds=l}static As(t,i){let a=Vt(),l=Vt();for(const c of i.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Gm(t,i.fromCache,a,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return HI()?8:zb(Ze())>0?6:4})()}initialize(t,i){this.ps=t,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(t,i,a,l){const c={result:null};return this.ys(t,i).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(t,i,l,a).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new dN;return this.Ss(t,i,d).next((g=>{if(c.result=g,this.Vs)return this.bs(t,i,d,g.size)}))})).next((()=>c.result))}bs(t,i,a,l){return a.documentReadCount<this.fs?(xa()<=Dt.DEBUG&&it("QueryEngine","SDK will not create cache indexes for query:",ka(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(xa()<=Dt.DEBUG&&it("QueryEngine","Query:",ka(i),"scans",a.documentReadCount,"local documents and returns",l,"documents as results."),a.documentReadCount>this.gs*l?(xa()<=Dt.DEBUG&&it("QueryEngine","The SDK decides to create cache indexes for query:",ka(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ai(i))):Q.resolve())}ys(t,i){if(DT(i))return Q.resolve(null);let a=Ai(i);return this.indexManager.getIndexType(t,a).next((l=>l===0?null:(i.limit!==null&&l===1&&(i=im(i,null,"F"),a=Ai(i)),this.indexManager.getDocumentsMatchingTarget(t,a).next((c=>{const d=Vt(...c);return this.ps.getDocuments(t,d).next((g=>this.indexManager.getMinOffset(t,a).next((_=>{const y=this.Ds(i,g);return this.Cs(i,y,d,_.readTime)?this.ys(t,im(i,null,"F")):this.vs(t,y,i,_)}))))})))))}ws(t,i,a,l){return DT(i)||l.isEqual(yt.min())?Q.resolve(null):this.ps.getDocuments(t,a).next((c=>{const d=this.Ds(i,c);return this.Cs(i,d,a,l)?Q.resolve(null):(xa()<=Dt.DEBUG&&it("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ka(i)),this.vs(t,d,i,Lb(l,Ml)).next((g=>g)))}))}Ds(t,i){let a=new De(OA(t));return i.forEach(((l,c)=>{ph(t,c)&&(a=a.add(c))})),a}Cs(t,i,a,l){if(t.limit===null)return!1;if(a.size!==i.size)return!0;const c=t.limitType==="F"?i.last():i.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(t,i,a){return xa()<=Dt.DEBUG&&it("QueryEngine","Using full collection scan to execute query:",ka(i)),this.ps.getDocumentsMatchingQuery(t,i,Qr.min(),a)}vs(t,i,a,l){return this.ps.getDocumentsMatchingQuery(t,a,l).next((c=>(i.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="LocalStore",gN=3e8;class pN{constructor(t,i,a,l){this.persistence=t,this.Fs=i,this.serializer=l,this.Ms=new oe(Mt),this.xs=new Fs((c=>Lm(c)),Um),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(a)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new rN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>t.collect(i,this.Ms)))}}function _N(r,t,i,a){return new pN(r,t,i,a)}async function tS(r,t){const i=Tt(r);return await i.persistence.runTransaction("Handle user change","readonly",(a=>{let l;return i.mutationQueue.getAllMutationBatches(a).next((c=>(l=c,i.Bs(t),i.mutationQueue.getAllMutationBatches(a)))).next((c=>{const d=[],g=[];let _=Vt();for(const y of l){d.push(y.batchId);for(const A of y.mutations)_=_.add(A.key)}for(const y of c){g.push(y.batchId);for(const A of y.mutations)_=_.add(A.key)}return i.localDocuments.getDocuments(a,_).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:g})))}))}))}function yN(r,t){const i=Tt(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const l=t.batch.keys(),c=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,_,y,A){const S=y.batch,V=S.keys();let F=Q.resolve();return V.forEach((Z=>{F=F.next((()=>A.getEntry(_,Z))).next(($=>{const J=y.docVersions.get(Z);jt(J!==null,48541),$.version.compareTo(J)<0&&(S.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),A.addEntry($)))}))})),F.next((()=>g.mutationQueue.removeMutationBatch(_,S)))})(i,a,t,c).next((()=>c.apply(a))).next((()=>i.mutationQueue.performConsistencyCheck(a))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(a,l,t.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let _=Vt();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(_=_.add(g.batch.mutations[y].key));return _})(t)))).next((()=>i.localDocuments.getDocuments(a,l)))}))}function eS(r){const t=Tt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>t.Pi.getLastRemoteSnapshotVersion(i)))}function EN(r,t){const i=Tt(r),a=t.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const g=[];t.targetChanges.forEach(((A,S)=>{const V=l.get(S);if(!V)return;g.push(i.Pi.removeMatchingKeys(c,A.removedDocuments,S).next((()=>i.Pi.addMatchingKeys(c,A.addedDocuments,S))));let F=V.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(S)!==null?F=F.withResumeToken(Ye.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):A.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(A.resumeToken,a)),l=l.insert(S,F),(function($,J,ut){return $.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=gN?!0:ut.addedDocuments.size+ut.modifiedDocuments.size+ut.removedDocuments.size>0})(V,F,A)&&g.push(i.Pi.updateTargetData(c,F))}));let _=nr(),y=Vt();if(t.documentUpdates.forEach((A=>{t.resolvedLimboDocuments.has(A)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(c,A))})),g.push(TN(c,d,t.documentUpdates).next((A=>{_=A.ks,y=A.qs}))),!a.isEqual(yt.min())){const A=i.Pi.getLastRemoteSnapshotVersion(c).next((S=>i.Pi.setTargetsMetadata(c,c.currentSequenceNumber,a)));g.push(A)}return Q.waitFor(g).next((()=>d.apply(c))).next((()=>i.localDocuments.getLocalViewOfDocuments(c,_,y))).next((()=>_))})).then((c=>(i.Ms=l,c)))}function TN(r,t,i){let a=Vt(),l=Vt();return i.forEach((c=>a=a.add(c))),t.getEntries(r,a).next((c=>{let d=nr();return i.forEach(((g,_)=>{const y=c.get(g);_.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(g)),_.isNoDocument()&&_.version.isEqual(yt.min())?(t.removeEntry(g,_.readTime),d=d.insert(g,_)):!y.isValidDocument()||_.version.compareTo(y.version)>0||_.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(_),d=d.insert(g,_)):it(Fm,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",_.version)})),{ks:d,qs:l}}))}function vN(r,t){const i=Tt(r);return i.persistence.runTransaction("Get next mutation batch","readonly",(a=>(t===void 0&&(t=Dm),i.mutationQueue.getNextMutationBatchAfterBatchId(a,t))))}function AN(r,t){const i=Tt(r);return i.persistence.runTransaction("Allocate target","readwrite",(a=>{let l;return i.Pi.getTargetData(a,t).next((c=>c?(l=c,Q.resolve(l)):i.Pi.allocateTargetId(a).next((d=>(l=new jr(t,d,"TargetPurposeListen",a.currentSequenceNumber),i.Pi.addTargetData(a,l).next((()=>l)))))))})).then((a=>{const l=i.Ms.get(a.targetId);return(l===null||a.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(a.targetId,a),i.xs.set(t,a.targetId)),a}))}async function lm(r,t,i){const a=Tt(r),l=a.Ms.get(t),c=i?"readwrite":"readwrite-primary";try{i||await a.persistence.runTransaction("Release target",c,(d=>a.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!ao(d))throw d;it(Fm,`Failed to update sequence numbers for target ${t}: ${d}`)}a.Ms=a.Ms.remove(t),a.xs.delete(l.target)}function FT(r,t,i){const a=Tt(r);let l=yt.min(),c=Vt();return a.persistence.runTransaction("Execute query","readwrite",(d=>(function(_,y,A){const S=Tt(_),V=S.xs.get(A);return V!==void 0?Q.resolve(S.Ms.get(V)):S.Pi.getTargetData(y,A)})(a,d,Ai(t)).next((g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(d,g.targetId).next((_=>{c=_}))})).next((()=>a.Fs.getDocumentsMatchingQuery(d,t,i?l:yt.min(),i?c:Vt()))).next((g=>(SN(a,ow(t),g),{documents:g,Qs:c})))))}function SN(r,t,i){let a=r.Os.get(t)||yt.min();i.forEach(((l,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)})),r.Os.set(t,a)}class qT{constructor(){this.activeTargetIds=dw()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class IN{constructor(){this.Mo=new qT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,a){}addLocalQueryTarget(t,i=!0){return i&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,i,a){this.xo[t]=i}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new qT,Promise.resolve()}handleUserChange(t,i,a){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="ConnectivityMonitor";class KT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){it(YT,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){it(YT,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc=null;function um(){return Dc===null?Dc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Dc++,"0x"+Dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="RestConnection",CN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+t.host,this.Ko=`projects/${a}/databases/${l}`,this.Wo=this.databaseId.database===Zc?`project_id=${a}`:`project_id=${a}&database_id=${l}`}Go(t,i,a,l,c){const d=um(),g=this.zo(t,i.toUriEncodedString());it(zd,`Sending RPC '${t}' ${d}:`,g,a);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,l,c);const{host:y}=new URL(g),A=eo(y);return this.Jo(t,g,_,a,A).then((S=>(it(zd,`Received RPC '${t}' ${d}: `,S),S)),(S=>{throw Qa(zd,`RPC '${t}' ${d} failed with error: `,S,"url: ",g,"request:",a),S}))}Ho(t,i,a,l,c,d){return this.Go(t,i,a,l,c)}jo(t,i,a){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ro})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,c)=>t[c]=l)),a&&a.headers.forEach(((l,c)=>t[c]=l))}zo(t,i){const a=CN[t];return`${this.Uo}/v1/${i}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qe="WebChannelConnection";class NN extends bN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,a,l,c){const d=um();return new Promise(((g,_)=>{const y=new sA;y.setWithCredentials(!0),y.listenOnce(aA.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Pc.NO_ERROR:const S=y.getResponseJson();it(Qe,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(S)),g(S);break;case Pc.TIMEOUT:it(Qe,`RPC '${t}' ${d} timed out`),_(new ot(X.DEADLINE_EXCEEDED,"Request time out"));break;case Pc.HTTP_ERROR:const V=y.getStatus();if(it(Qe,`RPC '${t}' ${d} failed with status:`,V,"response text:",y.getResponseText()),V>0){let F=y.getResponseJson();Array.isArray(F)&&(F=F[0]);const Z=F==null?void 0:F.error;if(Z&&Z.status&&Z.message){const $=(function(ut){const ht=ut.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(ht)>=0?ht:X.UNKNOWN})(Z.status);_(new ot($,Z.message))}else _(new ot(X.UNKNOWN,"Server responded with status "+y.getStatus()))}else _(new ot(X.UNAVAILABLE,"Connection failed."));break;default:pt(9055,{l_:t,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{it(Qe,`RPC '${t}' ${d} completed.`)}}));const A=JSON.stringify(l);it(Qe,`RPC '${t}' ${d} sending request:`,l),y.send(i,"POST",A,a,15)}))}T_(t,i,a){const l=um(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=uA(),g=lA(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(_.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,i,a),_.encodeInitMessageHeaders=!0;const A=c.join("");it(Qe,`Creating RPC '${t}' stream ${l}: ${A}`,_);const S=d.createWebChannel(A,_);this.I_(S);let V=!1,F=!1;const Z=new wN({Yo:J=>{F?it(Qe,`Not sending because RPC '${t}' stream ${l} is closed:`,J):(V||(it(Qe,`Opening RPC '${t}' stream ${l} transport.`),S.open(),V=!0),it(Qe,`RPC '${t}' stream ${l} sending:`,J),S.send(J))},Zo:()=>S.close()}),$=(J,ut,ht)=>{J.listen(ut,(lt=>{try{ht(lt)}catch(Rt){setTimeout((()=>{throw Rt}),0)}}))};return $(S,_l.EventType.OPEN,(()=>{F||(it(Qe,`RPC '${t}' stream ${l} transport opened.`),Z.o_())})),$(S,_l.EventType.CLOSE,(()=>{F||(F=!0,it(Qe,`RPC '${t}' stream ${l} transport closed`),Z.a_(),this.E_(S))})),$(S,_l.EventType.ERROR,(J=>{F||(F=!0,Qa(Qe,`RPC '${t}' stream ${l} transport errored. Name:`,J.name,"Message:",J.message),Z.a_(new ot(X.UNAVAILABLE,"The operation could not be completed")))})),$(S,_l.EventType.MESSAGE,(J=>{var ut;if(!F){const ht=J.data[0];jt(!!ht,16349);const lt=ht,Rt=(lt==null?void 0:lt.error)||((ut=lt[0])==null?void 0:ut.error);if(Rt){it(Qe,`RPC '${t}' stream ${l} received error:`,Rt);const Wt=Rt.status;let Ct=(function(w){const M=Ie[w];if(M!==void 0)return jA(M)})(Wt),b=Rt.message;Ct===void 0&&(Ct=X.INTERNAL,b="Unknown error status: "+Wt+" with message "+Rt.message),F=!0,Z.a_(new ot(Ct,b)),S.close()}else it(Qe,`RPC '${t}' stream ${l} received:`,ht),Z.u_(ht)}})),$(g,oA.STAT_EVENT,(J=>{J.stat===Zd.PROXY?it(Qe,`RPC '${t}' stream ${l} detected buffering proxy`):J.stat===Zd.NOPROXY&&it(Qe,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{Z.__()}),0),Z}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((i=>i===t))}}function Bd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(r){return new Vw(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(t,i,a=1e3,l=1.5,c=6e4){this.Mi=t,this.timerId=i,this.d_=a,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const i=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-a);l>0&&it("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="PersistentStream";class iS{constructor(t,i,a,l,c,d,g,_){this.Mi=t,this.S_=a,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new nS(t,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():i&&i.code===X.RESOURCE_EXHAUSTED?(er(i.toString()),er("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(i)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,l])=>{this.D_===i&&this.G_(a,l)}),(a=>{t((()=>{const l=new ot(X.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(l)}))}))}G_(t,i){const a=this.W_(this.D_);this.stream=this.j_(t,i),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{a((()=>this.z_(l)))})),this.stream.onMessage((l=>{a((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return it(QT,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return i=>{this.Mi.enqueueAndForget((()=>this.D_===t?i():(it(QT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ON extends iS{constructor(t,i,a,l,c,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,l,d),this.serializer=c}j_(t,i){return this.connection.T_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const i=Pw(this.serializer,t),a=(function(c){if(!("targetChange"in c))return yt.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?yt.min():d.readTime?Si(d.readTime):yt.min()})(t);return this.listener.H_(i,a)}Y_(t){const i={};i.database=om(this.serializer),i.addTarget=(function(c,d){let g;const _=d.target;if(g=nm(_)?{documents:zw(c,_)}:{query:Bw(c,_).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=qA(c,d.resumeToken);const y=rm(c,d.expectedCount);y!==null&&(g.expectedCount=y)}else if(d.snapshotVersion.compareTo(yt.min())>0){g.readTime=nh(c,d.snapshotVersion.toTimestamp());const y=rm(c,d.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,t);const a=jw(this.serializer,t);a&&(i.labels=a),this.q_(i)}Z_(t){const i={};i.database=om(this.serializer),i.removeTarget=t,this.q_(i)}}class DN extends iS{constructor(t,i,a,l,c,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,i){return this.connection.T_("Write",t,i)}J_(t){return jt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,jt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){jt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const i=kw(t.writeResults,t.commitTime),a=Si(t.commitTime);return this.listener.na(a,i)}ra(){const t={};t.database=om(this.serializer),this.q_(t)}ea(t){const i={streamToken:this.lastStreamToken,writes:t.map((a=>xw(this.serializer,a)))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{}class VN extends MN{constructor(t,i,a,l){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=a,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ot(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(t,sm(i,a),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ot(X.UNKNOWN,c.toString())}))}Ho(t,i,a,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(t,sm(i,a),l,d,g,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ot(X.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class LN{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(er(i),this.aa=!1):it("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="RemoteStore";class UN{constructor(t,i,a,l,c){this.localStore=t,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{a.enqueueAndForget((async()=>{Ys(this)&&(it(Hs,"Restarting streams for network reachability change."),await(async function(_){const y=Tt(_);y.Ea.add(4),await Xl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await vh(y)})(this))}))})),this.Ra=new LN(a,l)}}async function vh(r){if(Ys(r))for(const t of r.da)await t(!0)}async function Xl(r){for(const t of r.da)await t(!1)}function rS(r,t){const i=Tt(r);i.Ia.has(t.targetId)||(i.Ia.set(t.targetId,t),Qm(i)?Km(i):oo(i).O_()&&Ym(i,t))}function qm(r,t){const i=Tt(r),a=oo(i);i.Ia.delete(t),a.O_()&&sS(i,t),i.Ia.size===0&&(a.O_()?a.L_():Ys(i)&&i.Ra.set("Unknown"))}function Ym(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(yt.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}oo(r).Y_(t)}function sS(r,t){r.Va.Ue(t),oo(r).Z_(t)}function Km(r){r.Va=new Nw({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),oo(r).start(),r.Ra.ua()}function Qm(r){return Ys(r)&&!oo(r).x_()&&r.Ia.size>0}function Ys(r){return Tt(r).Ea.size===0}function aS(r){r.Va=void 0}async function PN(r){r.Ra.set("Online")}async function xN(r){r.Ia.forEach(((t,i)=>{Ym(r,t)}))}async function kN(r,t){aS(r),Qm(r)?(r.Ra.ha(t),Km(r)):r.Ra.set("Unknown")}async function zN(r,t,i){if(r.Ra.set("Online"),t instanceof FA&&t.state===2&&t.cause)try{await(async function(l,c){const d=c.cause;for(const g of c.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,d),l.Ia.delete(g),l.Va.removeTarget(g))})(r,t)}catch(a){it(Hs,"Failed to remove targets %s: %s ",t.targetIds.join(","),a),await rh(r,a)}else if(t instanceof Bc?r.Va.Ze(t):t instanceof GA?r.Va.st(t):r.Va.tt(t),!i.isEqual(yt.min()))try{const a=await eS(r.localStore);i.compareTo(a)>=0&&await(function(c,d){const g=c.Va.Tt(d);return g.targetChanges.forEach(((_,y)=>{if(_.resumeToken.approximateByteSize()>0){const A=c.Ia.get(y);A&&c.Ia.set(y,A.withResumeToken(_.resumeToken,d))}})),g.targetMismatches.forEach(((_,y)=>{const A=c.Ia.get(_);if(!A)return;c.Ia.set(_,A.withResumeToken(Ye.EMPTY_BYTE_STRING,A.snapshotVersion)),sS(c,_);const S=new jr(A.target,_,y,A.sequenceNumber);Ym(c,S)})),c.remoteSyncer.applyRemoteEvent(g)})(r,i)}catch(a){it(Hs,"Failed to raise snapshot:",a),await rh(r,a)}}async function rh(r,t,i){if(!ao(t))throw t;r.Ea.add(1),await Xl(r),r.Ra.set("Offline"),i||(i=()=>eS(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{it(Hs,"Retrying IndexedDB access"),await i(),r.Ea.delete(1),await vh(r)}))}function oS(r,t){return t().catch((i=>rh(r,i,t)))}async function Ah(r){const t=Tt(r),i=Wr(t);let a=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Dm;for(;BN(t);)try{const l=await vN(t.localStore,a);if(l===null){t.Ta.length===0&&i.L_();break}a=l.batchId,HN(t,l)}catch(l){await rh(t,l)}lS(t)&&uS(t)}function BN(r){return Ys(r)&&r.Ta.length<10}function HN(r,t){r.Ta.push(t);const i=Wr(r);i.O_()&&i.X_&&i.ea(t.mutations)}function lS(r){return Ys(r)&&!Wr(r).x_()&&r.Ta.length>0}function uS(r){Wr(r).start()}async function jN(r){Wr(r).ra()}async function GN(r){const t=Wr(r);for(const i of r.Ta)t.ea(i.mutations)}async function FN(r,t,i){const a=r.Ta.shift(),l=km.from(a,t,i);await oS(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await Ah(r)}async function qN(r,t){t&&Wr(r).X_&&await(async function(a,l){if((function(d){return Cw(d)&&d!==X.ABORTED})(l.code)){const c=a.Ta.shift();Wr(a).B_(),await oS(a,(()=>a.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Ah(a)}})(r,t),lS(r)&&uS(r)}async function XT(r,t){const i=Tt(r);i.asyncQueue.verifyOperationInProgress(),it(Hs,"RemoteStore received new credentials");const a=Ys(i);i.Ea.add(3),await Xl(i),a&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ea.delete(3),await vh(i)}async function YN(r,t){const i=Tt(r);t?(i.Ea.delete(2),await vh(i)):t||(i.Ea.add(2),await Xl(i),i.Ra.set("Unknown"))}function oo(r){return r.ma||(r.ma=(function(i,a,l){const c=Tt(i);return c.sa(),new ON(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:PN.bind(null,r),t_:xN.bind(null,r),r_:kN.bind(null,r),H_:zN.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),Qm(r)?Km(r):r.Ra.set("Unknown")):(await r.ma.stop(),aS(r))}))),r.ma}function Wr(r){return r.fa||(r.fa=(function(i,a,l){const c=Tt(i);return c.sa(),new DN(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:jN.bind(null,r),r_:qN.bind(null,r),ta:GN.bind(null,r),na:FN.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await Ah(r)):(await r.fa.stop(),r.Ta.length>0&&(it(Hs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(t,i,a,l,c){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=a,this.op=l,this.removalCallback=c,this.deferred=new Kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,i,a,l,c){const d=Date.now()+a,g=new Xm(t,i,d,l,c);return g.start(a),g}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ot(X.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jm(r,t){if(er("AsyncQueue",`${t}: ${r}`),ao(r))return new ot(X.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{static emptySet(t){return new Ya(t.comparator)}constructor(t){this.comparator=t?(i,a)=>t(i,a)||dt.comparator(i.key,a.key):(i,a)=>dt.comparator(i.key,a.key),this.keyedMap=yl(),this.sortedSet=new oe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((i,a)=>(t(i),!1)))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof Ya)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),a=t.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=a.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((i=>{t.push(i.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const a=new Ya;return a.comparator=this.comparator,a.keyedMap=t,a.sortedSet=i,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(){this.ga=new oe(dt.comparator)}track(t){const i=t.doc.key,a=this.ga.get(i);a?t.type!==0&&a.type===3?this.ga=this.ga.insert(i,t):t.type===3&&a.type!==1?this.ga=this.ga.insert(i,{type:a.type,doc:t.doc}):t.type===2&&a.type===2?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):t.type===2&&a.type===0?this.ga=this.ga.insert(i,{type:0,doc:t.doc}):t.type===1&&a.type===0?this.ga=this.ga.remove(i):t.type===1&&a.type===2?this.ga=this.ga.insert(i,{type:1,doc:a.doc}):t.type===0&&a.type===1?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):pt(63341,{Rt:t,pa:a}):this.ga=this.ga.insert(i,t)}ya(){const t=[];return this.ga.inorderTraversal(((i,a)=>{t.push(a)})),t}}class $a{constructor(t,i,a,l,c,d,g,_,y){this.query=t,this.docs=i,this.oldDocs=a,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=y}static fromInitialDocuments(t,i,a,l,c){const d=[];return i.forEach((g=>{d.push({type:0,doc:g})})),new $a(t,i,Ya.emptySet(i),d,a,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&gh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,a=t.docChanges;if(i.length!==a.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==a[l].type||!i[l].doc.isEqual(a[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class QN{constructor(){this.queries=ZT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,a){const l=Tt(i),c=l.queries;l.queries=ZT(),c.forEach(((d,g)=>{for(const _ of g.Sa)_.onError(a)}))})(this,new ot(X.ABORTED,"Firestore shutting down"))}}function ZT(){return new Fs((r=>NA(r)),gh)}async function XN(r,t){const i=Tt(r);let a=3;const l=t.query;let c=i.queries.get(l);c?!c.ba()&&t.Da()&&(a=2):(c=new KN,a=t.Da()?0:1);try{switch(a){case 0:c.wa=await i.onListen(l,!0);break;case 1:c.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(d){const g=Jm(d,`Initialization of query '${ka(t.query)}' failed`);return void t.onError(g)}i.queries.set(l,c),c.Sa.push(t),t.va(i.onlineState),c.wa&&t.Fa(c.wa)&&Zm(i)}async function JN(r,t){const i=Tt(r),a=t.query;let l=3;const c=i.queries.get(a);if(c){const d=c.Sa.indexOf(t);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=t.Da()?0:1:!c.ba()&&t.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(a),i.onUnlisten(a,!0);case 1:return i.queries.delete(a),i.onUnlisten(a,!1);case 2:return i.onLastRemoteStoreUnlisten(a);default:return}}function ZN(r,t){const i=Tt(r);let a=!1;for(const l of t){const c=l.query,d=i.queries.get(c);if(d){for(const g of d.Sa)g.Fa(l)&&(a=!0);d.wa=l}}a&&Zm(i)}function WN(r,t,i){const a=Tt(r),l=a.queries.get(t);if(l)for(const c of l.Sa)c.onError(i);a.queries.delete(t)}function Zm(r){r.Ca.forEach((t=>{t.next()}))}var cm,WT;(WT=cm||(cm={})).Ma="default",WT.Cache="cache";class $N{constructor(t,i,a){this.query=t,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(t){if(!this.options.includeMetadataChanges){const a=[];for(const l of t.docChanges)l.type!==3&&a.push(l);t=new $a(t.query,t.docs,t.oldDocs,a,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),i=!0):this.La(t,this.onlineState)&&(this.ka(t),i=!0),this.Na=t,i}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),i=!0),i}La(t,i){if(!t.fromCache||!this.Da())return!0;const a=i!=="Offline";return(!this.options.qa||!a)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(t){t=$a.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==cm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(t){this.key=t}}class hS{constructor(t){this.key=t}}class tO{constructor(t,i){this.query=t,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Vt(),this.mutatedKeys=Vt(),this.eu=OA(t),this.tu=new Ya(this.eu)}get nu(){return this.Ya}ru(t,i){const a=i?i.iu:new JT,l=i?i.tu:this.tu;let c=i?i.mutatedKeys:this.mutatedKeys,d=l,g=!1;const _=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((A,S)=>{const V=l.get(A),F=ph(this.query,S)?S:null,Z=!!V&&this.mutatedKeys.has(V.key),$=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let J=!1;V&&F?V.data.isEqual(F.data)?Z!==$&&(a.track({type:3,doc:F}),J=!0):this.su(V,F)||(a.track({type:2,doc:F}),J=!0,(_&&this.eu(F,_)>0||y&&this.eu(F,y)<0)&&(g=!0)):!V&&F?(a.track({type:0,doc:F}),J=!0):V&&!F&&(a.track({type:1,doc:V}),J=!0,(_||y)&&(g=!0)),J&&(F?(d=d.add(F),c=$?c.add(A):c.delete(A)):(d=d.delete(A),c=c.delete(A)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const A=this.query.limitType==="F"?d.last():d.first();d=d.delete(A.key),c=c.delete(A.key),a.track({type:1,doc:A})}return{tu:d,iu:a,Cs:g,mutatedKeys:c}}su(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,a,l){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const d=t.iu.ya();d.sort(((A,S)=>(function(F,Z){const $=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt(20277,{Rt:J})}};return $(F)-$(Z)})(A.type,S.type)||this.eu(A.doc,S.doc))),this.ou(a),l=l??!1;const g=i&&!l?this._u():[],_=this.Xa.size===0&&this.current&&!l?1:0,y=_!==this.Za;return this.Za=_,d.length!==0||y?{snapshot:new $a(this.query,t.tu,c,d,t.mutatedKeys,_===0,y,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new JT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),t.modifiedDocuments.forEach((i=>{})),t.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Vt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const i=[];return t.forEach((a=>{this.Xa.has(a)||i.push(new hS(a))})),this.Xa.forEach((a=>{t.has(a)||i.push(new cS(a))})),i}cu(t){this.Ya=t.Qs,this.Xa=Vt();const i=this.ru(t.documents);return this.applyChanges(i,!0)}lu(){return $a.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Wm="SyncEngine";class eO{constructor(t,i,a){this.query=t,this.targetId=i,this.view=a}}class nO{constructor(t){this.key=t,this.hu=!1}}class iO{constructor(t,i,a,l,c,d){this.localStore=t,this.remoteStore=i,this.eventManager=a,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Fs((g=>NA(g)),gh),this.Iu=new Map,this.Eu=new Set,this.du=new oe(dt.comparator),this.Au=new Map,this.Ru=new Hm,this.Vu={},this.mu=new Map,this.fu=Wa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rO(r,t,i=!0){const a=_S(r);let l;const c=a.Tu.get(t);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await fS(a,t,i,!0),l}async function sO(r,t){const i=_S(r);await fS(i,t,!0,!1)}async function fS(r,t,i,a){const l=await AN(r.localStore,Ai(t)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,i);let g;return a&&(g=await aO(r,t,c,d==="current",l.resumeToken)),r.isPrimaryClient&&i&&rS(r.remoteStore,l),g}async function aO(r,t,i,a,l){r.pu=(S,V,F)=>(async function($,J,ut,ht){let lt=J.view.ru(ut);lt.Cs&&(lt=await FT($.localStore,J.query,!1).then((({documents:b})=>J.view.ru(b,lt))));const Rt=ht&&ht.targetChanges.get(J.targetId),Wt=ht&&ht.targetMismatches.get(J.targetId)!=null,Ct=J.view.applyChanges(lt,$.isPrimaryClient,Rt,Wt);return tv($,J.targetId,Ct.au),Ct.snapshot})(r,S,V,F);const c=await FT(r.localStore,t,!0),d=new tO(t,c.Qs),g=d.ru(c.documents),_=Ql.createSynthesizedTargetChangeForCurrentChange(i,a&&r.onlineState!=="Offline",l),y=d.applyChanges(g,r.isPrimaryClient,_);tv(r,i,y.au);const A=new eO(t,i,d);return r.Tu.set(t,A),r.Iu.has(i)?r.Iu.get(i).push(t):r.Iu.set(i,[t]),y.snapshot}async function oO(r,t,i){const a=Tt(r),l=a.Tu.get(t),c=a.Iu.get(l.targetId);if(c.length>1)return a.Iu.set(l.targetId,c.filter((d=>!gh(d,t)))),void a.Tu.delete(t);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(l.targetId),a.sharedClientState.isActiveQueryTarget(l.targetId)||await lm(a.localStore,l.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(l.targetId),i&&qm(a.remoteStore,l.targetId),hm(a,l.targetId)})).catch(so)):(hm(a,l.targetId),await lm(a.localStore,l.targetId,!0))}async function lO(r,t){const i=Tt(r),a=i.Tu.get(t),l=i.Iu.get(a.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(a.targetId),qm(i.remoteStore,a.targetId))}async function uO(r,t,i){const a=pO(r);try{const l=await(function(d,g){const _=Tt(d),y=ee.now(),A=g.reduce(((F,Z)=>F.add(Z.key)),Vt());let S,V;return _.persistence.runTransaction("Locally write mutations","readwrite",(F=>{let Z=nr(),$=Vt();return _.Ns.getEntries(F,A).next((J=>{Z=J,Z.forEach(((ut,ht)=>{ht.isValidDocument()||($=$.add(ut))}))})).next((()=>_.localDocuments.getOverlayedDocuments(F,Z))).next((J=>{S=J;const ut=[];for(const ht of g){const lt=vw(ht,S.get(ht.key).overlayedDocument);lt!=null&&ut.push(new qs(ht.key,lt,AA(lt.value.mapValue),Zi.exists(!0)))}return _.mutationQueue.addMutationBatch(F,y,ut,g)})).next((J=>{V=J;const ut=J.applyToLocalDocumentSet(S,$);return _.documentOverlayCache.saveOverlays(F,J.batchId,ut)}))})).then((()=>({batchId:V.batchId,changes:MA(S)})))})(a.localStore,t);a.sharedClientState.addPendingMutation(l.batchId),(function(d,g,_){let y=d.Vu[d.currentUser.toKey()];y||(y=new oe(Mt)),y=y.insert(g,_),d.Vu[d.currentUser.toKey()]=y})(a,l.batchId,i),await Jl(a,l.changes),await Ah(a.remoteStore)}catch(l){const c=Jm(l,"Failed to persist write");i.reject(c)}}async function dS(r,t){const i=Tt(r);try{const a=await EN(i.localStore,t);t.targetChanges.forEach(((l,c)=>{const d=i.Au.get(c);d&&(jt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?jt(d.hu,14607):l.removedDocuments.size>0&&(jt(d.hu,42227),d.hu=!1))})),await Jl(i,a,t)}catch(a){await so(a)}}function $T(r,t,i){const a=Tt(r);if(a.isPrimaryClient&&i===0||!a.isPrimaryClient&&i===1){const l=[];a.Tu.forEach(((c,d)=>{const g=d.view.va(t);g.snapshot&&l.push(g.snapshot)})),(function(d,g){const _=Tt(d);_.onlineState=g;let y=!1;_.queries.forEach(((A,S)=>{for(const V of S.Sa)V.va(g)&&(y=!0)})),y&&Zm(_)})(a.eventManager,t),l.length&&a.Pu.H_(l),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function cO(r,t,i){const a=Tt(r);a.sharedClientState.updateQueryState(t,"rejected",i);const l=a.Au.get(t),c=l&&l.key;if(c){let d=new oe(dt.comparator);d=d.insert(c,Je.newNoDocument(c,yt.min()));const g=Vt().add(c),_=new Eh(yt.min(),new Map,new oe(Mt),d,g);await dS(a,_),a.du=a.du.remove(c),a.Au.delete(t),$m(a)}else await lm(a.localStore,t,!1).then((()=>hm(a,t,i))).catch(so)}async function hO(r,t){const i=Tt(r),a=t.batch.batchId;try{const l=await yN(i.localStore,t);gS(i,a,null),mS(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),await Jl(i,l)}catch(l){await so(l)}}async function fO(r,t,i){const a=Tt(r);try{const l=await(function(d,g){const _=Tt(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let A;return _.mutationQueue.lookupMutationBatch(y,g).next((S=>(jt(S!==null,37113),A=S.keys(),_.mutationQueue.removeMutationBatch(y,S)))).next((()=>_.mutationQueue.performConsistencyCheck(y))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(y,A,g))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,A))).next((()=>_.localDocuments.getDocuments(y,A)))}))})(a.localStore,t);gS(a,t,i),mS(a,t),a.sharedClientState.updateMutationState(t,"rejected",i),await Jl(a,l)}catch(l){await so(l)}}function mS(r,t){(r.mu.get(t)||[]).forEach((i=>{i.resolve()})),r.mu.delete(t)}function gS(r,t,i){const a=Tt(r);let l=a.Vu[a.currentUser.toKey()];if(l){const c=l.get(t);c&&(i?c.reject(i):c.resolve(),l=l.remove(t)),a.Vu[a.currentUser.toKey()]=l}}function hm(r,t,i=null){r.sharedClientState.removeLocalQueryTarget(t);for(const a of r.Iu.get(t))r.Tu.delete(a),i&&r.Pu.yu(a,i);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((a=>{r.Ru.containsKey(a)||pS(r,a)}))}function pS(r,t){r.Eu.delete(t.path.canonicalString());const i=r.du.get(t);i!==null&&(qm(r.remoteStore,i),r.du=r.du.remove(t),r.Au.delete(i),$m(r))}function tv(r,t,i){for(const a of i)a instanceof cS?(r.Ru.addReference(a.key,t),dO(r,a)):a instanceof hS?(it(Wm,"Document no longer in limbo: "+a.key),r.Ru.removeReference(a.key,t),r.Ru.containsKey(a.key)||pS(r,a.key)):pt(19791,{wu:a})}function dO(r,t){const i=t.key,a=i.path.canonicalString();r.du.get(i)||r.Eu.has(a)||(it(Wm,"New document in limbo: "+i),r.Eu.add(a),$m(r))}function $m(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const i=new dt(ae.fromString(t)),a=r.fu.next();r.Au.set(a,new nO(i)),r.du=r.du.insert(i,a),rS(r.remoteStore,new jr(Ai(Pm(i.path)),a,"TargetPurposeLimboResolution",hh.ce))}}async function Jl(r,t,i){const a=Tt(r),l=[],c=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,_)=>{d.push(a.pu(_,t,i).then((y=>{var A;if((y||i)&&a.isPrimaryClient){const S=y?!y.fromCache:(A=i==null?void 0:i.targetChanges.get(_.targetId))==null?void 0:A.current;a.sharedClientState.updateQueryState(_.targetId,S?"current":"not-current")}if(y){l.push(y);const S=Gm.As(_.targetId,y);c.push(S)}})))})),await Promise.all(d),a.Pu.H_(l),await(async function(_,y){const A=Tt(_);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>Q.forEach(y,(V=>Q.forEach(V.Es,(F=>A.persistence.referenceDelegate.addReference(S,V.targetId,F))).next((()=>Q.forEach(V.ds,(F=>A.persistence.referenceDelegate.removeReference(S,V.targetId,F)))))))))}catch(S){if(!ao(S))throw S;it(Fm,"Failed to update sequence numbers: "+S)}for(const S of y){const V=S.targetId;if(!S.fromCache){const F=A.Ms.get(V),Z=F.snapshotVersion,$=F.withLastLimboFreeSnapshotVersion(Z);A.Ms=A.Ms.insert(V,$)}}})(a.localStore,c))}async function mO(r,t){const i=Tt(r);if(!i.currentUser.isEqual(t)){it(Wm,"User change. New user:",t.toKey());const a=await tS(i.localStore,t);i.currentUser=t,(function(c,d){c.mu.forEach((g=>{g.forEach((_=>{_.reject(new ot(X.CANCELLED,d))}))})),c.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,a.removedBatchIds,a.addedBatchIds),await Jl(i,a.Ls)}}function gO(r,t){const i=Tt(r),a=i.Au.get(t);if(a&&a.hu)return Vt().add(a.key);{let l=Vt();const c=i.Iu.get(t);if(!c)return l;for(const d of c){const g=i.Tu.get(d);l=l.unionWith(g.view.nu)}return l}}function _S(r){const t=Tt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=dS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=gO.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=cO.bind(null,t),t.Pu.H_=ZN.bind(null,t.eventManager),t.Pu.yu=WN.bind(null,t.eventManager),t}function pO(r){const t=Tt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=hO.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=fO.bind(null,t),t}class sh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Th(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return _N(this.persistence,new mN,t.initialUser,this.serializer)}Cu(t){return new $A(jm.mi,this.serializer)}Du(t){return new IN}async terminate(){var t,i;(t=this.gcScheduler)==null||t.stop(),(i=this.indexBackfillerScheduler)==null||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sh.provider={build:()=>new sh};class _O extends sh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,i){jt(this.persistence.referenceDelegate instanceof ih,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new $w(a,t.asyncQueue,i)}Cu(t){const i=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new $A((a=>ih.mi(a,i)),this.serializer)}}class fm{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>$T(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=mO.bind(null,this.syncEngine),await YN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new QN})()}createDatastore(t){const i=Th(t.databaseInfo.databaseId),a=(function(c){return new NN(c)})(t.databaseInfo);return(function(c,d,g,_){return new VN(c,d,g,_)})(t.authCredentials,t.appCheckCredentials,a,i)}createRemoteStore(t){return(function(a,l,c,d,g){return new UN(a,l,c,d,g)})(this.localStore,this.datastore,t.asyncQueue,(i=>$T(this.syncEngine,i,0)),(function(){return KT.v()?new KT:new RN})())}createSyncEngine(t,i){return(function(l,c,d,g,_,y,A){const S=new iO(l,c,d,g,_,y);return A&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){var t,i;await(async function(l){const c=Tt(l);it(Hs,"RemoteStore shutting down."),c.Ea.add(5),await Xl(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(i=this.eventManager)==null||i.terminate()}}fm.provider={build:()=>new fm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):er("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,i){setTimeout((()=>{this.muted||t(i)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="FirestoreClient";class EO{constructor(t,i,a,l,c){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=a,this.databaseInfo=l,this.user=Xe.UNAUTHENTICATED,this.clientId=Nm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,(async d=>{it($r,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(a,(d=>(it($r,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const a=Jm(i,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}async function Hd(r,t){r.asyncQueue.verifyOperationInProgress(),it($r,"Initializing OfflineComponentProvider");const i=r.configuration;await t.initialize(i);let a=i.initialUser;r.setCredentialChangeListener((async l=>{a.isEqual(l)||(await tS(t.localStore,l),a=l)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function ev(r,t){r.asyncQueue.verifyOperationInProgress();const i=await TO(r);it($r,"Initializing OnlineComponentProvider"),await t.initialize(i,r.configuration),r.setCredentialChangeListener((a=>XT(t.remoteStore,a))),r.setAppCheckTokenChangeListener(((a,l)=>XT(t.remoteStore,l))),r._onlineComponents=t}async function TO(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){it($r,"Using user provided OfflineComponentProvider");try{await Hd(r,r._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!(function(l){return l.name==="FirebaseError"?l.code===X.FAILED_PRECONDITION||l.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(i))throw i;Qa("Error using user provided cache. Falling back to memory cache: "+i),await Hd(r,new sh)}}else it($r,"Using default OfflineComponentProvider"),await Hd(r,new _O(void 0));return r._offlineComponents}async function yS(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(it($r,"Using user provided OnlineComponentProvider"),await ev(r,r._uninitializedComponentsProvider._online)):(it($r,"Using default OnlineComponentProvider"),await ev(r,new fm))),r._onlineComponents}function vO(r){return yS(r).then((t=>t.syncEngine))}async function AO(r){const t=await yS(r),i=t.eventManager;return i.onListen=rO.bind(null,t.syncEngine),i.onUnlisten=oO.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=sO.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=lO.bind(null,t.syncEngine),i}function SO(r,t,i={}){const a=new Kr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,_,y){const A=new yO({next:V=>{A.Nu(),d.enqueueAndForget((()=>JN(c,S)));const F=V.docs.has(g);!F&&V.fromCache?y.reject(new ot(X.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&V.fromCache&&_&&_.source==="server"?y.reject(new ot(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(V)},error:V=>y.reject(V)}),S=new $N(Pm(g.path),A,{includeMetadataChanges:!0,qa:!0});return XN(c,S)})(await AO(r),r.asyncQueue,t,i,a))),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="firestore.googleapis.com",iv=!0;class rv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ot(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TS,this.ssl=iv}else this.host=t.host,this.ssl=t.ssl??iv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=WA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Zw)throw new ot(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Vb("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ES(t.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ot(X.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ot(X.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ot(X.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(a,l){return a.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class tg{constructor(t,i,a,l){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=a,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ot(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ot(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new Ab;switch(a.type){case"firstParty":return new Cb(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new ot(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const a=nv.get(i);a&&(it("ComponentProvider","Removing Datastore"),nv.delete(i),a.terminate())})(this),Promise.resolve()}}function IO(r,t,i,a={}){var y;r=Dl(r,tg);const l=eo(t),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},g=`${t}:${i}`;l&&(_v(`https://${g}`),yv("Firestore",!0)),c.host!==TS&&c.host!==g&&Qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...c,host:g,ssl:l,emulatorOptions:a};if(!Ps(_,d)&&(r._setSettings(_),a.mockUserToken)){let A,S;if(typeof a.mockUserToken=="string")A=a.mockUserToken,S=Xe.MOCK_USER;else{A=MI(a.mockUserToken,(y=r._app)==null?void 0:y.options.projectId);const V=a.mockUserToken.sub||a.mockUserToken.user_id;if(!V)throw new ot(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Xe(V)}r._authCredentials=new Sb(new hA(A,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(t,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new eg(this.firestore,t,this._query)}}class xe{constructor(t,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zl(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new xe(this.firestore,t,this._key)}toJSON(){return{type:xe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,a){if(Yl(i,xe._jsonSchema))return new xe(t,a||null,new dt(ae.fromString(i.referencePath)))}}xe._jsonSchemaVersion="firestore/documentReference/1.0",xe._jsonSchema={type:Re("string",xe._jsonSchemaVersion),referencePath:Re("string")};class zl extends eg{constructor(t,i,a){super(t,i,Pm(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new xe(this.firestore,null,new dt(t))}withConverter(t){return new zl(this.firestore,t,this._path)}}function vS(r,t,...i){if(r=En(r),arguments.length===1&&(t=Nm.newId()),Mb("doc","path",t),r instanceof tg){const a=ae.fromString(t,...i);return yT(a),new xe(r,null,new dt(a))}{if(!(r instanceof xe||r instanceof zl))throw new ot(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(ae.fromString(t,...i));return yT(a),new xe(r.firestore,r instanceof zl?r.converter:null,new dt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="AsyncQueue";class av{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nS(this,"async_queue_retry"),this._c=()=>{const a=Bd();a&&it(sv,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=t;const i=Bd();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const i=Bd();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new Kr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ao(t))throw t;it(sv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const i=this.ac.then((()=>(this.rc=!0,t().catch((a=>{throw this.nc=a,this.rc=!1,er("INTERNAL UNHANDLED ERROR: ",ov(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=i,i}enqueueAfterDelay(t,i,a){this.uc(),this.oc.indexOf(t)>-1&&(i=0);const l=Xm.createAndSchedule(this,t,i,a,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&pt(47125,{Pc:ov(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const i of this.tc)if(i.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((i,a)=>i.targetTimeMs-a.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const i=this.tc.indexOf(t);this.tc.splice(i,1)}}function ov(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class ng extends tg{constructor(t,i,a,l){super(t,i,a,l),this.type="firestore",this._queue=new av,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new av(t),this._firestoreClient=void 0,await t}}}function RO(r,t){const i=typeof r=="object"?r:vv(),a=typeof r=="string"?r:Zc,l=ym(i,"firestore").getImmediate({identifier:a});if(!l._initialized){const c=OI("firestore");c&&IO(l,...c)}return l}function AS(r){if(r._terminated)throw new ot(X.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||CO(r),r._firestoreClient}function CO(r){var a,l,c;const t=r._freezeSettings(),i=(function(g,_,y,A){return new Fb(g,_,y,A.host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,ES(A.experimentalLongPollingOptions),A.useFetchStreams,A.isUsingEmulator)})(r._databaseId,((a=r._app)==null?void 0:a.options.appId)||"",r._persistenceKey,t);r._componentsProvider||(l=t.localCache)!=null&&l._offlineComponentProvider&&((c=t.localCache)!=null&&c._onlineComponentProvider)&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new EO(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&(function(g){const _=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(_),_online:_}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Un(Ye.fromBase64String(t))}catch(i){throw new ot(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new Un(Ye.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Un._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Yl(t,Un._jsonSchema))return Un.fromBase64String(t.bytes)}}Un._jsonSchemaVersion="firestore/bytes/1.0",Un._jsonSchema={type:Re("string",Un._jsonSchemaVersion),bytes:Re("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new ot(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new ot(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new ot(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Mt(this._lat,t._lat)||Mt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ii._jsonSchemaVersion}}static fromJSON(t){if(Yl(t,Ii._jsonSchema))return new Ii(t.latitude,t.longitude)}}Ii._jsonSchemaVersion="firestore/geoPoint/1.0",Ii._jsonSchema={type:Re("string",Ii._jsonSchemaVersion),latitude:Re("number"),longitude:Re("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(t){this._values=(t||[]).map((i=>i))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(a,l){if(a.length!==l.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==l[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Ri._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Yl(t,Ri._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((i=>typeof i=="number")))return new Ri(t.vectorValues);throw new ot(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ri._jsonSchemaVersion="firestore/vectorValue/1.0",Ri._jsonSchema={type:Re("string",Ri._jsonSchemaVersion),vectorValues:Re("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=/^__.*__$/;class wO{constructor(t,i,a){this.data=t,this.fieldMask=i,this.fieldTransforms=a}toMutation(t,i){return this.fieldMask!==null?new qs(t,this.data,this.fieldMask,i,this.fieldTransforms):new Kl(t,this.data,i,this.fieldTransforms)}}function SS(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt(40011,{Ac:r})}}class sg{constructor(t,i,a,l,c,d){this.settings=t,this.databaseId=i,this.serializer=a,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new sg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var l;const i=(l=this.path)==null?void 0:l.child(t),a=this.Vc({path:i,fc:!1});return a.gc(t),a}yc(t){var l;const i=(l=this.path)==null?void 0:l.child(t),a=this.Vc({path:i,fc:!1});return a.Rc(),a}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return ah(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((i=>t.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>t.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(SS(this.Ac)&&bO.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class NO{constructor(t,i,a){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=a||Th(t)}Cc(t,i,a,l=!1){return new sg({Ac:t,methodName:i,Dc:a,path:qe.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function OO(r){const t=r._freezeSettings(),i=Th(r._databaseId);return new NO(r._databaseId,!!t.ignoreUndefinedProperties,i)}function DO(r,t,i,a,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,t,i,l);bS("Data must be an object, but it was:",d,a);const g=RS(a,d);let _,y;if(c.merge)_=new Xn(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const A=[];for(const S of c.mergeFields){const V=MO(t,S,i);if(!d.contains(V))throw new ot(X.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);LO(A,V)||A.push(V)}_=new Xn(A),y=d.fieldTransforms.filter((S=>_.covers(S.field)))}else _=null,y=d.fieldTransforms;return new wO(new Ln(g),_,y)}class ag extends rg{_toFieldTransform(t){return new _w(t.path,new Pl)}isEqual(t){return t instanceof ag}}function IS(r,t){if(CS(r=En(r)))return bS("Unsupported field value:",t,r),RS(r,t);if(r instanceof rg)return(function(a,l){if(!SS(l.Ac))throw l.Sc(`${a._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(a,l){const c=[];let d=0;for(const g of a){let _=IS(g,l.wc(d));_==null&&(_={nullValue:"NULL_VALUE"}),c.push(_),d++}return{arrayValue:{values:c}}})(r,t)}return(function(a,l){if((a=En(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return mw(l.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=ee.fromDate(a);return{timestampValue:nh(l.serializer,c)}}if(a instanceof ee){const c=new ee(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:nh(l.serializer,c)}}if(a instanceof Ii)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Un)return{bytesValue:qA(l.serializer,a._byteString)};if(a instanceof xe){const c=l.databaseId,d=a.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Bm(a.firestore._databaseId||l.databaseId,a._key.path)}}if(a instanceof Ri)return(function(d,g){return{mapValue:{fields:{[TA]:{stringValue:vA},[Wc]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return xm(g.serializer,y)}))}}}}}})(a,l);throw l.Sc(`Unsupported field value: ${Om(a)}`)})(r,t)}function RS(r,t){const i={};return mA(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Gs(r,((a,l)=>{const c=IS(l,t.mc(a));c!=null&&(i[a]=c)})),{mapValue:{fields:i}}}function CS(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ee||r instanceof Ii||r instanceof Un||r instanceof xe||r instanceof rg||r instanceof Ri)}function bS(r,t,i){if(!CS(i)||!fA(i)){const a=Om(i);throw a==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+a)}}function MO(r,t,i){if((t=En(t))instanceof ig)return t._internalPath;if(typeof t=="string")return wS(r,t);throw ah("Field path arguments must be of type string or ",r,!1,void 0,i)}const VO=new RegExp("[~\\*/\\[\\]]");function wS(r,t,i){if(t.search(VO)>=0)throw ah(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new ig(...t.split("."))._internalPath}catch{throw ah(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function ah(r,t,i,a,l){const c=a&&!a.isEmpty(),d=l!==void 0;let g=`Function ${t}() called with invalid data`;i&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(c||d)&&(_+=" (found",c&&(_+=` in field ${a}`),d&&(_+=` in document ${l}`),_+=")"),new ot(X.INVALID_ARGUMENT,g+r+_)}function LO(r,t){return r.some((i=>i.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(t,i,a,l,c){this._firestore=t,this._userDataWriter=i,this._key=a,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new UO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(OS("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class UO extends NS{data(){return super.data()}}function OS(r,t){return typeof t=="string"?wS(r,t):t instanceof ig?t._internalPath:t._delegate._internalPath}class PO{convertValue(t,i="none"){switch(Zr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return me(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(Jr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw pt(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const a={};return Gs(t,((l,c)=>{a[l]=this.convertValue(c,i)})),a}convertVectorValue(t){var a,l,c;const i=(c=(l=(a=t.fields)==null?void 0:a[Wc].arrayValue)==null?void 0:l.values)==null?void 0:c.map((d=>me(d.doubleValue)));return new Ri(i)}convertGeoPoint(t){return new Ii(me(t.latitude),me(t.longitude))}convertArray(t,i){return(t.values||[]).map((a=>this.convertValue(a,i)))}convertServerTimestamp(t,i){switch(i){case"previous":const a=dh(t);return a==null?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(Vl(t));default:return null}}convertTimestamp(t){const i=Xr(t);return new ee(i.seconds,i.nanos)}convertDocumentKey(t,i){const a=ae.fromString(t);jt(ZA(a),9688,{name:t});const l=new Ll(a.get(1),a.get(3)),c=new dt(a.popFirst(5));return l.isEqual(i)||er(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(r,t,i){let a;return a=r?r.toFirestore(t):t,a}class Tl{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Us extends NS{constructor(t,i,a,l,c,d){super(t,i,a,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new Hc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const a=this._document.data.field(OS("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ot(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=Us._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}Us._jsonSchemaVersion="firestore/documentSnapshot/1.0",Us._jsonSchema={type:Re("string",Us._jsonSchemaVersion),bundleSource:Re("string","DocumentSnapshot"),bundleName:Re("string"),bundle:Re("string")};class Hc extends Us{data(t={}){return super.data(t)}}class bl{constructor(t,i,a,l){this._firestore=t,this._userDataWriter=i,this._snapshot=l,this.metadata=new Tl(l.hasPendingWrites,l.fromCache),this.query=a}get docs(){const t=[];return this.forEach((i=>t.push(i))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach((a=>{t.call(i,new Hc(this._firestore,this._userDataWriter,a.key,a,new Tl(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new ot(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((g=>{const _=new Hc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new Tl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:_,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const _=new Hc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new Tl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,A=-1;return g.type!==0&&(y=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),A=d.indexOf(g.doc.key)),{type:kO(g.type),doc:_,oldIndex:y,newIndex:A}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ot(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=bl._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Nm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],a=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(i.push(c._document),a.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function kO(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(r){r=Dl(r,xe);const t=Dl(r.firestore,ng);return SO(AS(t),r._key).then((i=>GO(t,r,i)))}bl._jsonSchemaVersion="firestore/querySnapshot/1.0",bl._jsonSchema={type:Re("string",bl._jsonSchemaVersion),bundleSource:Re("string","QuerySnapshot"),bundleName:Re("string"),bundle:Re("string")};class BO extends PO{constructor(t){super(),this.firestore=t}convertBytes(t){return new Un(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new xe(this.firestore,null,i)}}function HO(r,t,i){r=Dl(r,xe);const a=Dl(r.firestore,ng),l=xO(r.converter,t);return jO(a,[DO(OO(a),"setDoc",r._key,l,r.converter!==null,i).toMutation(r._key,Zi.none())])}function jO(r,t){return(function(a,l){const c=new Kr;return a.asyncQueue.enqueueAndForget((async()=>uO(await vO(a),l,c))),c.promise})(AS(r),t)}function GO(r,t,i){const a=i.docs.get(t._key),l=new BO(r);return new Us(r,l,t._key,a,new Tl(i.hasPendingWrites,i.fromCache),t.converter)}function FO(){return new ag("serverTimestamp")}(function(t,i=!0){(function(l){ro=l})(no),Ka(new xs("firestore",((a,{instanceIdentifier:l,options:c})=>{const d=a.getProvider("app").getImmediate(),g=new ng(new Ib(a.getProvider("auth-internal")),new bb(d,a.getProvider("app-check-internal")),(function(y,A){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ot(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ll(y.options.projectId,A)})(d,l),d);return c={useFetchStreams:i,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),qr(mT,gT,t),qr(mT,gT,"esm2020")})();const dm={apiKey:"AIzaSyBzNGiNmNhNs_EZdLTVTmJ6YZM-oUmv0eo",authDomain:"matcha-account-matcha-kame.firebaseapp.com",projectId:"matcha-account-matcha-kame",storageBucket:"matcha-account-matcha-kame.firebasestorage.app",messagingSenderId:"895445531816",appId:"1:895445531816:web:9e53d85e94493e4e14169d"},mm={apiKey:"AIzaSyBilK_qMzJGL9nPMG57LPAgTeodwXCr7Vg",authDomain:"matcha-ai-matcha-kame.firebaseapp.com",projectId:"matcha-ai-matcha-kame",storageBucket:"matcha-ai-matcha-kame.firebasestorage.app",messagingSenderId:"829636661902",appId:"1:829636661902:web:2dc93a91ad6a5892622fdf"};let lv=null,uv=null,wi=null,to=null;const qO=dm.apiKey&&dm.projectId,YO=mm.apiKey&&mm.projectId;if(qO)try{lv=Em(dm,"authApp"),wi=yb(lv)}catch(r){console.error("Firebase Auth initialization failed:",r)}else console.warn("Firebase Auth config is missing. Authentication will be disabled.");if(YO)try{uv=Em(mm,"dbApp"),to=RO(uv)}catch(r){console.error("Firebase DB initialization failed:",r)}else console.warn("Firebase DB config is missing. Chat history will not be saved.");const Wi=!!wi&&!!to,KO=r=>!Wi||!wi?(r(null),()=>{}):aC(wi,r),QO=async(r,t)=>{if(!(!Wi||!wi||!r||!t))return await nC(wi,r,t)},XO=async(r,t)=>{if(!(!Wi||!wi||!r||!t))return await iC(wi,r,t)},JO=async()=>{!Wi||!wi||await oC(wi)},ZO=async(r,t)=>{if(!Wi||!to||!r)return;const i=vS(to,"chatHistory",r);try{await HO(i,{messages:t,updatedAt:FO()})}catch(a){throw console.error("Error saving chat history: ",a),a}},WO=async r=>{var i;if(!Wi||!to||!r)return null;const t=vS(to,"chatHistory",r);try{const a=await zO(t);return a.exists()&&((i=a.data())==null?void 0:i.messages)||null}catch(a){throw console.error("Error fetching chat history: ",a),a}},Sh=r=>tt.jsxs("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",...r,children:[tt.jsx("circle",{cx:"16",cy:"16",r:"15",fill:"#7f9d72"}),tt.jsxs("g",{stroke:"#000000",strokeWidth:"2",strokeLinecap:"round",children:[tt.jsx("path",{d:"M13 7 V 25"}),tt.jsx("path",{d:"M19 7 V 25"}),tt.jsx("path",{d:"M7 13 H 25"}),tt.jsx("path",{d:"M7 19 H 25"})]})]}),$O=r=>tt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...r,children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),tD=r=>tt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...r,children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})}),eD=({currentLanguage:r,onChange:t})=>{const i="px-3 py-1 text-sm rounded-md text-gray-600 bg-gray-200 hover:bg-gray-300 transition-colors",a="px-3 py-1 text-sm rounded-md text-white bg-green-500 font-semibold shadow-sm";return tt.jsxs("div",{className:"flex items-center p-1 bg-gray-100 rounded-lg space-x-1",children:[tt.jsx("button",{onClick:()=>t("jp"),className:r==="jp"?a:i,children:""}),tt.jsx("button",{onClick:()=>t("en"),className:r==="en"?a:i,children:"English"})]})},nD=({language:r,onLanguageChange:t,currentUser:i,onLogout:a,onLoginClick:l,isAuthDisabled:c=!1})=>{const[d,g]=Pe.useState(!1);return tt.jsxs("header",{className:"p-4 border-b border-gray-100 flex justify-between items-center flex-shrink-0",children:[tt.jsxs("div",{className:"flex items-center gap-3",children:[tt.jsx(Sh,{className:"w-8 h-8"}),tt.jsx("h1",{className:"text-xl font-bold text-green-800 tracking-wider",children:"AI"})]}),tt.jsxs("div",{className:"flex items-center gap-2",children:[tt.jsx(eD,{currentLanguage:r,onChange:t}),tt.jsxs("div",{className:"relative",children:[i?tt.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg hover:bg-gray-100",onClick:()=>g(!d),onBlur:()=>setTimeout(()=>g(!1),200),tabIndex:0,children:[tt.jsx($O,{className:"w-5 h-5 text-gray-600"}),tt.jsx("span",{className:"font-semibold text-gray-700 text-sm hidden sm:inline",children:i.email})]}):tt.jsx("button",{onClick:l,disabled:c,className:"px-3 py-2 text-sm rounded-lg text-white bg-green-500 font-semibold shadow-sm hover:bg-green-600 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:c?"":" / "}),i&&d&&tt.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10 border border-gray-200",children:tt.jsxs("button",{onClick:()=>{a(),g(!1)},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[tt.jsx(tD,{className:"w-4 h-4"}),""]})})]})]})]})},iD=({message:r})=>{const t=r.role==="model",i=()=>tt.jsx("span",{className:"animate-pulse",children:""});return tt.jsxs("div",{className:`flex items-start gap-3 my-4 ${t?"justify-start":"justify-end"}`,children:[t&&tt.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-green-100 flex items-center justify-center border-2 border-green-200",children:tt.jsx(Sh,{className:"w-6 h-6"})}),tt.jsx("div",{className:`max-w-md md:max-w-lg px-4 py-3 rounded-2xl shadow-sm whitespace-pre-wrap text-gray-800 ${t?"bg-green-100 rounded-tl-none":"bg-sky-100 rounded-tr-none"}`,children:r.content||tt.jsx(i,{})})]})},rD=({messages:r,currentUser:t,language:i})=>{const a=Pe.useRef(null),l=()=>{var c;(c=a.current)==null||c.scrollIntoView({behavior:"smooth"})};return Pe.useEffect(()=>{l()},[r]),tt.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 space-y-6",children:tt.jsxs("div",{className:"max-w-4xl mx-auto",children:[t?tt.jsx(tt.Fragment,{children:r.map(c=>tt.jsx(iD,{message:c},c.id))}):tt.jsxs("div",{className:"flex flex-col items-center justify-center h-full pt-16 text-center",children:[tt.jsx(Sh,{className:"w-16 h-16 text-green-300"}),tt.jsx("h2",{className:"mt-4 text-2xl font-bold text-gray-700",children:""}),tt.jsx("p",{className:"mt-2 text-gray-500",children:ja[i].welcomeMessage})]}),tt.jsx("div",{ref:a})]})})},sD=({onSendMessage:r,isLoading:t,language:i,disabled:a})=>{const[l,c]=Pe.useState(""),d=_=>{_.preventDefault(),l.trim()&&!t&&!a&&(r(l),c(""))},g=_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),d(_))};return tt.jsx("div",{className:"p-4 bg-white border-t border-gray-100 flex-shrink-0",children:tt.jsx("div",{className:"max-w-4xl mx-auto",children:tt.jsxs("form",{onSubmit:d,children:[tt.jsx("label",{htmlFor:"chat-input",className:`font-medium mb-2 block text-sm ${a?"text-gray-400":"text-gray-600"}`,children:ja[i].placeholder}),tt.jsx("textarea",{id:"chat-input",value:l,onChange:_=>c(_.target.value),onKeyDown:g,className:"w-full bg-gray-50 border border-gray-200 rounded-lg p-3 text-gray-800 focus:ring-2 focus:ring-green-400 focus:outline-none transition resize-none disabled:bg-gray-200",rows:2,disabled:t||a,placeholder:a?"":""}),tt.jsx("button",{type:"submit",disabled:t||!l.trim()||a,className:"w-full mt-3 px-4 py-3 rounded-lg bg-green-500 text-white font-semibold transition-colors duration-200 disabled:bg-green-300 disabled:cursor-not-allowed hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500","aria-label":ja[i].button,children:t?tt.jsx("div",{className:"w-5 h-5 mx-auto border-2 border-t-transparent border-white rounded-full animate-spin"}):ja[i].button})]})})})},aD=({onAuth:r,onClose:t,language:i})=>{const[a,l]=Pe.useState(""),[c,d]=Pe.useState(""),[g,_]=Pe.useState(!0),[y,A]=Pe.useState(null),[S,V]=Pe.useState(!1),F=async $=>{if($.preventDefault(),!(!a.trim()||!c.trim())){V(!0),A(null);try{await r(g?"login":"signup",a,c),t()}catch(J){let ut="";J.code==="auth/invalid-email"?ut="":J.code==="auth/weak-password"?ut="6":J.code==="auth/email-already-in-use"?ut="":(J.code==="auth/invalid-credential"||J.code==="auth/user-not-found")&&(ut=""),A(ut)}finally{V(!1)}}},Z=ja[i];return tt.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:tt.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 sm:p-8 w-full max-w-sm relative",children:[tt.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600","aria-label":"Close modal",children:tt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),tt.jsxs("div",{className:"text-center",children:[tt.jsx(Sh,{className:"w-12 h-12 mx-auto mb-3"}),tt.jsx("h2",{className:"text-2xl font-bold text-green-800",children:Z.authModalTitle}),tt.jsx("p",{className:"text-gray-500 mt-1 text-sm",children:""})]}),tt.jsxs("form",{onSubmit:F,className:"mt-6",children:[tt.jsx("input",{type:"email",value:a,onChange:$=>l($.target.value),placeholder:Z.authModalEmailPlaceholder,className:"w-full bg-gray-100 border-2 border-gray-200 rounded-lg p-3 text-gray-800 focus:ring-2 focus:ring-green-400 focus:border-green-400 focus:outline-none transition",autoFocus:!0}),tt.jsx("input",{type:"password",value:c,onChange:$=>d($.target.value),placeholder:Z.authModalPasswordPlaceholder,className:"w-full mt-3 bg-gray-100 border-2 border-gray-200 rounded-lg p-3 text-gray-800 focus:ring-2 focus:ring-green-400 focus:border-green-400 focus:outline-none transition"}),y&&tt.jsx("p",{className:"text-red-500 text-xs mt-2 text-center",children:y}),tt.jsx("button",{type:"submit",disabled:S||!a.trim()||!c.trim(),className:"w-full mt-4 px-4 py-3 rounded-lg bg-green-500 text-white font-semibold transition-colors duration-200 disabled:bg-green-300 disabled:cursor-not-allowed hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:S?tt.jsx("div",{className:"w-5 h-5 mx-auto border-2 border-t-transparent border-white rounded-full animate-spin"}):g?Z.authModalLoginButton:Z.authModalSignUpButton})]}),tt.jsx("button",{onClick:()=>{_(!g),A(null)},className:"text-center w-full mt-4 text-sm text-green-600 hover:underline",children:g?Z.authModalToggleToSignUp:Z.authModalToggleToLogin})]})})},oD=()=>{const[r,t]=Pe.useState([]),[i,a]=Pe.useState(!1),[l,c]=Pe.useState(null),[d,g]=Pe.useState("jp"),[_,y]=Pe.useState(null),[A,S]=Pe.useState(!1),[V,F]=Pe.useState(!1);Pe.useEffect(()=>{if(Wi)return KO(async lt=>{if(Nd.initializeChat(d),lt){y(lt),a(!0);const Rt=await WO(lt.uid);t(Rt??[{id:Date.now(),role:"model",content:ja[d].greeting}]),a(!1)}else y(null),t([]);F(!0)});Nd.initializeChat(d),t([]),y(null),F(!0)},[d]);const Z=ht=>{g(ht)},$=async(ht,lt,Rt)=>{ht==="login"?await XO(lt,Rt):await QO(lt,Rt)},J=async()=>{await JO()},ut=async ht=>{if(!ht.trim()||i||!_)return;const lt={id:Date.now(),role:"user",content:ht},Rt=lt.id+1,Wt={id:Rt,role:"model",content:""};t(b=>[...b,lt,Wt]),a(!0),c(null);let Ct=[];try{const b=await Nd.sendMessageStream(ht);let I="";for await(const w of b){const M=w.text;I+=M,t(N=>{const U=N.map(R=>R.id===Rt?{...R,content:I}:R);return Ct=U,U})}}catch(b){console.error("Error sending message:",b);const I=b instanceof Error?b.message:"Failed to get a response.";c(I),t(w=>{const M=w.map(N=>N.id===Rt?{...N,content:`Error: ${I}`}:N);return Ct=M,M})}finally{a(!1),_&&Ct.length>0&&ZO(_.uid,Ct)}};return V?tt.jsxs(tt.Fragment,{children:[A&&tt.jsx(aD,{onAuth:$,onClose:()=>S(!1),language:d}),tt.jsx("div",{className:"bg-green-50 font-sans flex items-center justify-center min-h-screen p-0 sm:p-4",children:tt.jsxs("div",{className:"w-full h-full sm:max-w-3xl sm:h-[95vh] flex flex-col bg-white sm:rounded-2xl shadow-lg overflow-hidden border border-gray-200",children:[!Wi&&tt.jsx("div",{className:"bg-yellow-100 border-b-2 border-yellow-200 text-yellow-800 text-center p-2 text-sm font-semibold",children:"Firebase"}),tt.jsx(nD,{language:d,onLanguageChange:Z,currentUser:_,onLogout:J,onLoginClick:()=>S(!0),isAuthDisabled:!Wi}),tt.jsx(rD,{messages:r,currentUser:_,language:d}),l&&tt.jsx("div",{className:"text-center text-red-500 p-2 text-sm",children:`Error: ${l}`}),tt.jsx(sD,{onSendMessage:ut,isLoading:i,language:d,disabled:!_})]})})]}):tt.jsx("div",{className:"bg-green-50 flex items-center justify-center min-h-screen",children:tt.jsx("div",{className:"w-8 h-8 border-4 border-t-transparent border-green-500 rounded-full animate-spin"})})},DS=document.getElementById("root");if(!DS)throw new Error("Could not find root element to mount to");const lD=EI.createRoot(DS);lD.render(tt.jsx(hI.StrictMode,{children:tt.jsx(oD,{})}));
